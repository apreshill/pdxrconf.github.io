<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>rOpenSci | fulltext v0.3: x, y, and z</title>

     
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>

    <script type="text/javascript">
    hljs.configure({languages: []});
    hljs.initHighlightingOnLoad();
    </script>
    <link rel="stylesheet" type="text/css" href="/css/style-new.css" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#4b8add">
<meta name="theme-color" content="#4b8add">


    <meta name="viewport" content="width=device-width, initial-scale=1">

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-462421-6', 'auto');
ga('send', 'pageview');
</script>

</head>
<body>

    
    <div id="header">
        <div class="container">
            <div class="row center-m">
                
                <div class="col-1">
                    <a href="/index.html"><img src="/img/icon_lettering_white.svg" /></a>
                </div>
                
                
                <nav class="col-6 col-offset-4 top-3">
                    <ul class="row between">
						<li><a href="/about/">About</a></li>
                        <li><a href="/blog/">Blog</a></li>
                        <li><a href="/packages/">Packages</a></li>
                        <li><a href="/community/">Community</a></li>
                        <li><a href="http://discuss.ropensci.org/" target="_blank">Discuss</a></li>

                    </ul>
                </nav>
                
            </div>
        </div>
    </div>


<article class="blog-post">
    <div class="container">
        <div class="row">
            <div class="col-2 sidebar top-5">
                <ul class="autoSidebar"></ul>
            </div> 
        </div>
        <div class="row">
            <div class="col-offset-2 col-8 top-20">
                <h1 style="text-align: center;">fulltext v0.3: x, y, and z</h1>
            </div>
        </div>
        <div class="row">
            <div class="col-offset-2 col-8 top-10 bottom-5" style="font-size: 20px; text-align: center;">
                <p class="authors" style="text-align: center;">
                    
                        &nbsp;
                        
                          <a href="/about/#team">Scott Chamberlain</a> 
                        
                        
                        &nbsp; |
                    
                    <small style="color: #5B617A; margin-left: 10px;"> DECEMBER 12, 2017</small>
                </p>
            </div>
            <div class="col-offset-2 col-8 top-2">
                

<p>Text-mining - the art of answering questions by extracting patterns, data, etc. out of the published literature - is not easy. It&rsquo;s made incredibly difficult because of publishers. Novels, etc. by writers are one thing - but it&rsquo;s hard to swallow the fact that the vast majority of publicly funded research across the globe is published in paywall journals. That is, taxpayers pay twice for research: once for the grant to fund the work, then again to be able to read it.</p>

<p>Text-mining use cases run from determining the change in use of words through time [ref], to XYZ.</p>

<h2 id="the-fulltext-package">the fulltext package</h2>

<p><strong><code>fulltext</code> is a package to help R users get published literature from the web in it&rsquo;s many forms, and across thousands upon thousands of publishers.</strong></p>

<p><code>fulltext</code> tries to make the following use cases as easy as possible:</p>

<ul>
<li>Search for articles</li>
<li>Fetch abstracts</li>
<li>Fetch full text articles</li>
<li>Get links for full text articles (xml, pdf)</li>
<li>Extract text from articles / convert formats</li>
<li>Collect sections of articles that you actually need (e.g., titles)</li>
<li>Download supplementary materials</li>
</ul>

<p><code>fulltext</code> organizes funvctions around use cases, then provides flexiblity to query many data sources within that use case (i.e. function). For example <code>fulltext::ft_search</code> searches for articles - you can choose among one or more of many data sources to search, passing options to each source as needed.</p>

<p><br></p>

<h2 id="what-does-a-workflow-with-fulltext-look-like">What does a workflow with fulltext look like?</h2>

<ul>
<li>Search for articles with <code>ft_search()</code></li>
<li>Fetch articles with <code>ft_get()</code> using the output of the previous step</li>
<li>Extract sections of articles needed with <code>chunks()</code></li>
<li>Do some further processing with <code>tm</code> or <code>?????</code></li>
</ul>

<p><br></p>

<h2 id="setup">Setup</h2>

<p>Install <code>fulltext</code></p>

<pre><code class="language-r">install.packages(&quot;fulltext&quot;)
</code></pre>

<p>Or get the development version:</p>

<pre><code class="language-r">devtools::install_github(&quot;ropensci/fulltext&quot;)
</code></pre>

<pre><code class="language-r">library(fulltext)
</code></pre>

<p><br></p>

<h2 id="search-ft-search">Search: ft_search</h2>

<p>With <code>ft_search</code> you can search</p>

<ul>
<li>PLOS</li>
<li>BMC</li>
<li>Crossref</li>
<li>Entrez</li>
<li>arxiv</li>
<li>biorxiv</li>
<li>Euro</li>
<li>Scopus</li>
<li>Microsoft</li>
</ul>

<pre><code class="language-r">res &lt;- ft_search(query='ecology', from='plos')
res
</code></pre>

<pre><code>## Query:
##   [ecology] 
## Found:
##   [PLoS: 40969; BMC: 0; Crossref: 0; Entrez: 0; arxiv: 0; biorxiv: 0; Europe PMC: 0; Scopus: 0; Microsoft: 0] 
## Returned:
##   [PLoS: 10; BMC: 0; Crossref: 0; Entrez: 0; arxiv: 0; biorxiv: 0; Europe PMC: 0; Scopus: 0; Microsoft: 0]
</code></pre>

<p>After running <code>ft_search</code> you can index to each source that you
selected in the <code>from</code> parameter.</p>

<pre><code class="language-r">res$plos
</code></pre>

<pre><code>## Query: [ecology] 
## Records found, returned: [40969, 10] 
## License: [CC-BY] 
##                              id
## 1  10.1371/journal.pone.0001248
## 2  10.1371/journal.pone.0059813
## 3  10.1371/journal.pone.0155019
## 4  10.1371/journal.pone.0080763
## 5  10.1371/journal.pone.0150648
## 6  10.1371/journal.pcbi.1003594
## 7  10.1371/journal.pone.0102437
## 8  10.1371/journal.pone.0175014
## 9  10.1371/journal.pone.0166559
## 10 10.1371/journal.pone.0054689
</code></pre>

<p>If you give many values for the <code>from</code> parameter you&rsquo;ll get many results, for
example:</p>

<pre><code class="language-r">res &lt;- ft_search(query='ecology', from=c('plos', 'crossref'))
res$plos
</code></pre>

<pre><code>## Query: [ecology] 
## Records found, returned: [40969, 10] 
## License: [CC-BY] 
##                              id
## 1  10.1371/journal.pone.0001248
## 2  10.1371/journal.pone.0059813
## 3  10.1371/journal.pone.0155019
## 4  10.1371/journal.pone.0080763
## 5  10.1371/journal.pone.0150648
## 6  10.1371/journal.pcbi.1003594
## 7  10.1371/journal.pone.0102437
## 8  10.1371/journal.pone.0175014
## 9  10.1371/journal.pone.0166559
## 10 10.1371/journal.pone.0054689
</code></pre>

<pre><code class="language-r">res$crossref
</code></pre>

<pre><code>## Query: [ecology] 
## Records found, returned: [142207, 10] 
## License: [variable, see individual records] 
##                  container.title    created  deposited
## 1                        Ecology 2006-05-03 2017-04-14
## 2                        Ecology 2006-05-03 2016-03-07
## 3                        Ecology 2006-05-03 2016-03-07
## 4                        Ecology 2006-05-03 2016-03-07
## 5                        Ecology 2006-05-03 2017-04-15
## 6                        Ecology 2006-05-03 2017-04-15
## 7                        Ecology 2006-05-09 2016-03-07
## 8                        Ecology 2017-04-26 2017-07-11
## 9  Trends in Ecology &amp; Evolution 2002-07-25 2017-06-14
## 10 Journal of Industrial Ecology 2017-10-05 2017-11-14
## Variables not shown: doi (chr), indexed (chr), issn (chr), issue (chr),
##      issued (chr), license_date (chr), license_url (chr),
##      license_delay.in.days (chr), license_content.version (chr), member
##      (chr), page (chr), prefix (chr), publisher (chr), reference.count
##      (chr), score (chr), source (chr), subject (chr), title (chr), type
##      (chr), url (chr), volume (chr), author (list), link (list), archive
##      (chr), alternative.id (chr), subtitle (chr)
</code></pre>

<p><br></p>

<h2 id="fetch-abstracts-ft-abstract">Fetch abstracts: ft_abstract</h2>

<ul>
<li>PLOS</li>
<li>Scopus</li>
<li>Microsoft</li>
<li>Crossref</li>
</ul>

<pre><code class="language-r">(res &lt;- ft_search(query = 'biology', from = 'plos', limit = 10, 
   plosopts = list(fq = list('doc_type:full', '-article_type:correction',
                  '-article_type:viewpoints'))))
</code></pre>

<pre><code>## Query:
##   [biology] 
## Found:
##   [PLoS: 170852; BMC: 0; Crossref: 0; Entrez: 0; arxiv: 0; biorxiv: 0; Europe PMC: 0; Scopus: 0; Microsoft: 0] 
## Returned:
##   [PLoS: 10; BMC: 0; Crossref: 0; Entrez: 0; arxiv: 0; biorxiv: 0; Europe PMC: 0; Scopus: 0; Microsoft: 0]
</code></pre>

<pre><code class="language-r">(out &lt;- ft_abstract(x = res$plos$data$id, from = &quot;plos&quot;))
</code></pre>

<pre><code>## &lt;fulltext abstracts&gt;
## Found:
##   [PLOS: 84; Scopus: 0; Microsoft: 0; Crossref: 0]
</code></pre>

<p><br></p>

<h2 id="fetch-articles-ft-get">Fetch articles: ft_get</h2>

<p>The function <code>ft_get</code> is the workhorse for getting the namesake of the package:
full text articles.</p>

<p>Beware that using this function can be tricky depending on where you want to
get articles from. While searching (<code>ft_search</code>) usually doesn&rsquo;t present any
barriers or stumbling blocks, <code>ft_get</code> can get frustrating because so many
publishers paywall their articles. The combination of paywalls and their
patchwork of who gets to get through them means that we can&rsquo;t easily predict
who will run into problems with Elsevier, Wiley, etc.</p>

<p>With this version we&rsquo;ve tried to bulk up the documentation as much as possible
to make jumping over these barriers as easy as possible.</p>

<pre><code class="language-r">ft_get()
</code></pre>

<pre><code>## Error in stop(&quot;no 'ft_get' method for &quot;, class(x), call. = FALSE): argument &quot;x&quot; is missing, with no default
</code></pre>

<p><br></p>

<h2 id="get-full-text-links-ft-links">Get full text links: ft_links</h2>

<p>In case you want to sort out full text links yourself, and have those links for whatever purpose, <code>ft_links</code> is your friend. It grabs data from PLOS, Crossref, Entrez, and BMC.</p>

<pre><code class="language-r">(res2 &lt;- ft_search(query='ecology', from='crossref'))
</code></pre>

<pre><code>## Query:
##   [ecology] 
## Found:
##   [PLoS: 0; BMC: 0; Crossref: 142207; Entrez: 0; arxiv: 0; biorxiv: 0; Europe PMC: 0; Scopus: 0; Microsoft: 0] 
## Returned:
##   [PLoS: 0; BMC: 0; Crossref: 10; Entrez: 0; arxiv: 0; biorxiv: 0; Europe PMC: 0; Scopus: 0; Microsoft: 0]
</code></pre>

<pre><code class="language-r">(out &lt;- ft_links(res2))
</code></pre>

<pre><code>## &lt;fulltext links&gt;
## [Found] 10 
## [IDs] 10.2307/1929908 10.2307/1931096 10.2307/1934287 10.2307/1943146
##      10.2307/1930158 10.2307/1928969 10.2307/1935066 10.1002/ecy.1807
##      10.1016/s0169-5347(97)89918-1 10.1111/jiec.12669 ...
</code></pre>

<pre><code class="language-r">out$crossref
</code></pre>

<pre><code>## $found
## [1] 10
## 
## $ids
##  [1] &quot;10.2307/1929908&quot;               &quot;10.2307/1931096&quot;              
##  [3] &quot;10.2307/1934287&quot;               &quot;10.2307/1943146&quot;              
##  [5] &quot;10.2307/1930158&quot;               &quot;10.2307/1928969&quot;              
##  [7] &quot;10.2307/1935066&quot;               &quot;10.1002/ecy.1807&quot;             
##  [9] &quot;10.1016/s0169-5347(97)89918-1&quot; &quot;10.1111/jiec.12669&quot;           
## 
## $data
## $data$`10.2307/1929908`
##                                                                     url
## 1 https://api.wiley.com/onlinelibrary/tdm/v1/articles/10.2307%2F1929908
##               doi        type member
## 1 10.2307/1929908 unspecified    311
## 
## $data$`10.2307/1931096`
##                                                                    url
## 1 http://api.wiley.com/onlinelibrary/tdm/v1/articles/10.2307%2F1931096
##               doi        type member
## 1 10.2307/1931096 unspecified    311
## 
## $data$`10.2307/1934287`
##                                                                    url
## 1 http://api.wiley.com/onlinelibrary/tdm/v1/articles/10.2307%2F1934287
##               doi        type member
## 1 10.2307/1934287 unspecified    311
## 
## $data$`10.2307/1943146`
##                                                                    url
## 1 http://api.wiley.com/onlinelibrary/tdm/v1/articles/10.2307%2F1943146
##               doi        type member
## 1 10.2307/1943146 unspecified    311
## 
## $data$`10.2307/1930158`
##                                                                     url
## 1  http://api.wiley.com/onlinelibrary/tdm/v1/articles/10.2307%2F1930158
## 2 https://api.wiley.com/onlinelibrary/tdm/v1/articles/10.2307%2F1930158
##               doi        type member
## 1 10.2307/1930158         pdf    311
## 2 10.2307/1930158 unspecified    311
## 
## $data$`10.2307/1928969`
##                                                                     url
## 1  http://api.wiley.com/onlinelibrary/tdm/v1/articles/10.2307%2F1928969
## 2 https://api.wiley.com/onlinelibrary/tdm/v1/articles/10.2307%2F1928969
##               doi        type member
## 1 10.2307/1928969         pdf    311
## 2 10.2307/1928969 unspecified    311
## 
## $data$`10.2307/1935066`
##                                                                    url
## 1 http://api.wiley.com/onlinelibrary/tdm/v1/articles/10.2307%2F1935066
##               doi        type member
## 1 10.2307/1935066 unspecified    311
## 
## $data$`10.1002/ecy.1807`
##                                                                      url
## 1 https://api.wiley.com/onlinelibrary/tdm/v1/articles/10.1002%2Fecy.1807
## 2       http://onlinelibrary.wiley.com/wol1/doi/10.1002/ecy.1807/fullpdf
##                doi        type member
## 1 10.1002/ecy.1807         pdf    311
## 2 10.1002/ecy.1807 unspecified    311
## 
## $data$`10.1016/s0169-5347(97)89918-1`
##                                                                                    url
## 1   https://api.elsevier.com/content/article/PII:S0169534797899181?httpAccept=text/xml
## 2 https://api.elsevier.com/content/article/PII:S0169534797899181?httpAccept=text/plain
##                             doi  type member
## 1 10.1016/s0169-5347(97)89918-1   xml     78
## 2 10.1016/s0169-5347(97)89918-1 plain     78
## 
## $data$`10.1111/jiec.12669`
##                                                                        url
## 1 https://api.wiley.com/onlinelibrary/tdm/v1/articles/10.1111%2Fjiec.12669
## 2       http://onlinelibrary.wiley.com/wol1/doi/10.1111/jiec.12669/fullpdf
##                  doi        type member
## 1 10.1111/jiec.12669         pdf    311
## 2 10.1111/jiec.12669 unspecified    311
## 
## 
## $opts
## list()
</code></pre>

<pre><code class="language-r">out$crossref$data[[1]]
</code></pre>

<pre><code>##                                                                     url
## 1 https://api.wiley.com/onlinelibrary/tdm/v1/articles/10.2307%2F1929908
##               doi        type member
## 1 10.2307/1929908 unspecified    311
</code></pre>

<p><br></p>

<h2 id="extract-text-ft-extract">Extract text: ft_extract</h2>

<p>This is a simple wrapper around the <a href="https://github.com/ropensci/pdftools">pdftools</a> package - when dealing with
xml or plain text data, there&rsquo;s no need to parse what you get from <code>ft_get</code>.</p>

<pre><code class="language-r">path &lt;- system.file(&quot;examples&quot;, &quot;example1.pdf&quot;, package = &quot;fulltext&quot;)
(res &lt;- ft_extract(path))
</code></pre>

<pre><code>## &lt;document&gt;/Library/Frameworks/R.framework/Versions/3.4/Resources/library/fulltext/examples/example1.pdf
##   Title: Suffering and mental health among older people living in nursing homes---a mixed-methods study
##   Producer: pdfTeX-1.40.10
##   Creation date: 2015-07-17
</code></pre>

<p>Note that <code>ft_extract</code> can now handle both a file path to a pdf file, or
raw bytes.</p>

<h2 id="extract-parts-of-documents-you-want-chunk">Extract parts of documents you want: chunk</h2>

<p><code>chunk()</code> helps you quickly extract sections of articles you want aross many articles and many publishers. This only handles XML (there&rsquo;s no structure in plain text and pdf text) We have internal scripts targeting specific publishers so that we can handle variation in how publishers structure their XML.</p>

<pre><code class="language-r">library(&quot;rplos&quot;)
(dois &lt;- searchplos(q=&quot;*:*&quot;, fl='id',
   fq=list('doc_type:full',&quot;article_type:\&quot;research article\&quot;&quot;),
     limit=5)$data$id)
</code></pre>

<pre><code>## [1] &quot;10.1371/journal.pone.0074173&quot; &quot;10.1371/journal.pone.0060168&quot;
## [3] &quot;10.1371/journal.pone.0170933&quot; &quot;10.1371/journal.pone.0170932&quot;
## [5] &quot;10.1371/journal.pone.0187293&quot;
</code></pre>

<pre><code class="language-r">x &lt;- ft_get(dois, from = &quot;plos&quot;)
x %&gt;% chunks(c(&quot;doi&quot;,&quot;history&quot;)) %&gt;% tabularize()
</code></pre>

<pre><code>## $plos
##                            doi history.received history.accepted
## 1 10.1371/journal.pone.0074173       2013-04-04       2013-07-27
## 2 10.1371/journal.pone.0060168       2012-09-18       2013-02-25
## 3 10.1371/journal.pone.0170933       2016-10-05       2017-01-12
## 4 10.1371/journal.pone.0170932       2016-09-27       2017-01-12
## 5 10.1371/journal.pone.0187293       2016-12-16       2017-10-17
</code></pre>

<p><br></p>

<h2 id="notes">Notes</h2>

<h3 id="xxx">xxx</h3>

<p>xxx</p>

<h3 id="feedback">Feedback!</h3>

<p>Please do upgrade/install <code>fulltext</code>  <code>v0.3</code> and let us know what you think.</p>

<p><br></p>

            </div>
            <br>


            
            
            <div class="col-offset-2 col-8 top-4">
                <div id='discourse-comments'></div>
                <script type="text/javascript">
                DiscourseEmbed = { discourseUrl: 'https://discuss.ropensci.org/',
                                   topicId: "xxx" };
                (function() {
                  var d = document.createElement('script'); d.type = 'text/javascript'; d.async = true;
                  d.src = DiscourseEmbed.discourseUrl + 'javascripts/embed.js';
                  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(d);
                })();
                </script>
            </div>
            
        </div>
        <br>
    </div>
</article>





    <div id="footer">
        <div class="container">
            <div class="row start">
                <div class="col-1 col-1-3 top-8">
                    <img src="/img/icon_short_white.svg" />
                </div>

                <div class="col-9 col-offset-2 top-10 bottom-8">
                    <div class="row between">
                        <div class="col-2 col-1-3">
                            <a href="http://github.com/ropensci" target="_blank"><div class="icon icon-github"></div></a>
                            <a href="http://twitter.com/ropensci" target="_blank"><div class="icon icon-twitter"></div></a>
                            <a href="http://vimeo.com/ropensci" target="_blank"><div class="icon icon-vimeo"></div></a>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Info</h5>
                                <li><a href="/about">Mission</a></li>
                                <li><a href="/about#team">Team</a></li>
                                <li><a href="/about#collaborators">Collaborators</a></li>
                                <li><a href="/careers">Careers</a></li>

                            </ul>
                        </div>

                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Work</h5>
                                <li><a href="/packages/">Packages</a></li>
                                <li><a href="/blog/">Blog</a></li>
                                <li><a href="/technotes/">Tech Notes</a></li>
                                <li><a href="/tutorials/">Tutorials</a></li>
                                <li><a href="/usecases/">Use Cases</a></li>
                                <li><a href="/resources/">More Resources</a></li>
                            </ul>
                        </div>
                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Participate</h5>
                                <li><a href="/contact.html">Contact us</a></li>
                                <li><a href="/community/">Community</a></li>
                                <li><a href="http://onboarding.ropensci.org/">Contribute software</a></li>
                                <li><a href="http://unconf17.ropensci.org/">Unconference</a></li>
                                <li><a href="/coc">Code of conduct</a></li>
                                <li><a href="/donate/">Donate</a></li>
                            </ul>
                        </div>
                        <div class="col-4 top-8 bottom-8">
                            <h5 class="bottom-2"></h5>

                            <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" target="_blank">NumFOCUS</a></p>
                            <a href="http://numfocus.org" target="_blank"><img src="img/numfocus.png"></a>
                            <br>

                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12 top-8 bottom-9 divider">
                    <p class="top-9">Except where otherwise noted, content on this site is licensed under the <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank">CC-BY license</a>.
                    </p>
                </div>
            </div>
        </div>
    </div>



</body>
</html>



