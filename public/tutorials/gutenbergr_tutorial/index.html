<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>rOpenSci | gutenbergr tutorial</title>

     
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>

    <script type="text/javascript">
    hljs.configure({languages: []});
    hljs.initHighlightingOnLoad();
    </script>
    <link rel="stylesheet" type="text/css" href="/css/style-new.css" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#4b8add">
<meta name="theme-color" content="#4b8add">


    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

    
    <div id="header">
        <div class="container">
            <div class="row center-m">
                
                <div class="col-1">
                    <a href="/index.html"><img src="/img/icon_lettering_white.svg" /></a>
                </div>
                
                
                <nav class="col-6 col-offset-4 top-3">
                    <ul class="row between">
						<li><a href="/about/">About</a></li>
                        <li><a href="/blog/">Blog</a></li>
                        <li><a href="/packages/">Packages</a></li>
                        <li><a href="/community/">Community</a></li>
                        <li><a href="http://discuss.ropensci.org/" target="_blank">Discuss</a></li>

                    </ul>
                </nav>
                
            </div>
        </div>
    </div>



    <article>
        <div class="container top-20">
            
            <div class="row centered">
                
                <div class="col-7 bottom-20 maintext">
                    <h1>gutenbergr tutorial</h1>
                    <br>
                    <h4><small style="color:grey">for v0.1.3</small></h4>
                    <br>

                    <article>
                    

<p>The gutenbergr package helps you download and process public domain works from the <a href="https://www.gutenberg.org/">Project Gutenberg</a> collection. This includes both tools for downloading books (and stripping header/footer information), and a complete dataset of Project Gutenberg metadata that can be used to find words of interest. Includes:</p>

<ul>
<li>A function <code>gutenberg_download()</code> that downloads one or more works from Project Gutenberg by ID: e.g., <code>gutenberg_download(84)</code> downloads the text of Frankenstein.</li>
<li>Metadata for all Project Gutenberg works as R datasets, so that they can be searched and filtered:

<ul>
<li><code>gutenberg_metadata</code> contains information about each work, pairing Gutenberg ID with title, author, language, etc</li>
<li><code>gutenberg_authors</code> contains information about each author, such as aliases and birth/death year</li>
<li><code>gutenberg_subjects</code> contains pairings of works with Library of Congress subjects and topics</li>
</ul></li>
</ul>

<h3 id="installation">Installation</h3>

<p>Stable version from CRAN</p>

<pre><code class="language-r">install.packages(&quot;gutenbergr&quot;)
</code></pre>

<p>Development version from GitHub</p>

<pre><code class="language-r">if (!require(&quot;devtools&quot;)) install.packages(&quot;devtools&quot;)
devtools::install_github(&quot;ropenscilabs/gutenbergr&quot;)
</code></pre>

<pre><code class="language-r">library(&quot;gutenbergr&quot;)
</code></pre>

<h3 id="project-gutenberg-metadata">Project Gutenberg Metadata</h3>

<p>This package contains metadata for all Project Gutenberg works as R datasets, so that you can search and filter for particular works before downloading.</p>

<p>The dataset <code>gutenberg_metadata</code> contains information about each work, pairing Gutenberg ID with title, author, language, etc:</p>

<pre><code class="language-r">library(gutenbergr)
gutenberg_metadata
#&gt; # A tibble: 51,997 x 8
#&gt;    gutenberg_id
#&gt;           &lt;int&gt;
#&gt;  1            0
#&gt;  2            1
#&gt;  3            2
#&gt;  4            3
#&gt;  5            4
#&gt;  6            5
#&gt;  7            6
#&gt;  8            7
#&gt;  9            8
#&gt; 10            9
#&gt; # ... with 51,987 more rows, and 7 more variables: title &lt;chr&gt;,
#&gt; #   author &lt;chr&gt;, gutenberg_author_id &lt;int&gt;, language &lt;chr&gt;,
#&gt; #   gutenberg_bookshelf &lt;chr&gt;, rights &lt;chr&gt;, has_text &lt;lgl&gt;
</code></pre>

<p>For example, you could find the Gutenberg ID of Wuthering Heights by doing:</p>

<pre><code class="language-r">library(dplyr)

gutenberg_metadata %&gt;%
  filter(title == &quot;Wuthering Heights&quot;)
#&gt; # A tibble: 1 x 8
#&gt;   gutenberg_id             title        author gutenberg_author_id
#&gt;          &lt;int&gt;             &lt;chr&gt;         &lt;chr&gt;               &lt;int&gt;
#&gt; 1          768 Wuthering Heights BrontÃ«, Emily                 405
#&gt; # ... with 4 more variables: language &lt;chr&gt;, gutenberg_bookshelf &lt;chr&gt;,
#&gt; #   rights &lt;chr&gt;, has_text &lt;lgl&gt;
</code></pre>

<p>In many analyses, you may want to filter just for English works, avoid duplicates, and include only books that have text that can be downloaded. The <code>gutenberg_works()</code> function does this pre-filtering:</p>

<pre><code class="language-r">gutenberg_works()
#&gt; # A tibble: 40,737 x 8
#&gt;    gutenberg_id
#&gt;           &lt;int&gt;
#&gt;  1            0
#&gt;  2            1
#&gt;  3            2
#&gt;  4            3
#&gt;  5            4
#&gt;  6            5
#&gt;  7            6
#&gt;  8            7
#&gt;  9            8
#&gt; 10            9
#&gt; # ... with 40,727 more rows, and 7 more variables: title &lt;chr&gt;,
#&gt; #   author &lt;chr&gt;, gutenberg_author_id &lt;int&gt;, language &lt;chr&gt;,
#&gt; #   gutenberg_bookshelf &lt;chr&gt;, rights &lt;chr&gt;, has_text &lt;lgl&gt;
</code></pre>

<p>It also allows you to perform filtering as an argument:</p>

<pre><code class="language-r">gutenberg_works(author == &quot;Austen, Jane&quot;)
#&gt; # A tibble: 10 x 8
#&gt;    gutenberg_id
#&gt;           &lt;int&gt;
#&gt;  1          105
#&gt;  2          121
#&gt;  3          141
#&gt;  4          158
#&gt;  5          161
#&gt;  6          946
#&gt;  7         1212
#&gt;  8         1342
#&gt;  9        31100
#&gt; 10        42078
#&gt; # ... with 7 more variables: title &lt;chr&gt;, author &lt;chr&gt;,
#&gt; #   gutenberg_author_id &lt;int&gt;, language &lt;chr&gt;, gutenberg_bookshelf &lt;chr&gt;,
#&gt; #   rights &lt;chr&gt;, has_text &lt;lgl&gt;

# or with a regular expression

library(stringr)
gutenberg_works(str_detect(author, &quot;Austen&quot;))
#&gt; # A tibble: 13 x 8
#&gt;    gutenberg_id
#&gt;           &lt;int&gt;
#&gt;  1          105
#&gt;  2          121
#&gt;  3          141
#&gt;  4          158
#&gt;  5          161
#&gt;  6          946
#&gt;  7         1212
#&gt;  8         1342
#&gt;  9        17797
#&gt; 10        31100
#&gt; 11        33513
#&gt; 12        39897
#&gt; 13        42078
#&gt; # ... with 7 more variables: title &lt;chr&gt;, author &lt;chr&gt;,
#&gt; #   gutenberg_author_id &lt;int&gt;, language &lt;chr&gt;, gutenberg_bookshelf &lt;chr&gt;,
#&gt; #   rights &lt;chr&gt;, has_text &lt;lgl&gt;
</code></pre>

<p>The meta-data currently in the package was last updated on <strong>05 May 2016</strong>.</p>

<h3 id="downloading-books-by-id">Downloading books by ID</h3>

<p>The function <code>gutenberg_download()</code> downloads one or more works from Project Gutenberg based on their ID. For example, we earlier saw that &ldquo;Wuthering Heights&rdquo; has ID 768 (see <a href="https://www.gutenberg.org/ebooks/768">the URL here</a>), so <code>gutenberg_download(768)</code> downloads this text.</p>

<pre><code class="language-r">wuthering_heights &lt;- gutenberg_download(768)

wuthering_heights
#&gt; # A tibble: 12,085 x 2
#&gt;    gutenberg_id
#&gt;           &lt;int&gt;
#&gt;  1          768
#&gt;  2          768
#&gt;  3          768
#&gt;  4          768
#&gt;  5          768
#&gt;  6          768
#&gt;  7          768
#&gt;  8          768
#&gt;  9          768
#&gt; 10          768
#&gt; # ... with 12,075 more rows, and 1 more variables: text &lt;chr&gt;
</code></pre>

<p>Notice it is returned as a tbl_df (a type of data frame) including two variables: <code>gutenberg_id</code> (useful if multiple books are returned), and a character vector of the text, one row per line. Notice that the header and footer added by Project Gutenberg (visible <a href="http://www.gutenberg.org/files/768/768.txt">here</a>) have been stripped away.</p>

<p>Provide a vector of IDs to download multiple books. For example, to download Jane Eyre (book <a href="https://www.gutenberg.org/ebooks/1260">1260</a>) along with Wuthering Heights, do:</p>

<pre><code class="language-r">books &lt;- gutenberg_download(c(768, 1260), meta_fields = &quot;title&quot;)

books
#&gt; # A tibble: 32,744 x 3
#&gt;    gutenberg_id
#&gt;           &lt;int&gt;
#&gt;  1          768
#&gt;  2          768
#&gt;  3          768
#&gt;  4          768
#&gt;  5          768
#&gt;  6          768
#&gt;  7          768
#&gt;  8          768
#&gt;  9          768
#&gt; 10          768
#&gt; # ... with 32,734 more rows, and 2 more variables: text &lt;chr&gt;, title &lt;chr&gt;
</code></pre>

<p>Notice that the <code>meta_fields</code> argument allows us to add one or more additional fields from the <code>gutenberg_metadata</code> to the downloaded text, such as title or author.</p>

<pre><code class="language-r">books %&gt;%
  count(title)
#&gt; # A tibble: 2 x 2
#&gt;                         title     n
#&gt;                         &lt;chr&gt; &lt;int&gt;
#&gt; 1 Jane Eyre: An Autobiography 20659
#&gt; 2           Wuthering Heights 12085
</code></pre>

<h3 id="other-meta-datasets">Other meta-datasets</h3>

<p>You may want to select books based on information other than their title or author, such as their genre or topic. <code>gutenberg_subjects</code> contains pairings of works with Library of Congress subjects and topics. &ldquo;lcc&rdquo; means <a href="https://www.loc.gov/catdir/cpso/lcco/">Library of Congress Classification</a>, while &ldquo;lcsh&rdquo; means <a href="http://id.loc.gov/authorities/subjects.html">Library of Congress subject headings</a>:</p>

<pre><code class="language-r">gutenberg_subjects
#&gt; # A tibble: 140,173 x 3
#&gt;    gutenberg_id subject_type
#&gt;           &lt;int&gt;        &lt;chr&gt;
#&gt;  1            1          lcc
#&gt;  2            1         lcsh
#&gt;  3            1         lcsh
#&gt;  4            1          lcc
#&gt;  5            2          lcc
#&gt;  6            2         lcsh
#&gt;  7            2         lcsh
#&gt;  8            2          lcc
#&gt;  9            3         lcsh
#&gt; 10            3         lcsh
#&gt; # ... with 140,163 more rows, and 1 more variables: subject &lt;chr&gt;
</code></pre>

<p>This is useful for extracting texts from a particular topic or genre, such as detective stories, or a particular character, such as Sherlock Holmes. The <code>gutenberg_id</code> column can then be used to download these texts or to link with other metadata.</p>

<pre><code class="language-r">gutenberg_subjects %&gt;%
  filter(subject == &quot;Detective and mystery stories&quot;)
#&gt; # A tibble: 521 x 3
#&gt;    gutenberg_id subject_type                       subject
#&gt;           &lt;int&gt;        &lt;chr&gt;                         &lt;chr&gt;
#&gt;  1          170         lcsh Detective and mystery stories
#&gt;  2          173         lcsh Detective and mystery stories
#&gt;  3          244         lcsh Detective and mystery stories
#&gt;  4          305         lcsh Detective and mystery stories
#&gt;  5          330         lcsh Detective and mystery stories
#&gt;  6          481         lcsh Detective and mystery stories
#&gt;  7          547         lcsh Detective and mystery stories
#&gt;  8          863         lcsh Detective and mystery stories
#&gt;  9          905         lcsh Detective and mystery stories
#&gt; 10         1155         lcsh Detective and mystery stories
#&gt; # ... with 511 more rows

gutenberg_subjects %&gt;%
  filter(grepl(&quot;Holmes, Sherlock&quot;, subject))
#&gt; # A tibble: 47 x 3
#&gt;    gutenberg_id subject_type
#&gt;           &lt;int&gt;        &lt;chr&gt;
#&gt;  1          108         lcsh
#&gt;  2          221         lcsh
#&gt;  3          244         lcsh
#&gt;  4          834         lcsh
#&gt;  5         1661         lcsh
#&gt;  6         2097         lcsh
#&gt;  7         2343         lcsh
#&gt;  8         2344         lcsh
#&gt;  9         2345         lcsh
#&gt; 10         2346         lcsh
#&gt; # ... with 37 more rows, and 1 more variables: subject &lt;chr&gt;
</code></pre>

<p><code>gutenberg_authors</code> contains information about each author, such as aliases and birth/death year:</p>

<pre><code class="language-r">gutenberg_authors
#&gt; # A tibble: 16,236 x 7
#&gt;    gutenberg_author_id                                     author
#&gt;                  &lt;int&gt;                                      &lt;chr&gt;
#&gt;  1                   1                              United States
#&gt;  2                   3                           Lincoln, Abraham
#&gt;  3                   4                             Henry, Patrick
#&gt;  4                   5                                 Adam, Paul
#&gt;  5                   7                             Carroll, Lewis
#&gt;  6                   8 United States. Central Intelligence Agency
#&gt;  7                   9                           Melville, Herman
#&gt;  8                  10              Barrie, J. M. (James Matthew)
#&gt;  9                  12                         Smith, Joseph, Jr.
#&gt; 10                  14                             Madison, James
#&gt; # ... with 16,226 more rows, and 5 more variables: alias &lt;chr&gt;,
#&gt; #   birthdate &lt;int&gt;, deathdate &lt;int&gt;, wikipedia &lt;chr&gt;, aliases &lt;chr&gt;
</code></pre>

<h3 id="analysis">Analysis</h3>

<p>What&rsquo;s next after retrieving a book&rsquo;s text? Well, having the book as a data frame is especially useful for working with the <a href="https://github.com/juliasilge/tidytext">tidytext</a> package for text analysis.</p>

<pre><code class="language-r">library(tidytext)

words &lt;- books %&gt;%
  unnest_tokens(word, text)

words
#&gt; # A tibble: 305,532 x 3
#&gt;    gutenberg_id             title      word
#&gt;           &lt;int&gt;             &lt;chr&gt;     &lt;chr&gt;
#&gt;  1          768 Wuthering Heights wuthering
#&gt;  2          768 Wuthering Heights   heights
#&gt;  3          768 Wuthering Heights   chapter
#&gt;  4          768 Wuthering Heights         i
#&gt;  5          768 Wuthering Heights      1801
#&gt;  6          768 Wuthering Heights         i
#&gt;  7          768 Wuthering Heights      have
#&gt;  8          768 Wuthering Heights      just
#&gt;  9          768 Wuthering Heights  returned
#&gt; 10          768 Wuthering Heights      from
#&gt; # ... with 305,522 more rows

word_counts &lt;- words %&gt;%
  anti_join(stop_words, by = &quot;word&quot;) %&gt;%
  count(title, word, sort = TRUE)

word_counts
#&gt; # A tibble: 21,201 x 3
#&gt;                          title       word     n
#&gt;                          &lt;chr&gt;      &lt;chr&gt; &lt;int&gt;
#&gt;  1           Wuthering Heights heathcliff   421
#&gt;  2           Wuthering Heights     linton   346
#&gt;  3 Jane Eyre: An Autobiography       jane   342
#&gt;  4           Wuthering Heights  catherine   336
#&gt;  5 Jane Eyre: An Autobiography  rochester   317
#&gt;  6 Jane Eyre: An Autobiography        sir   315
#&gt;  7 Jane Eyre: An Autobiography       miss   310
#&gt;  8 Jane Eyre: An Autobiography       time   244
#&gt;  9 Jane Eyre: An Autobiography        day   232
#&gt; 10 Jane Eyre: An Autobiography     looked   221
#&gt; # ... with 21,191 more rows
</code></pre>

<h3 id="citing">Citing</h3>

<blockquote>
<p>David Robinson (2017). gutenbergr: Download and Process Public Domain Works
  from Project Gutenberg. R package version 0.1.3.
  <a href="https://cran.rstudio.com/package=gutenbergr">https://cran.rstudio.com/package=gutenbergr</a></p>
</blockquote>

<h3 id="license-and-bugs">License and bugs</h3>

<ul>
<li>License: <a href="https://opensource.org/licenses/GPL-2.0">GPL-2</a></li>
<li>Report bugs at <a href="https://github.com/ropenscilabs/gutenbergr/issues?state=open">our GitHub repo for gutenbergr</a></li>
</ul>

<p><a href="#top">Back to top</a></p>

                    </article>
                </div>

                </div>
            </div>
        </div>
    </article>


    <div id="footer">
        <div class="container">
            <div class="row start">
                <div class="col-1 col-1-3 top-8">
                    <img src="/img/icon_short_white.svg" />
                </div>

                <div class="col-9 col-offset-2 top-10 bottom-8">
                    <div class="row between">
                        <div class="col-2 col-1-3">
                            <a href="http://github.com/ropensci" target="_blank"><div class="icon icon-github"></div></a>
                            <a href="http://twitter.com/ropensci" target="_blank"><div class="icon icon-twitter"></div></a>
                            <a href="http://vimeo.com/ropensci" target="_blank"><div class="icon icon-vimeo"></div></a>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Info</h5>
                                <li><a href="/about">Mission</a></li>
                                <li><a href="/about#team">Team</a></li>
                                <li><a href="/about#collaborators">Collaborators</a></li>
                                <li><a href="/careers">Careers</a></li>

                            </ul>
                        </div>

                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Work</h5>
                                <li><a href="/packages/">Packages</a></li>
                                <li><a href="/blog/">Blog</a></li>
                                <li><a href="/technotes/">Tech Notes</a></li>
                                <li><a href="/tutorials/">Tutorials</a></li>
                                <li><a href="/usecases/">Use Cases</a></li>
                                <li><a href="/resources/">More Resources</a></li>
                            </ul>
                        </div>
                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Participate</h5>
                                <li><a href="/contact.html">Contact us</a></li>
                                <li><a href="/community/">Community</a></li>
                                <li><a href="http://onboarding.ropensci.org/">Contribute software</a></li>
                                <li><a href="http://unconf17.ropensci.org/">Unconference</a></li>
                                <li><a href="/coc">Code of conduct</a></li>
                                <li><a href="/donate/">Donate</a></li>
                            </ul>
                        </div>
                        <div class="col-4 top-8 bottom-8">
                            <h5 class="bottom-2"></h5>

                            <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" target="_blank">NumFOCUS</a></p>
                            <a href="http://numfocus.org" target="_blank"><img src="img/numfocus.png"></a>
                            <br>

                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12 top-8 bottom-9 divider">
                    <p class="top-9">Except where otherwise noted, content on this site is licensed under the <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank">CC-BY license</a>.
                    </p>
                </div>
            </div>
        </div>
    </div>




    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    

    
    <script type="text/javascript" src="/js/highlight.pack.js"></script>
    <script type="text/javascript">
        hljs.initHighlightingOnLoad();
    </script>



</body>
</html>
