<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>rOpenSci | rdataretriever tutorial</title>

     
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>

    <script type="text/javascript">
    hljs.configure({languages: []});
    hljs.initHighlightingOnLoad();
    </script>
    <link rel="stylesheet" type="text/css" href="/css/style-new.css" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#4b8add">
<meta name="theme-color" content="#4b8add">


    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

    
    <div id="header">
        <div class="container">
            <div class="row center-m">
                
                <div class="col-1">
                    <a href="/index.html"><img src="/img/icon_lettering_white.svg" /></a>
                </div>
                
                
                <nav class="col-6 col-offset-4 top-3">
                    <ul class="row between">
						<li><a href="/about/">About</a></li>
                        <li><a href="/blog/">Blog</a></li>
                        <li><a href="/packages/">Packages</a></li>
                        <li><a href="/community/">Community</a></li>
                        <li><a href="http://discuss.ropensci.org/" target="_blank">Discuss</a></li>

                    </ul>
                </nav>
                
            </div>
        </div>
    </div>



    <article>
        <div class="container top-20">
            
            <div class="row centered">
                
                <div class="col-7 bottom-20 maintext">
                    <h1>rdataretriever tutorial</h1>
                    <br>
                    <h4><small style="color:grey">for v1.0.0</small></h4>
                    <br>

                    <article>
                    

<p><section id="installation"></p>

<h2 id="installation">Installation</h2>

<h3 id="install-dataretriever-software">Install DataRetriever software</h3>

<p>To use the R package <code>rdataretriever</code> you first need to install <code>Retriever</code>. For installation instructions go to <a href="http://www.data-retriever.org/#install">http://www.data-retriever.org/#install</a>; you can install with <code>pip</code>, and there&rsquo;s installers available for all major operating systems, or it can be installed from source.</p>

<p><a href="https://github.com/weecology/retriever">Source code</a>.</p>

<h3 id="install-r-package">Install R package</h3>

<p>Install and load <code>rdataretriever</code> into the R session. Stable version from CRAN</p>

<pre><code class="language-r">install.packages(&quot;rdataretriever&quot;)
</code></pre>

<p>Or development version from Github:</p>

<pre><code class="language-r">install.packages(&quot;devtools&quot;)
devtools::install_github(&quot;ropensci/rdataretriever&quot;)
</code></pre>

<pre><code class="language-r">library('rdataretriever')
</code></pre>

<p><section id="usage"></p>

<h2 id="usage">Usage</h2>

<h3 id="list-the-datasets-available-via-the-retriever">List the datasets available via the Retriever</h3>

<pre><code class="language-r">rdataretriever::datasets()
#&gt;  [1] &quot;Available datasets : 47&quot; &quot;&quot;
#&gt;  [3] &quot;Adler2007&quot;               &quot;AmnioteDB&quot;
#&gt;  [5] &quot;Anderson2011&quot;            &quot;ArcticBreedBird&quot;
#&gt;  [7] &quot;AvianBodySize&quot;           &quot;BAAD&quot;
#&gt;  [9] &quot;BBS&quot;                     &quot;BBS50&quot;
#&gt; [11] &quot;Bioclim&quot;                 &quot;CForBioData&quot;
#&gt; [13] &quot;Clark2006&quot;               &quot;DelMoral2010&quot;
#&gt; [15] &quot;eBirdOD&quot;                 &quot;EltonTraits&quot;
#&gt; [17] &quot;FIA&quot;                     &quot;FishParasiteHosts&quot;
#&gt; [19] &quot;FrayJorge&quot;               &quot;Gentry&quot;
#&gt; [21] &quot;GWDD&quot;                    &quot;HomeRanges&quot;
#&gt; [23] &quot;leaf_herbivory&quot;          &quot;leda&quot;
#&gt; [25] &quot;MammalDIET&quot;              &quot;MammalLH&quot;
#&gt; [27] &quot;MammalMR2010&quot;            &quot;mammsupertree&quot;
#&gt; [29] &quot;MarineSize&quot;              &quot;Matter2014&quot;
#&gt; [31] &quot;MCDB&quot;                    &quot;McGlinn2010&quot;
#&gt; [33] &quot;MiscAbundanceDB&quot;         &quot;MoM2003&quot;
#&gt; [35] &quot;NPN&quot;                     &quot;Palmer2007&quot;
#&gt; [37] &quot;Pantheria&quot;               &quot;Petraitis2008&quot;
#&gt; [39] &quot;PhytoplankonBiovolume&quot;   &quot;PlantTaxonomy&quot;
#&gt; [41] &quot;PortalMammals&quot;           &quot;PRISM&quot;
#&gt; [43] &quot;Ramesh2010&quot;              &quot;SonoranPerennials&quot;
#&gt; [45] &quot;Steppe_plants_2013&quot;      &quot;TreeWesternGhats&quot;
#&gt; [47] &quot;vertnet&quot;                 &quot;Woods2009&quot;
#&gt; [49] &quot;Zachmann2010&quot;
</code></pre>

<h3 id="install-into-csv">Install into csv</h3>

<p>Install the Gentry dataset into csv files in your working directory</p>

<pre><code class="language-r">rdataretriever::install(dataset = 'AvianBodySize', connection = 'csv')
head(read.csv(&quot;AvianBodySize_species.csv&quot;)[,c(1:10)])
#&gt;   family species_number             species_name        english_name
#&gt; 1      1              1         Struthio camelus             Ostrich
#&gt; 2      3              7 Dromaius novaehollandiae                 Emu
#&gt; 3      4              8        Apteryx australis          Brown Kiwi
#&gt; 4      4              9           Apteryx owenii Little Spotted Kiwi
#&gt; 5      4             10          Apteryx haastii  Great Spotted Kiwi
#&gt; 6      5             14            Tinamus major       Great Tinamou
#&gt;   subspecies m_mass m_mass_n f_mass f_mass_n unsexed_mass
#&gt; 1            115000       NA 100000       NA           NA
#&gt; 2             32700       NA  38300       NA           NA
#&gt; 3              2208       11   2535       26           NA
#&gt; 4              1135       51   1351       41           NA
#&gt; 5              2610       12   3270        7           NA
#&gt; 6              1059       NA    991       NA         1059
</code></pre>

<h3 id="read-into-r">Read into R</h3>

<p>Install and load a dataset as a list</p>

<pre><code class="language-r">Gentry &lt;- rdataretriever::fetch('Gentry')
</code></pre>

<pre><code class="language-r">head(Gentry$sites)
#&gt;   site_id                                site_name country
#&gt; 1       1                                Kitlope 1  Canada
#&gt; 2       2                                Kitlope 2  Canada
#&gt; 3       3                          Mt. St. Hilaire  Canada
#&gt; 4       4           Metthieson Hammock County Park   U.S.A
#&gt; 5       5                      San Felasko Hammock   U.S.A
#&gt; 6       6 University of Florida Horticulture Woods   U.S.A
#&gt;     state_province     continent abbreviation   lat     lon min_elev
#&gt; 1 British Columbia North America     KITLOPE1 53.07 -127.83       20
#&gt; 2 British Columbia North America     KITLOPE2 52.21 -127.79       10
#&gt; 3         Montreal North America     MTSTHILA 45.62  -73.58       NA
#&gt; 4          Florida North America     MATTHIES 25.72  -80.27       15
#&gt; 5          Florida North America     SANFELAS 29.68  -82.43       30
#&gt; 6          Florida North America     UFHORTIC 29.67  -82.33       50
#&gt;   max_elev precip
#&gt; 1       20   2100
#&gt; 2       10   2100
#&gt; 3       NA    750
#&gt; 4       15   1375
#&gt; 5       30   1375
#&gt; 6       50   1375
</code></pre>

<h3 id="write-data-into-a-database">Write data into a database</h3>

<p>Install a dataset into a SQLite database</p>

<pre><code class="language-r">rdataretriever::install(dataset = 'Gentry', connection = 'sqlite', db_file = &quot;gentrysqlite.sqlite3&quot;)
rdataretriever::install(dataset = 'MCDB', connection = 'sqlite', db_file = &quot;mcdbsqlite.sqlite3&quot;)
</code></pre>

<p>Load <code>RSQLite</code> and connect to the database</p>

<pre><code class="language-r">library(&quot;RSQLite&quot;)
db &lt;- dbConnect(SQLite(), &quot;mcdbsqlite.sqlite3&quot;)
</code></pre>

<p>List tables in the database</p>

<pre><code class="language-r">dbListTables(db)
#&gt; [1] &quot;MCDB_communities&quot; &quot;MCDB_references&quot;  &quot;MCDB_sites&quot;
#&gt; [4] &quot;MCDB_species&quot;     &quot;MCDB_trapping&quot;
</code></pre>

<p>List fields in the table</p>

<pre><code class="language-r">dbListFields(db, &quot;MCDB_species&quot;)
#&gt; [1] &quot;species_id&quot;    &quot;family&quot;        &quot;genus&quot;         &quot;species&quot;
#&gt; [5] &quot;species_level&quot;
</code></pre>

<p>Query and get data</p>

<pre><code class="language-r">dbGetQuery(db, &quot;SELECT * FROM MCDB_species LIMIT 10&quot;)
#&gt;    species_id      family     genus       species species_level
#&gt; 1        ABBE Abrocomidae  Abrocoma     bennettii             1
#&gt; 2        ABLO  Cricetidae Abrothrix    longipilis             1
#&gt; 3        ABOL  Cricetidae Abrothrix     olivaceus             1
#&gt; 4        ACSP     Muridae    Acomys spinosissimus             1
#&gt; 5        ACWI     Muridae    Acomys       wilsoni             1
#&gt; 6        ACPY Acrobatidae Acrobates      pygmaeus             1
#&gt; 7        AECH     Muridae  Aethomys  chrysophilus             1
#&gt; 8        AEHI     Muridae  Aethomys        hindei             1
#&gt; 9        AKAZ  Cricetidae    Akodon        azarae             1
#&gt; 10       AKCU  Cricetidae    Akodon        cursor             1
</code></pre>

<p><section id="citing"></p>

<h2 id="citing">Citing</h2>

<p>To cite <code>rdataretriever</code> in publications use:</p>

<p>Software:</p>

<blockquote>
<p>Daniel McGlinn, Henry Senyondo, Shawn Taylor and Ethan White (2017). rdataretriever: R Interface to the Data Retriever. R package version 1.0.0. <a href="https://github.com/ropensci/rdataretriever/">https://github.com/ropensci/rdataretriever/</a></p>
</blockquote>

<p>Publication:</p>

<blockquote>
<p>Morris, Benjamin D., and Ethan P. White. (2013). The EcoData Retriever: Improving Access to Existing Ecological Data. PLoS ONE 8 (6) (jun): 65848. doi:10.1371/journal.pone.0065848.</p>
</blockquote>

<p><section id="license_bugs"></p>

<h2 id="license-and-bugs">License and bugs</h2>

<ul>
<li>License: <a href="http://opensource.org/licenses/MIT">MIT</a></li>
<li>Report bugs at <a href="https://github.com/ropensci/rdataretriever/issues?state=open">our Github repo for rdataretriever</a></li>
</ul>

<p><a href="#top">Back to top</a></p>

                    </article>
                </div>

                </div>
            </div>
        </div>
    </article>


    <div id="footer">
        <div class="container">
            <div class="row start">
                <div class="col-1 col-1-3 top-8">
                    <img src="/img/icon_short_white.svg" />
                </div>

                <div class="col-9 col-offset-2 top-10 bottom-8">
                    <div class="row between">
                        <div class="col-2 col-1-3">
                            <a href="http://github.com/ropensci" target="_blank"><div class="icon icon-github"></div></a>
                            <a href="http://twitter.com/ropensci" target="_blank"><div class="icon icon-twitter"></div></a>
                            <a href="http://vimeo.com/ropensci" target="_blank"><div class="icon icon-vimeo"></div></a>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Info</h5>
                                <li><a href="/about">Mission</a></li>
                                <li><a href="/about#team">Team</a></li>
                                <li><a href="/about#collaborators">Collaborators</a></li>
                                <li><a href="/careers">Careers</a></li>

                            </ul>
                        </div>

                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Work</h5>
                                <li><a href="/packages/">Packages</a></li>
                                <li><a href="/blog/">Blog</a></li>
                                <li><a href="/technotes/">Tech Notes</a></li>
                                <li><a href="/tutorials/">Tutorials</a></li>
                                <li><a href="/usecases/">Use Cases</a></li>
                                <li><a href="/resources/">More Resources</a></li>
                            </ul>
                        </div>
                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Participate</h5>
                                <li><a href="/contact.html">Contact us</a></li>
                                <li><a href="/community/">Community</a></li>
                                <li><a href="http://onboarding.ropensci.org/">Contribute software</a></li>
                                <li><a href="http://unconf17.ropensci.org/">Unconference</a></li>
                                <li><a href="/coc">Code of conduct</a></li>
                                <li><a href="/donate/">Donate</a></li>
                            </ul>
                        </div>
                        <div class="col-4 top-8 bottom-8">
                            <h5 class="bottom-2"></h5>

                            <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" target="_blank">NumFOCUS</a></p>
                            <a href="http://numfocus.org" target="_blank"><img src="img/numfocus.png"></a>
                            <br>

                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12 top-8 bottom-9 divider">
                    <p class="top-9">Except where otherwise noted, content on this site is licensed under the <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank">CC-BY license</a>.
                    </p>
                </div>
            </div>
        </div>
    </div>




    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    

    
    <script type="text/javascript" src="/js/highlight.pack.js"></script>
    <script type="text/javascript">
        hljs.initHighlightingOnLoad();
    </script>



</body>
</html>
