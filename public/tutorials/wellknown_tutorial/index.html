<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>rOpenSci | wellknown tutorial</title>

     
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>

    <script type="text/javascript">
    hljs.configure({languages: []});
    hljs.initHighlightingOnLoad();
    </script>
    <link rel="stylesheet" type="text/css" href="/css/style-new.css" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#4b8add">
<meta name="theme-color" content="#4b8add">


    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

    
    <div id="header">
        <div class="container">
            <div class="row center-m">
                
                <div class="col-1">
                    <a href="/index.html"><img src="/img/icon_lettering_white.svg" /></a>
                </div>
                
                
                <nav class="col-6 col-offset-4 top-3">
                    <ul class="row between">
						<li><a href="/about/">About</a></li>
                        <li><a href="/blog/">Blog</a></li>
                        <li><a href="/packages/">Packages</a></li>
                        <li><a href="/community/">Community</a></li>
                        <li><a href="http://discuss.ropensci.org/" target="_blank">Discuss</a></li>

                    </ul>
                </nav>
                
            </div>
        </div>
    </div>



    <article>
        <div class="container top-20">
            
            <div class="row centered">
                
                <div class="col-7 bottom-20 maintext">
                    <h1>wellknown tutorial</h1>
                    <br>
                    <h4><small style="color:grey">for v0.1.0</small></h4>
                    <br>

                    <article>
                    

<p><code>wellknown</code> is an R client to convert WKT to GeoJSON, and GeoJSON to WKT. <a href="http://en.wikipedia.org/wiki/Well-known_text">Well-known text</a> is perhaps not as widely known as GeoJSON, but is widely used when storing geosptial data in SQL databases. <a href="http://en.wikipedia.org/wiki/Well-known_text#RDBMS_Engines_that_provide_support for WKT">Many RDBMS engines provide support</a>. There is a binary equivalent, Well-known binary, that will hopefully come later in this package. WKT has similar spatial objects as GeoJSON, but the format is pretty different.</p>

<p>You can find the WKT specification in a PDF at <a href="https://portal.opengeospatial.org/files/?artifact_id=25355">https://portal.opengeospatial.org/files/?artifact_id=25355</a>.</p>

<h4 id="wkt-from-r-stuctures">WKT from R stuctures</h4>

<p>There&rsquo;s a family of functions in <code>wellknown</code> that make it easy to go from familiar R objects like lists and data.frames to WKT, including:</p>

<ul>
<li><code>point()</code> - make a point, e.g., <code>POINT (-116 45)</code></li>
<li><code>multipoint()</code> - make a multipoint, e.g., <code>MULTIPOINT ((100 3), (101 2))</code></li>
<li><code>linestring()</code> - make a linestring, e.g., <code>LINESTRING (100 0, 101 1)</code></li>
<li><code>polygon()</code> - make a polygon, e.g., <code>POLYGON ((100 0), (101 0), (101 1), (100 0))</code></li>
<li><code>multipolygon()</code> - make a multipolygon, e.g., <code>MULTIPOLYGON (((30 20, 45 40, 10 40, 30 20)), ((15 5, 40 10, 10 20, 5 10, 15 5)))</code></li>
</ul>

<p>The above currently accept (depending on the fxn) <code>numeric</code>, <code>list</code>, and <code>data.frame</code> (and <code>character</code> for special case of <code>EMPTY</code> WKT objects).</p>

<h4 id="geojson-to-wkt-and-vice-versa">Geojson to WKT and vice versa</h4>

<p><code>geojson2wkt()</code> and <code>wkt2geojson()</code> cover a subset of the various formats available:</p>

<ul>
<li><code>Point</code></li>
<li><code>MultiPoint</code></li>
<li><code>Polygon</code></li>
<li><code>MultiPolygon</code></li>
<li><code>LineString</code></li>
<li><code>MultilineString</code></li>
<li><code>Geometrycollection</code></li>
</ul>

<p><strong>Geojson to WKT</strong></p>

<p><code>geojson2wkt()</code> converts any geojson as a list to a WKT string (the same format )</p>

<p><strong>WKT to Geojson</strong></p>

<p><code>wkt2geojson()</code> converts any WKT string into geojson as a list. This list format for geojson can be used downstream e.g., in the <code>leaflet</code> package.</p>

<h3 id="installation">Installation</h3>

<p>Stable version from CRAN</p>

<pre><code class="language-r">install.packages(&quot;wellknown&quot;)
</code></pre>

<p>Development version from GitHub</p>

<pre><code class="language-r">devtools::install_github(&quot;ropensci/wellknown&quot;)
</code></pre>

<pre><code class="language-r">library(&quot;wellknown&quot;)
</code></pre>

<h2 id="usage">Usage</h2>

<h3 id="geojson-to-wkt">GeoJSON to WKT</h3>

<p>Point</p>

<pre><code class="language-r">point &lt;- list('type' = 'Point', 'coordinates' = c(116.4, 45.2, 11.1))
geojson2wkt(point)
#&gt; [1] &quot;POINT (116.4000000000000057  45.2000000000000028  11.0999999999999996)&quot;
</code></pre>

<p>Multipoint</p>

<pre><code class="language-r">mp &lt;- list(type = 'MultiPoint',
           coordinates = list( c(100.0, 3.101), c(101.0, 2.1), c(3.14, 2.18)
))
geojson2wkt(mp)
#&gt; [1] &quot;MULTIPOINT ((100.0000000000000000 3.1010000000000000), (101.0000000000000000 2.1000000000000001), (3.1400000000000001 2.1800000000000002))&quot;
</code></pre>

<p>LineString</p>

<pre><code class="language-r">st &lt;- list(type = 'LineString',
            coordinates = list(c(0.0, 0.0, 10.0), c(2.0, 1.0, 20.0),
                              c(4.0, 2.0, 30.0), c(5.0, 4.0, 40.0)))
geojson2wkt(st, fmt = 0)
#&gt; [1] &quot;LINESTRING (0 0 10, 2 1 20, 4 2 30, 5 4 40)&quot;
</code></pre>

<p>Multilinestring</p>

<pre><code class="language-r">multist &lt;- list(type = 'MultiLineString',
      coordinates = list(
        list(c(0.0, -1.0), c(-2.0, -3.0), c(-4.0, -5.0)),
        list(c(1.66, -31023.5), c(10000.9999, 3.0), c(100.9, 1.1), c(0.0, 0.0))
      ))
geojson2wkt(multist)
#&gt; [1] &quot;MULTILINESTRING ((0.0000000000000000 -1.0000000000000000, -2.0000000000000000 -3.0000000000000000, -4.0000000000000000 -5.0000000000000000), (1.6599999999999999 -31023.5000000000000000, 10000.9999000000007072 3.0000000000000000, 100.9000000000000057 1.1000000000000001, 0.0000000000000000 0.0000000000000000))&quot;
</code></pre>

<p>Polygon</p>

<pre><code class="language-r">poly &lt;- list(type = 'Polygon',
      coordinates = list(
        list(c(100.001, 0.001), c(101.12345, 0.001), c(101.001, 1.001), c(100.001, 0.001)),
        list(c(100.201, 0.201), c(100.801, 0.201), c(100.801, 0.801), c(100.201, 0.201))
))
geojson2wkt(poly)
#&gt; [1] &quot;POLYGON ((100.0010000000000048 0.0010000000000000, 101.1234500000000054 0.0010000000000000, 101.0010000000000048 1.0009999999999999, 100.0010000000000048 0.0010000000000000), (100.2009999999999934 0.2010000000000000, 100.8010000000000019 0.2010000000000000, 100.8010000000000019 0.8010000000000000, 100.2009999999999934 0.2010000000000000))&quot;
</code></pre>

<p>Multipolygon</p>

<pre><code class="language-r">mpoly &lt;-
  list(type = &quot;MultiPolygon&quot;,
    coordinates = list(list(list(c(30, 20), c(45, 40), c(10, 40), c(30, 20))),
        list(list(c(15, 5), c(40, 10), c(10, 20), c(5 ,10), c(15, 5))))
  )
geojson2wkt(mpoly, fmt = 1)
#&gt; [1] &quot;MULTIPOLYGON (((30.0 20.0, 45.0 40.0, 10.0 40.0, 30.0 20.0)), ((15.0 5.0, 40.0 10.0, 10.0 20.0, 5.0 10.0, 15.0 5.0)))&quot;
</code></pre>

<p>GeometryCollection</p>

<pre><code class="language-r">gmcoll &lt;- list(type = 'GeometryCollection',
   geometries = list(
     list(type = &quot;Point&quot;, coordinates = list(0.0, 1.0)),
     list(type = 'LineString', coordinates = list(c(-100.0, 0.0), c(-101.0, -1.0))),
     list(type = 'MultiPoint',
          'coordinates' = list(c(100.0, 3.101), c(101.0, 2.1), c(3.14, 2.18)))
  )
)
geojson2wkt(gmcoll, fmt = 0)
#&gt; [1] &quot;GEOMETRYCOLLECTION (POINT (0 1), LINESTRING (-100 0, -101 -1), MULTIPOINT ((100.000 3.101), (101.0 2.1), (3.14 2.18)))&quot;
</code></pre>

<p>Convert json or character objects</p>

<p>You can convert directly from an object of class <code>json</code>, which is output from <code>jsonlite::toJSON()</code>.</p>

<pre><code class="language-r">library(&quot;jsonlite&quot;)
(json &lt;- toJSON(list(type = &quot;Point&quot;, coordinates = c(-105, 39))))
#&gt; {&quot;type&quot;:[&quot;Point&quot;],&quot;coordinates&quot;:[-105,39]}
</code></pre>

<pre><code class="language-r">geojson2wkt(json)
#&gt; [1] &quot;POINT (-105 39)&quot;
</code></pre>

<p>And you can convert from a geojson character string:</p>

<pre><code class="language-r">str &lt;- '{&quot;type&quot;:[&quot;LineString&quot;],&quot;coordinates&quot;:[[0,0,10],[2,1,20],[4,2,30],[5,4,40]]}'
geojson2wkt(str)
#&gt; [1] &quot;LINESTRING (0 0 10, 2 1 20, 4 2 30, 5 4 40)&quot;
</code></pre>

<h3 id="wkt-to-geojson">WKT to GeoJSON</h3>

<p>Point</p>

<p>As a <code>Feature</code></p>

<pre><code class="language-r">str &lt;- &quot;POINT (-116.4000000000000057 45.2000000000000028)&quot;
wkt2geojson(str)
#&gt; $type
#&gt; [1] &quot;Feature&quot;
#&gt; 
#&gt; $geometry
#&gt; $geometry$type
#&gt; [1] &quot;Point&quot;
#&gt; 
#&gt; $geometry$coordinates
#&gt; [1] -116.4   45.2
#&gt; 
...
</code></pre>

<p>Not <code>Feature</code></p>

<pre><code class="language-r">wkt2geojson(str, feature = FALSE)
#&gt; $type
#&gt; [1] &quot;Point&quot;
#&gt; 
#&gt; $coordinates
#&gt; [1] -116.4   45.2
#&gt; 
#&gt; attr(,&quot;class&quot;)
#&gt; [1] &quot;geojson&quot;
</code></pre>

<p>Multipoint</p>

<pre><code class="language-r">str &lt;- 'MULTIPOINT ((100.000 3.101), (101.000 2.100), (3.140 2.180))'
wkt2geojson(str, feature = FALSE)
#&gt; $type
#&gt; [1] &quot;MultiPoint&quot;
#&gt; 
#&gt; $coordinates
#&gt; $coordinates[[1]]
#&gt; [1] 100.000   3.101
#&gt; 
#&gt; $coordinates[[2]]
#&gt; [1] 101.0   2.1
#&gt; 
...
</code></pre>

<p>Polygon</p>

<pre><code class="language-r">str &lt;- &quot;POLYGON ((100 0.1, 101.1 0.3, 101 0.5, 100 0.1), (103.2 0.2, 104.8 0.2, 100.8 0.8, 103.2 0.2))&quot;
wkt2geojson(str, feature = FALSE)
#&gt; $type
#&gt; [1] &quot;Polygon&quot;
#&gt; 
#&gt; $coordinates
#&gt; $coordinates[[1]]
#&gt; $coordinates[[1]][[1]]
#&gt; [1] 100.0   0.1
#&gt; 
#&gt; $coordinates[[1]][[2]]
#&gt; [1] 101.1   0.3
...
</code></pre>

<p>MultiPolygon</p>

<pre><code class="language-r">str &lt;- &quot;MULTIPOLYGON (((40 40, 20 45, 45 30, 40 40)),
    ((20 35, 45 20, 30 5, 10 10, 10 30, 20 35), (30 20, 20 25, 20 15, 30 20)))&quot;
wkt2geojson(str, feature = FALSE)
#&gt; $type
#&gt; [1] &quot;MultiPolygon&quot;
#&gt; 
#&gt; $coordinates
#&gt; $coordinates[[1]]
#&gt; $coordinates[[1]][[1]]
#&gt; $coordinates[[1]][[1]][[1]]
#&gt; [1] 40 40
#&gt; 
#&gt; $coordinates[[1]][[1]][[2]]
...
</code></pre>

<p>Linestring</p>

<pre><code class="language-r">wkt2geojson(&quot;LINESTRING (0 -1, -2 -3, -4 5)&quot;, feature = FALSE)
#&gt; $type
#&gt; [1] &quot;LineString&quot;
#&gt; 
#&gt; $coordinates
#&gt; $coordinates[[1]]
#&gt; [1]  0 -1
#&gt; 
#&gt; $coordinates[[2]]
#&gt; [1] -2 -3
#&gt; 
...
</code></pre>

<h3 id="lint-wkt">lint WKT</h3>

<p>The <code>lint()</code> function uses native R to check for correct stucture of WKT strings. That is, it works, but may be slow-ish for very large strings.</p>

<pre><code class="language-r">lint(&quot;POINT (1 2)&quot;)
#&gt; [1] TRUE
lint(&quot;LINESTRING EMPTY&quot;)
#&gt; [1] TRUE
lint(&quot;MULTIPOINT ((1 2), (3 4), (-10 100))&quot;)
#&gt; [1] TRUE
lint(&quot;POLYGON((20.3 28.6, 20.3 19.6, 8.5 19.6, 8.5 28.6, 20.3 28.6))&quot;)
#&gt; [1] TRUE
lint(&quot;MULTIPOLYGON (((30 20, 45 40, 10 40, 30 20)), ((15 5, 40 10, 10 20, 5 10, 15 5)))&quot;)
#&gt; [1] TRUE
lint(&quot;POINT (1 2 3 4 5)&quot;)
#&gt; [1] FALSE
lint(&quot;LINESTRING (100)&quot;)
#&gt; [1] FALSE
lint(&quot;MULTIPOLYGON (((30 20, 45 40, 10 40, 30 20)), ((15 5, a b, 10 20, 5 10, 15 5)))&quot;)
#&gt; [1] FALSE
</code></pre>

<h3 id="citing">Citing</h3>

<p>To cite <code>wellknown</code> in publications use:</p>

<blockquote>
<p>Scott Chamberlain (2015). wellknown: Convert Between &lsquo;WKT&rsquo; to &lsquo;GeoJSON&rsquo;. R package
  version 0.1.0. <a href="https://github.com/ropensci/wellknown">https://github.com/ropensci/wellknown</a></p>
</blockquote>

<h3 id="license-and-bugs">License and bugs</h3>

<ul>
<li>License: <a href="http://opensource.org/licenses/MIT">MIT</a></li>
<li>Report bugs at <a href="https://github.com/ropensci/wellknown/issues?state=open">our Github repo for wellknown</a></li>
</ul>

<p><a href="#top">Back to top</a></p>

                    </article>
                </div>

                </div>
            </div>
        </div>
    </article>


    <div id="footer">
        <div class="container">
            <div class="row start">
                <div class="col-1 col-1-3 top-8">
                    <img src="/img/icon_short_white.svg" />
                </div>

                <div class="col-9 col-offset-2 top-10 bottom-8">
                    <div class="row between">
                        <div class="col-2 col-1-3">
                            <a href="http://github.com/ropensci" target="_blank"><div class="icon icon-github"></div></a>
                            <a href="http://twitter.com/ropensci" target="_blank"><div class="icon icon-twitter"></div></a>
                            <a href="http://vimeo.com/ropensci" target="_blank"><div class="icon icon-vimeo"></div></a>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Info</h5>
                                <li><a href="/about">Mission</a></li>
                                <li><a href="/about#team">Team</a></li>
                                <li><a href="/about#collaborators">Collaborators</a></li>
                                <li><a href="/careers">Careers</a></li>

                            </ul>
                        </div>

                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Work</h5>
                                <li><a href="/packages/">Packages</a></li>
                                <li><a href="/blog/">Blog</a></li>
                                <li><a href="/technotes/">Tech Notes</a></li>
                                <li><a href="/tutorials/">Tutorials</a></li>
                                <li><a href="/usecases/">Use Cases</a></li>
                                <li><a href="/resources/">More Resources</a></li>
                            </ul>
                        </div>
                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Participate</h5>
                                <li><a href="/contact.html">Contact us</a></li>
                                <li><a href="/community/">Community</a></li>
                                <li><a href="http://onboarding.ropensci.org/">Contribute software</a></li>
                                <li><a href="http://unconf17.ropensci.org/">Unconference</a></li>
                                <li><a href="/coc">Code of conduct</a></li>
                                <li><a href="/donate/">Donate</a></li>
                            </ul>
                        </div>
                        <div class="col-4 top-8 bottom-8">
                            <h5 class="bottom-2"></h5>

                            <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" target="_blank">NumFOCUS</a></p>
                            <a href="http://numfocus.org" target="_blank"><img src="img/numfocus.png"></a>
                            <br>

                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12 top-8 bottom-9 divider">
                    <p class="top-9">Except where otherwise noted, content on this site is licensed under the <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank">CC-BY license</a>.
                    </p>
                </div>
            </div>
        </div>
    </div>




    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    

    
    <script type="text/javascript" src="/js/highlight.pack.js"></script>
    <script type="text/javascript">
        hljs.initHighlightingOnLoad();
    </script>



</body>
</html>
