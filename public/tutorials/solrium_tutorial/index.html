<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>rOpenSci | solrium tutorial</title>

     
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>

    <script type="text/javascript">
    hljs.configure({languages: []});
    hljs.initHighlightingOnLoad();
    </script>
    <link rel="stylesheet" type="text/css" href="/css/style-new.css" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#4b8add">
<meta name="theme-color" content="#4b8add">


    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

    
    <div id="header">
        <div class="container">
            <div class="row center-m">
                
                <div class="col-1">
                    <a href="/index.html"><img src="/img/icon_lettering_white.svg" /></a>
                </div>
                
                
                <nav class="col-6 col-offset-4 top-3">
                    <ul class="row between">
						<li><a href="/about/">About</a></li>
                        <li><a href="/blog/">Blog</a></li>
                        <li><a href="/packages/">Packages</a></li>
                        <li><a href="/community/">Community</a></li>
                        <li><a href="http://discuss.ropensci.org/" target="_blank">Discuss</a></li>

                    </ul>
                </nav>
                
            </div>
        </div>
    </div>



    <article>
        <div class="container top-20">
            
            <div class="row centered">
                
                <div class="col-7 bottom-20 maintext">
                    <h1>solrium tutorial</h1>
                    <br>
                    <h4><small style="color:grey">for v0.3.0</small></h4>
                    <br>

                    <article>
                    

<p><code>solrium</code> is a general purpose R interface to <a href="http://lucene.apache.org/solr/">Apache Solr</a></p>

<p><section id="installation"></p>

<h2 id="installation">Installation</h2>

<p>Stable version from CRAN</p>

<pre><code class="language-r">install.packages(&quot;solrium&quot;)
</code></pre>

<p>Or the development version from GitHub</p>

<pre><code class="language-r">install.packages(&quot;devtools&quot;)
devtools::install_github(&quot;ropensci/solrium&quot;)
</code></pre>

<p>Load</p>

<pre><code class="language-r">library(&quot;solrium&quot;)
</code></pre>

<p><section id="usage"></p>

<h2 id="usage">Usage</h2>

<h3 id="solr-search">Solr search</h3>

<h4 id="setup-connection">Setup connection</h4>

<p>You can setup for a remote Solr instance or on your local machine.</p>

<pre><code class="language-r">solr_connect('http://api.plos.org/search')
</code></pre>

<pre><code>#&gt; &lt;solr_connection&gt;
#&gt;   url:    http://api.plos.org/search
#&gt;   errors: simple
#&gt;   verbose: TRUE
#&gt;   proxy:
</code></pre>

<h4 id="rundown">Rundown</h4>

<p><code>solr_search()</code> only returns the <code>docs</code> element of a Solr response body. If <code>docs</code> is
all you need, then this function will do the job. If you need facet data only, or mlt
data only, see the appropriate functions for each of those below. Another function,
<code>solr_all()</code> has a similar interface in terms of parameter as <code>solr_search()</code>, but
returns all parts of the response body, including, facets, mlt, groups, stats, etc.
as long as you request those.</p>

<h4 id="search-docs">Search docs</h4>

<p><code>solr_search()</code> returns only docs. A basic search:</p>

<pre><code class="language-r">solr_search(q = '*:*', rows = 2, fl = 'id')
</code></pre>

<pre><code>#&gt; Source: local data frame [2 x 1]
#&gt;
#&gt;                                   id
#&gt;                                (chr)
#&gt; 1       10.1371/journal.pone.0142241
#&gt; 2 10.1371/journal.pone.0142241/title
</code></pre>

<p><strong>Search in specific fields with <code>:</code></strong></p>

<p>Search for word ecology in title and cell in the body</p>

<pre><code class="language-r">solr_search(q = 'title:&quot;ecology&quot; AND body:&quot;cell&quot;', fl = 'title', rows = 5)
</code></pre>

<pre><code>#&gt; Source: local data frame [5 x 1]
#&gt;
#&gt;                                                       title
#&gt;                                                       (chr)
#&gt; 1                        The Ecology of Collective Behavior
#&gt; 2                                   Ecology's Big, Hot Idea
#&gt; 3     Spatial Ecology of Bacteria at the Microscale in Soil
#&gt; 4 Biofilm Formation As a Response to Ecological Competition
#&gt; 5    Ecology of Root Colonizing Massilia (Oxalobacteraceae)
</code></pre>

<p><strong>Wildcards</strong></p>

<p>Search for word that starts with &ldquo;cell&rdquo; in the title field</p>

<pre><code class="language-r">solr_search(q = 'title:&quot;cell*&quot;', fl = 'title', rows = 5)
</code></pre>

<pre><code>#&gt; Source: local data frame [5 x 1]
#&gt;
#&gt;                                                                         title
#&gt;                                                                         (chr)
#&gt; 1                                Tumor Cell Recognition Efficiency by T Cells
#&gt; 2 Cancer Stem Cell-Like Side Population Cells in Clear Cell Renal Cell Carcin
#&gt; 3 Dcas Supports Cell Polarization and Cell-Cell Adhesion Complexes in Develop
#&gt; 4 MS4a4B, a CD20 Homologue in T Cells, Inhibits T Cell Propagation by Modulat
#&gt; 5                  Cell-Cell Contact Preserves Cell Viability via Plakoglobin
</code></pre>

<p><strong>Proximity search</strong></p>

<p>Search for words &ldquo;sports&rdquo; and &ldquo;alcohol&rdquo; within four words of each other</p>

<pre><code class="language-r">solr_search(q = 'everything:&quot;stem cell&quot;~7', fl = 'title', rows = 3)
</code></pre>

<pre><code>#&gt; Source: local data frame [3 x 1]
#&gt;
#&gt;                                                                         title
#&gt;                                                                         (chr)
#&gt; 1 Correction: Reduced Intensity Conditioning, Combined Transplantation of Hap
#&gt; 2                                            A Recipe for Self-Renewing Brain
#&gt; 3  Gene Expression Profile Created for Mouse Stem Cells and Developing Embryo
</code></pre>

<p><strong>Range searches</strong></p>

<p>Search for articles with Twitter count between 5 and 10</p>

<pre><code class="language-r">solr_search(q = '*:*', fl = c('alm_twitterCount', 'id'), fq = 'alm_twitterCount:[5 TO 50]',
rows = 10)
</code></pre>

<pre><code>#&gt; Source: local data frame [10 x 2]
#&gt;
#&gt;                                                     id alm_twitterCount
#&gt;                                                  (chr)            (int)
#&gt; 1                         10.1371/journal.pone.0085872                9
#&gt; 2                    10.1371/journal.pone.0085872/body                9
#&gt; 3            10.1371/journal.pone.0085872/introduction                9
#&gt; 4  10.1371/journal.pone.0085872/results_and_discussion                9
#&gt; 5   10.1371/journal.pone.0085872/materials_and_methods                9
#&gt; 6                         10.1371/journal.pone.0108178                7
#&gt; 7                   10.1371/journal.pone.0108178/title                7
#&gt; 8                10.1371/journal.pone.0108178/abstract                7
#&gt; 9              10.1371/journal.pone.0108178/references                7
#&gt; 10                   10.1371/journal.pone.0108178/body                7
</code></pre>

<p><strong>Boosts</strong></p>

<p>Assign higher boost to title matches than to body matches (compare the two calls)</p>

<pre><code class="language-r">solr_search(q = 'title:&quot;cell&quot; abstract:&quot;science&quot;', fl = 'title', rows = 3)
</code></pre>

<pre><code>#&gt; Source: local data frame [3 x 1]
#&gt;
#&gt;                                                                         title
#&gt;                                                                         (chr)
#&gt; 1 I Want More and Better Cells! – An Outreach Project about Stem Cells and It
#&gt; 2                                   Centre of the Cell: Science Comes to Life
#&gt; 3 Globalization of Stem Cell Science: An Examination of Current and Past Coll
</code></pre>

<pre><code class="language-r">solr_search(q = 'title:&quot;cell&quot;^1.5 AND abstract:&quot;science&quot;', fl = 'title', rows = 3)
</code></pre>

<pre><code>#&gt; Source: local data frame [3 x 1]
#&gt;
#&gt;                                                                         title
#&gt;                                                                         (chr)
#&gt; 1                                   Centre of the Cell: Science Comes to Life
#&gt; 2 I Want More and Better Cells! – An Outreach Project about Stem Cells and It
#&gt; 3          Derivation of Hair-Inducing Cell from Human Pluripotent Stem Cells
</code></pre>

<h4 id="search-all">Search all</h4>

<p><code>solr_all()</code> differs from <code>solr_search()</code> in that it allows specifying facets, mlt, groups,
stats, etc, and returns all of those. It defaults to <code>parsetype = &quot;list&quot;</code> and <code>wt=&quot;json&quot;</code>,
whereas <code>solr_search()</code> defaults to <code>parsetype = &quot;df&quot;</code> and <code>wt=&quot;csv&quot;</code>. <code>solr_all()</code> returns
by default a list, whereas <code>solr_search()</code> by default returns a data.frame.</p>

<p>A basic search, just docs output</p>

<pre><code class="language-r">solr_all(q = '*:*', rows = 2, fl = 'id')
</code></pre>

<pre><code>#&gt; $response
#&gt; $response$numFound
#&gt; [1] 1505603
#&gt;
#&gt; $response$start
#&gt; [1] 0
#&gt;
#&gt; $response$docs
#&gt; $response$docs[[1]]
#&gt; $response$docs[[1]]$id
#&gt; [1] &quot;10.1371/journal.pone.0142241&quot;
#&gt;
#&gt;
#&gt; $response$docs[[2]]
#&gt; $response$docs[[2]]$id
#&gt; [1] &quot;10.1371/journal.pone.0142241/title&quot;
</code></pre>

<p>Get docs, mlt, and stats output</p>

<pre><code class="language-r">solr_all(q = 'ecology', rows = 2, fl = 'id', mlt = 'true', mlt.count = 2, mlt.fl = 'abstract', stats = 'true', stats.field = 'counter_total_all')
</code></pre>

<pre><code>#&gt; $response
#&gt; $response$numFound
#&gt; [1] 31523
#&gt;
#&gt; $response$start
#&gt; [1] 0
#&gt;
#&gt; $response$docs
#&gt; $response$docs[[1]]
#&gt; $response$docs[[1]]$id
#&gt; [1] &quot;10.1371/journal.pone.0059813&quot;
#&gt;
#&gt;
#&gt; $response$docs[[2]]
#&gt; $response$docs[[2]]$id
#&gt; [1] &quot;10.1371/journal.pone.0001248&quot;
#&gt;
#&gt;
#&gt;
#&gt;
#&gt; $moreLikeThis
#&gt; $moreLikeThis$`10.1371/journal.pone.0059813`
#&gt; $moreLikeThis$`10.1371/journal.pone.0059813`$numFound
#&gt; [1] 152983
#&gt;
#&gt; $moreLikeThis$`10.1371/journal.pone.0059813`$start
#&gt; [1] 0
#&gt;
#&gt; $moreLikeThis$`10.1371/journal.pone.0059813`$docs
#&gt; $moreLikeThis$`10.1371/journal.pone.0059813`$docs[[1]]
#&gt; $moreLikeThis$`10.1371/journal.pone.0059813`$docs[[1]]$id
#&gt; [1] &quot;10.1371/journal.pone.0111996&quot;
#&gt;
#&gt;
#&gt; $moreLikeThis$`10.1371/journal.pone.0059813`$docs[[2]]
#&gt; $moreLikeThis$`10.1371/journal.pone.0059813`$docs[[2]]$id
#&gt; [1] &quot;10.1371/journal.pone.0143687&quot;
#&gt;
#&gt;
#&gt;
#&gt;
#&gt; $moreLikeThis$`10.1371/journal.pone.0001248`
#&gt; $moreLikeThis$`10.1371/journal.pone.0001248`$numFound
#&gt; [1] 159342
#&gt;
#&gt; $moreLikeThis$`10.1371/journal.pone.0001248`$start
#&gt; [1] 0
#&gt;
#&gt; $moreLikeThis$`10.1371/journal.pone.0001248`$docs
#&gt; $moreLikeThis$`10.1371/journal.pone.0001248`$docs[[1]]
#&gt; $moreLikeThis$`10.1371/journal.pone.0001248`$docs[[1]]$id
#&gt; [1] &quot;10.1371/journal.pone.0001275&quot;
#&gt;
#&gt;
#&gt; $moreLikeThis$`10.1371/journal.pone.0001248`$docs[[2]]
#&gt; $moreLikeThis$`10.1371/journal.pone.0001248`$docs[[2]]$id
#&gt; [1] &quot;10.1371/journal.pone.0024192&quot;
#&gt;
#&gt;
#&gt;
#&gt;
#&gt;
#&gt; $stats
#&gt; $stats$stats_fields
#&gt; $stats$stats_fields$counter_total_all
#&gt; $stats$stats_fields$counter_total_all$min
#&gt; [1] 0
#&gt;
#&gt; $stats$stats_fields$counter_total_all$max
#&gt; [1] 368015
#&gt;
#&gt; $stats$stats_fields$counter_total_all$count
#&gt; [1] 31523
#&gt;
#&gt; $stats$stats_fields$counter_total_all$missing
#&gt; [1] 0
#&gt;
#&gt; $stats$stats_fields$counter_total_all$sum
#&gt; [1] 141705919
#&gt;
#&gt; $stats$stats_fields$counter_total_all$sumOfSquares
#&gt; [1] 3.169268e+12
#&gt;
#&gt; $stats$stats_fields$counter_total_all$mean
#&gt; [1] 4495.318
#&gt;
#&gt; $stats$stats_fields$counter_total_all$stddev
#&gt; [1] 8962.864
#&gt;
#&gt; $stats$stats_fields$counter_total_all$facets
#&gt; named list()
</code></pre>

<h4 id="facet">Facet</h4>

<pre><code class="language-r">solr_facet(q = '*:*', facet.field = 'journal', facet.query = c('cell', 'bird'))
</code></pre>

<pre><code>#&gt; $facet_queries
#&gt;   term  value
#&gt; 1 cell 128838
#&gt; 2 bird  13095
#&gt;
#&gt; $facet_fields
#&gt; $facet_fields$journal
#&gt;                                 X1      X2
#&gt; 1                         plos one 1236240
#&gt; 2                    plos genetics   49331
#&gt; 3                   plos pathogens   42853
#&gt; 4       plos computational biology   36391
#&gt; 5 plos neglected tropical diseases   33991
#&gt; 6                     plos biology   28753
#&gt; 7                    plos medicine   19957
#&gt; 8             plos clinical trials     521
#&gt; 9                     plos medicin       9
#&gt;
#&gt;
#&gt; $facet_pivot
#&gt; NULL
#&gt;
#&gt; $facet_dates
#&gt; NULL
#&gt;
#&gt; $facet_ranges
#&gt; NULL
</code></pre>

<h4 id="highlight">Highlight</h4>

<pre><code class="language-r">solr_highlight(q = 'alcohol', hl.fl = 'abstract', rows = 2)
</code></pre>

<pre><code>#&gt; $`10.1371/journal.pmed.0040151`
#&gt; $`10.1371/journal.pmed.0040151`$abstract
#&gt; [1] &quot;Background: &lt;em&gt;Alcohol&lt;/em&gt; consumption causes an estimated 4% of the global disease burden, prompting&quot;
#&gt;
#&gt;
#&gt; $`10.1371/journal.pone.0027752`
#&gt; $`10.1371/journal.pone.0027752`$abstract
#&gt; [1] &quot;Background: The negative influences of &lt;em&gt;alcohol&lt;/em&gt; on TB management with regard to delays in seeking&quot;
</code></pre>

<h4 id="stats">Stats</h4>

<pre><code class="language-r">out &lt;- solr_stats(q = 'ecology', stats.field = c('counter_total_all', 'alm_twitterCount'), stats.facet = c('journal', 'volume'))
</code></pre>

<pre><code class="language-r">out$data
</code></pre>

<pre><code>#&gt;                   min    max count missing       sum sumOfSquares
#&gt; counter_total_all   0 368015 31523       0 141705919 3.169268e+12
#&gt; alm_twitterCount    0   1756 31523       0    168996 3.277982e+07
#&gt;                          mean     stddev
#&gt; counter_total_all 4495.318307 8962.86436
#&gt; alm_twitterCount     5.361038   31.79876
</code></pre>

<pre><code class="language-r">out$facet
</code></pre>

<pre><code>#&gt; $counter_total_all
#&gt; $counter_total_all$volume
#&gt;     min    max count missing      sum sumOfSquares      mean    stddev
#&gt; 1     0 166346   941       0  2666674  64059423768  2833.872  7752.996
#&gt; 2   740 103659   105       0  1024186  23772918060  9754.152 11512.055
#&gt; 3  1952  69750    69       0   706027  13818140343 10232.275  9847.273
#&gt; 4  1001  14423     9       0    50561    406580461  5617.889  3913.668
#&gt; 5  1871 182659    81       0  1510206  87348144472 18644.519 27200.892
#&gt; 6  1668 117987   482       0  5838545 162659609485 12113.164 13825.190
#&gt; 7  1340 128119   741       0  7717886 188793785566 10415.501 12103.615
#&gt; 8   667 362492  1010       0  9697699 340690657979  9601.682 15664.231
#&gt; 9   103 113281  1539       0 12101852 219212200772  7863.452  8980.903
#&gt; 10   72 244134  2948       0 17709895 327671234859  6007.427  8665.255
#&gt; 11   51 184267  4825       0 24213725 383352120687  5018.389  7367.377
#&gt; 12   16 368015  6360       0 26395482 534025707012  4150.233  8170.212
#&gt; 13   42 288338  6620       0 21032561 615479463617  3177.124  9104.457
#&gt; 14    0 161868  5793       0 11040620 207978083278  1905.855  5681.101
#&gt;    volume
#&gt; 1      11
#&gt; 2      12
#&gt; 3      13
#&gt; 4      14
#&gt; 5       1
#&gt; 6       2
#&gt; 7       3
#&gt; 8       4
#&gt; 9       5
#&gt; 10      6
#&gt; 11      7
#&gt; 12      8
#&gt; 13      9
#&gt; 14     10
#&gt;
#&gt; $counter_total_all$journal
#&gt;    min    max count missing      sum sumOfSquares      mean    stddev
#&gt; 1  667 117987   243       0  4077530 1.462728e+11 16779.959 17936.069
#&gt; 2 1001 265845   884       0 14019239 5.517226e+11 15858.868 19314.215
#&gt; 3 8463  13799     2       0    22262 2.620348e+08 11131.000  3773.122
#&gt; 4    0 368015 25969       0 96176268 1.948962e+12  3703.503  7831.729
#&gt; 5  922  61985   595       0  4794131 6.591271e+10  8057.363  6777.446
#&gt; 6  815  76376   758       0  6332922 9.182935e+10  8354.778  7170.244
#&gt; 7    0 212159  1241       0  5885535 1.011674e+11  4742.575  7686.121
#&gt; 8  740 288338   580       0  4216858 1.415464e+11  7270.445 13838.941
#&gt;                            journal
#&gt; 1                    plos medicine
#&gt; 2                     plos biology
#&gt; 3             plos clinical trials
#&gt; 4                         plos one
#&gt; 5                   plos pathogens
#&gt; 6                    plos genetics
#&gt; 7 plos neglected tropical diseases
#&gt; 8       plos computational biology
#&gt;
#&gt;
#&gt; $alm_twitterCount
#&gt; $alm_twitterCount$volume
#&gt;    min  max count missing   sum sumOfSquares      mean     stddev volume
#&gt; 1    0 1756   941       0 12434      4046744 13.213603  64.267113     11
#&gt; 2    0 1061   105       0  6519      1921409 62.085714 120.761694     12
#&gt; 3    0  283    69       0  3487       509935 50.536232  70.054092     13
#&gt; 4    8  338     9       0   721       142819 80.111111 103.113341     14
#&gt; 5    0   42    81       0   177         5001  2.185185   7.594589      1
#&gt; 6    0   87   482       0   696        22972  1.443983   6.757915      2
#&gt; 7    0   48   741       0   652        11036  0.879892   3.760087      3
#&gt; 8    0  239  1010       0  1042        75008  1.031683   8.559996      4
#&gt; 9    0  126  1539       0  1906        90496  1.238467   7.570023      5
#&gt; 10   0  887  2948       0  4363      1247307  1.479986  20.519631      6
#&gt; 11   0  822  4825       0 19648      2037668  4.072124  20.144888      7
#&gt; 12   0 1503  6360       0 35945      6507435  5.651730  31.486433      8
#&gt; 13   0 1539  6620       0 49857     12852975  7.531269  43.417759      9
#&gt; 14   0  863  5793       0 31549      3309017  5.446056  23.273237     10
#&gt;
#&gt; $alm_twitterCount$journal
#&gt;   min  max count missing    sum sumOfSquares      mean   stddev
#&gt; 1   0  777   243       0   4262      1028972 17.539095 62.79378
#&gt; 2   0 1756   884       0  16570      6170914 18.744344 81.46674
#&gt; 3   0    3     2       0      3            9  1.500000  2.12132
#&gt; 4   0 1539 25969       0 123579     23533715  4.758712 29.72561
#&gt; 5   0  122   595       0   4267       160645  7.171429 14.79629
#&gt; 6   0  179   758       0   4304       149338  5.678100 12.84495
#&gt; 7   0  887  1241       0   4992      1052826  4.022562 28.85930
#&gt; 8   0  285   580       0   4181       267459  7.208621 20.24546
#&gt;                            journal
#&gt; 1                    plos medicine
#&gt; 2                     plos biology
#&gt; 3             plos clinical trials
#&gt; 4                         plos one
#&gt; 5                   plos pathogens
#&gt; 6                    plos genetics
#&gt; 7 plos neglected tropical diseases
#&gt; 8       plos computational biology
</code></pre>

<h4 id="more-like-this">More like this</h4>

<p><code>solr_mlt</code> is a function to return similar documents to the one</p>

<pre><code class="language-r">out &lt;- solr_mlt(q = 'title:&quot;ecology&quot; AND body:&quot;cell&quot;', mlt.fl = 'title', mlt.mindf = 1, mlt.mintf = 1, fl = 'counter_total_all', rows = 5)
out$docs
</code></pre>

<pre><code>#&gt; Source: local data frame [5 x 2]
#&gt;
#&gt;                             id counter_total_all
#&gt;                          (chr)             (int)
#&gt; 1 10.1371/journal.pbio.1001805             17135
#&gt; 2 10.1371/journal.pbio.0020440             23883
#&gt; 3 10.1371/journal.pone.0087217              5941
#&gt; 4 10.1371/journal.pbio.1002191             13086
#&gt; 5 10.1371/journal.pone.0040117              4327
</code></pre>

<pre><code class="language-r">out$mlt
</code></pre>

<pre><code>#&gt; $`10.1371/journal.pbio.1001805`
#&gt;                             id counter_total_all
#&gt; 1 10.1371/journal.pone.0082578              2196
#&gt; 2 10.1371/journal.pone.0098876              2453
#&gt; 3 10.1371/journal.pone.0102159              1181
#&gt; 4 10.1371/journal.pcbi.1002652              3103
#&gt; 5 10.1371/journal.pone.0087380              1895
#&gt;
#&gt; $`10.1371/journal.pbio.0020440`
#&gt;                             id counter_total_all
#&gt; 1 10.1371/journal.pone.0102679              3113
#&gt; 2 10.1371/journal.pone.0035964              5573
#&gt; 3 10.1371/journal.pone.0003259              2800
#&gt; 4 10.1371/journal.pone.0101568              2673
#&gt; 5 10.1371/journal.pntd.0003377              3392
#&gt;
#&gt; $`10.1371/journal.pone.0087217`
#&gt;                             id counter_total_all
#&gt; 1 10.1371/journal.pone.0131665               412
#&gt; 2 10.1371/journal.pcbi.0020092             19615
#&gt; 3 10.1371/journal.pone.0133941               475
#&gt; 4 10.1371/journal.pone.0123774               998
#&gt; 5 10.1371/journal.pone.0140306               322
#&gt;
#&gt; $`10.1371/journal.pbio.1002191`
#&gt;                             id counter_total_all
#&gt; 1 10.1371/journal.pbio.1002232              1952
#&gt; 2 10.1371/journal.pone.0131700               979
#&gt; 3 10.1371/journal.pone.0070448              1615
#&gt; 4 10.1371/journal.pone.0044766              2271
#&gt; 5 10.1371/journal.pone.0144763               512
#&gt;
#&gt; $`10.1371/journal.pone.0040117`
#&gt;                             id counter_total_all
#&gt; 1 10.1371/journal.pone.0069352              2765
#&gt; 2 10.1371/journal.pone.0148280               472
#&gt; 3 10.1371/journal.pone.0035502              4034
#&gt; 4 10.1371/journal.pone.0014065              5766
#&gt; 5 10.1371/journal.pone.0113280              1984
</code></pre>

<h4 id="groups">Groups</h4>

<p><code>solr_groups()</code> is a function to return similar documents to the one</p>

<pre><code class="language-r">solr_group(q = 'ecology', group.field = 'journal', group.limit = 1, fl = c('id', 'alm_twitterCount'))
</code></pre>

<pre><code>#&gt;                         groupValue numFound start
#&gt; 1                         plos one    25969     0
#&gt; 2       plos computational biology      580     0
#&gt; 3                     plos biology      884     0
#&gt; 4                             none     1251     0
#&gt; 5                    plos medicine      243     0
#&gt; 6 plos neglected tropical diseases     1241     0
#&gt; 7                   plos pathogens      595     0
#&gt; 8                    plos genetics      758     0
#&gt; 9             plos clinical trials        2     0
#&gt;                             id alm_twitterCount
#&gt; 1 10.1371/journal.pone.0059813               56
#&gt; 2 10.1371/journal.pcbi.1003594               21
#&gt; 3 10.1371/journal.pbio.1002358               16
#&gt; 4 10.1371/journal.pone.0046671                2
#&gt; 5 10.1371/journal.pmed.1000303                0
#&gt; 6 10.1371/journal.pntd.0002577                2
#&gt; 7 10.1371/journal.ppat.1003372                2
#&gt; 8 10.1371/journal.pgen.1001197                0
#&gt; 9 10.1371/journal.pctr.0020010                0
</code></pre>

<h4 id="parsing">Parsing</h4>

<p><code>solr_parse()</code> is a general purpose parser function with extension methods for parsing outputs from functions in <code>solr</code>. <code>solr_parse()</code> is used internally within functions to do parsing after retrieving data from the server. You can optionally get back raw <code>json</code>, <code>xml</code>, or <code>csv</code> with the <code>raw=TRUE</code>, and then parse afterwards with <code>solr_parse()</code>.</p>

<p>For example:</p>

<pre><code class="language-r">(out &lt;- solr_highlight(q = 'alcohol', hl.fl = 'abstract', rows = 2, raw = TRUE))
</code></pre>

<pre><code>#&gt; [1] &quot;{\&quot;response\&quot;:{\&quot;numFound\&quot;:20309,\&quot;start\&quot;:0,\&quot;docs\&quot;:[{},{}]},\&quot;highlighting\&quot;:{\&quot;10.1371/journal.pmed.0040151\&quot;:{\&quot;abstract\&quot;:[\&quot;Background: &lt;em&gt;Alcohol&lt;/em&gt; consumption causes an estimated 4% of the global disease burden, prompting\&quot;]},\&quot;10.1371/journal.pone.0027752\&quot;:{\&quot;abstract\&quot;:[\&quot;Background: The negative influences of &lt;em&gt;alcohol&lt;/em&gt; on TB management with regard to delays in seeking\&quot;]}}}\n&quot;
#&gt; attr(,&quot;class&quot;)
#&gt; [1] &quot;sr_high&quot;
#&gt; attr(,&quot;wt&quot;)
#&gt; [1] &quot;json&quot;
</code></pre>

<p>Then parse</p>

<pre><code class="language-r">solr_parse(out, 'df')
</code></pre>

<pre><code>#&gt;                          names
#&gt; 1 10.1371/journal.pmed.0040151
#&gt; 2 10.1371/journal.pone.0027752
#&gt;                                                                                                    abstract
#&gt; 1   Background: &lt;em&gt;Alcohol&lt;/em&gt; consumption causes an estimated 4% of the global disease burden, prompting
#&gt; 2 Background: The negative influences of &lt;em&gt;alcohol&lt;/em&gt; on TB management with regard to delays in seeking
</code></pre>

<h3 id="document-management">Document management</h3>

<p>Initialize connection. By default, you connect to <code>http://localhost:8983</code></p>

<pre><code class="language-r">solr_connect()
</code></pre>

<pre><code>#&gt; &lt;solr_connection&gt;
#&gt;   url:    http://localhost:8983
#&gt;   errors: simple
#&gt;   verbose: TRUE
#&gt;   proxy:
</code></pre>

<h4 id="create-documents-from-r-objects">Create documents from R objects</h4>

<p>For now, only lists and data.frame&rsquo;s supported.</p>

<h4 id="data-frame">data.frame</h4>

<pre><code class="language-r">df &lt;- data.frame(id = c(67, 68), price = c(1000, 500000000))
add(df, &quot;books&quot;)
</code></pre>

<h4 id="list">list</h4>

<pre><code class="language-r">delete_by_id(1:2, &quot;books&quot;)
</code></pre>

<pre><code class="language-r">ss &lt;- list(list(id = 1, price = 100), list(id = 2, price = 500))
add(ss, &quot;books&quot;)
</code></pre>

<h4 id="delete-documents">Delete documents</h4>

<h5 id="by-id">By id</h5>

<p>Add some documents first</p>

<pre><code class="language-r">delete_by_id(1:3, &quot;gettingstarted&quot;)
</code></pre>

<pre><code class="language-r">docs &lt;- list(list(id = 1, price = 100, name = &quot;brown&quot;),
             list(id = 2, price = 500, name = &quot;blue&quot;),
             list(id = 3, price = 2000L, name = &quot;pink&quot;))
add(docs, &quot;gettingstarted&quot;)
</code></pre>

<p>And the documents are now in your Solr database</p>

<pre><code class="language-r">tail(solr_search(name = &quot;gettingstarted&quot;, &quot;*:*&quot;, base = &quot;http://localhost:8983/solr/select&quot;, rows = 100))
</code></pre>

<p>Now delete those documents just added</p>

<pre><code class="language-r">delete_by_id(ids = c(1, 2, 3), &quot;gettingstarted&quot;)
</code></pre>

<p>And now they are gone</p>

<pre><code class="language-r">tail(solr_search(&quot;gettingstarted&quot;, &quot;*:*&quot;, base = &quot;http://localhost:8983/solr/select&quot;, rows = 100))
</code></pre>

<h5 id="by-query">By query</h5>

<p>Add some documents first</p>

<pre><code class="language-r">add(docs, &quot;gettingstarted&quot;)
</code></pre>

<p>And the documents are now in your Solr database</p>

<pre><code class="language-r">tail(solr_search(&quot;gettingstarted&quot;, &quot;*:*&quot;, base = &quot;http://localhost:8983/solr/select&quot;, rows = 100))
</code></pre>

<p>Now delete those documents just added</p>

<pre><code class="language-r">delete_by_query(query = &quot;(name:blue OR name:pink)&quot;, &quot;gettingstarted&quot;)
</code></pre>

<p>And now they are gone</p>

<pre><code class="language-r">tail(solr_search(&quot;gettingstarted&quot;, &quot;*:*&quot;, base = &quot;http://localhost:8983/solr/select&quot;, rows = 100))
</code></pre>

<h4 id="update-documents-from-files">Update documents from files</h4>

<p>This approach is best if you have many different things you want to do at once, e.g., delete and add files and set any additional options. The functions are:</p>

<ul>
<li><code>update_xml()</code></li>
<li><code>update_json()</code></li>
<li><code>update_csv()</code></li>
</ul>

<p>There are separate functions for each of the data types as they take slightly different parameters - and to make it more clear that those are the three input options for data types.</p>

<h5 id="json">JSON</h5>

<pre><code class="language-r">file &lt;- system.file(&quot;examples&quot;, &quot;books.json&quot;, package = &quot;solrium&quot;)
update_json(file, &quot;books&quot;)
</code></pre>

<h5 id="add-and-delete-in-the-same-file">Add and delete in the same file</h5>

<p>Add a document first, that we can later delete</p>

<pre><code class="language-r">ss &lt;- list(list(id = 456, name = &quot;cat&quot;))
add(ss, &quot;books&quot;)
</code></pre>

<p>Now add a new document, and delete the one we just made</p>

<pre><code class="language-r">file &lt;- system.file(&quot;examples&quot;, &quot;add_delete.xml&quot;, package = &quot;solrium&quot;)
cat(readLines(file), sep = &quot;\n&quot;)
update_xml(file, &quot;books&quot;)
</code></pre>

<h5 id="notes">Notes</h5>

<p>Note that <code>update_xml()</code> and <code>update_json()</code> have exactly the same parameters, but simply use different data input formats. <code>update_csv()</code> is different in that you can&rsquo;t provide document or field level boosts or other modifications. In addition <code>update_csv()</code> can accept not just csv, but tsv and other types of separators.</p>

<h3 id="cores-collections-management">Cores/collections management</h3>

<p>Initialize connection</p>

<pre><code class="language-r">solr_connect()
</code></pre>

<pre><code>#&gt; &lt;solr_connection&gt;
#&gt;   url:    http://localhost:8983
#&gt;   errors: simple
#&gt;   verbose: TRUE
#&gt;   proxy:
</code></pre>

<h4 id="cores">Cores</h4>

<p>There are many operations you can do on cores, including:</p>

<ul>
<li><code>core_create()</code> - create a core</li>
<li><code>core_exists()</code> - check if a core exists</li>
<li><code>core_mergeindexes()</code> - merge indexes</li>
<li><code>core_reload()</code> - reload a core</li>
<li><code>core_rename()</code> - rename a core</li>
<li><code>core_requeststatus()</code> - check request status</li>
<li><code>core_split()</code> - split a core</li>
<li><code>core_status()</code> - check core status</li>
<li><code>core_swap()</code> - core swap</li>
<li><code>core_unload()</code> - delete a core</li>
</ul>

<h5 id="create-a-core">Create a core</h5>

<pre><code class="language-r">core_create()
</code></pre>

<h5 id="delete-a-core">Delete a core</h5>

<pre><code class="language-r">core_unload()
</code></pre>

<h4 id="collections">Collections</h4>

<p>There are many operations you can do on collections, including:</p>

<ul>
<li><code>collection_addreplica()</code></li>
<li><code>collection_addreplicaprop()</code></li>
<li><code>collection_addrole()</code></li>
<li><code>collection_balanceshardunique()</code></li>
<li><code>collection_clusterprop()</code></li>
<li><code>collection_clusterstatus()</code></li>
<li><code>collection_create()</code></li>
<li><code>collection_createalias()</code></li>
<li><code>collection_createshard()</code></li>
<li><code>collection_delete()</code></li>
<li><code>collection_deletealias()</code></li>
<li><code>collection_deletereplica()</code></li>
<li><code>collection_deletereplicaprop()</code></li>
<li><code>collection_deleteshard()</code></li>
<li><code>collection_list()</code></li>
<li><code>collection_migrate()</code></li>
<li><code>collection_overseerstatus()</code></li>
<li><code>collection_rebalanceleaders()</code></li>
<li><code>collection_reload()</code></li>
<li><code>collection_removerole()</code></li>
<li><code>collection_requeststatus()</code></li>
<li><code>collection_splitshard()</code></li>
</ul>

<h5 id="create-a-collection">Create a collection</h5>

<pre><code class="language-r">collection_create()
</code></pre>

<h5 id="delete-a-collection">Delete a collection</h5>

<pre><code class="language-r">collection_delete()
</code></pre>

<p><section id="citing"></p>

<h2 id="citing">Citing</h2>

<p>To cite <code>solrium</code> in publications use:</p>

<p><br></p>

<blockquote>
<p>Scott Chamberlain (2016). solrium: General Purpose R Interface to &lsquo;Solr&rsquo;. R
package version 0.3.0. <a href="https://github.com/ropensci/solrium">https://github.com/ropensci/solrium</a></p>
</blockquote>

<p><section id="license_bugs"></p>

<h2 id="license-and-bugs">License and bugs</h2>

<ul>
<li>License: <a href="http://opensource.org/licenses/MIT">MIT</a></li>
<li>Report bugs at <a href="https://github.com/ropensci/solrium/issues?state=open">our Github repo for solrium</a></li>
</ul>

<p><a href="#top">Back to top</a></p>

                    </article>
                </div>

                </div>
            </div>
        </div>
    </article>


    <div id="footer">
        <div class="container">
            <div class="row start">
                <div class="col-1 col-1-3 top-8">
                    <img src="/img/icon_short_white.svg" />
                </div>

                <div class="col-9 col-offset-2 top-10 bottom-8">
                    <div class="row between">
                        <div class="col-2 col-1-3">
                            <a href="http://github.com/ropensci" target="_blank"><div class="icon icon-github"></div></a>
                            <a href="http://twitter.com/ropensci" target="_blank"><div class="icon icon-twitter"></div></a>
                            <a href="http://vimeo.com/ropensci" target="_blank"><div class="icon icon-vimeo"></div></a>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Info</h5>
                                <li><a href="/about">Mission</a></li>
                                <li><a href="/about#team">Team</a></li>
                                <li><a href="/about#collaborators">Collaborators</a></li>
                                <li><a href="/careers">Careers</a></li>

                            </ul>
                        </div>

                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Work</h5>
                                <li><a href="/packages/">Packages</a></li>
                                <li><a href="/blog/">Blog</a></li>
                                <li><a href="/technotes/">Tech Notes</a></li>
                                <li><a href="/tutorials/">Tutorials</a></li>
                                <li><a href="/usecases/">Use Cases</a></li>
                                <li><a href="/resources/">More Resources</a></li>
                            </ul>
                        </div>
                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Participate</h5>
                                <li><a href="/contact.html">Contact us</a></li>
                                <li><a href="/community/">Community</a></li>
                                <li><a href="http://onboarding.ropensci.org/">Contribute software</a></li>
                                <li><a href="http://unconf17.ropensci.org/">Unconference</a></li>
                                <li><a href="/coc">Code of conduct</a></li>
                                <li><a href="/donate/">Donate</a></li>
                            </ul>
                        </div>
                        <div class="col-4 top-8 bottom-8">
                            <h5 class="bottom-2"></h5>

                            <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" target="_blank">NumFOCUS</a></p>
                            <a href="http://numfocus.org" target="_blank"><img src="img/numfocus.png"></a>
                            <br>

                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12 top-8 bottom-9 divider">
                    <p class="top-9">Except where otherwise noted, content on this site is licensed under the <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank">CC-BY license</a>.
                    </p>
                </div>
            </div>
        </div>
    </div>




    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    

    
    <script type="text/javascript" src="/js/highlight.pack.js"></script>
    <script type="text/javascript">
        hljs.initHighlightingOnLoad();
    </script>



</body>
</html>
