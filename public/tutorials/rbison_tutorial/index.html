<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>rOpenSci | rbison tutorial</title>

     
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>

    <script type="text/javascript">
    hljs.configure({languages: []});
    hljs.initHighlightingOnLoad();
    </script>
    <link rel="stylesheet" type="text/css" href="/css/style-new.css" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#4b8add">
<meta name="theme-color" content="#4b8add">


    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

    
    <div id="header">
        <div class="container">
            <div class="row center-m">
                
                <div class="col-1">
                    <a href="/index.html"><img src="/img/icon_lettering_white.svg" /></a>
                </div>
                
                
                <nav class="col-6 col-offset-4 top-3">
                    <ul class="row between">
						<li><a href="/about/">About</a></li>
                        <li><a href="/blog/">Blog</a></li>
                        <li><a href="/packages/">Packages</a></li>
                        <li><a href="/community/">Community</a></li>
                        <li><a href="http://discuss.ropensci.org/" target="_blank">Discuss</a></li>

                    </ul>
                </nav>
                
            </div>
        </div>
    </div>



    <article>
        <div class="container top-20">
            
            <div class="row centered">
                
                <div class="col-7 bottom-20 maintext">
                    <h1>rbison tutorial</h1>
                    <br>
                    <h4><small style="color:grey">for v0.5.4</small></h4>
                    <br>

                    <article>
                    

<p><code>rbison</code> is an R package to search and retrieve data from the USGS BISON service. <code>rbison</code> wraps R code around the BISON API to allow you to talk to the BISON database from R.</p>

<p>BISON has occurrence data for the US only.</p>

<p>BISON is a node of the Global Biodiversity Information Facility (GBIF) - i.e., you can get data that&rsquo;s available in BISON via GBIF instead if you want.</p>

<h2 id="info">Info</h2>

<p>See <a href="http://bison.usgs.ornl.gov/doc/api.jsp">http://bison.usgs.ornl.gov/doc/api.jsp</a> for API docs for the BISON API.</p>

<h3 id="installation">Installation</h3>

<pre><code class="language-r">install.packages(&quot;rbison&quot;)
</code></pre>

<p>Or development version from GitHub</p>

<pre><code class="language-r">install.packages(&quot;devtools&quot;)
devtools::install_github(&quot;ropensci/rbison&quot;)
</code></pre>

<pre><code class="language-r">library(&quot;rbison&quot;)
</code></pre>

<h2 id="usage">Usage</h2>

<p>Notice that the function <code>bisonmap</code> automagically selects the map extent to plot for you, being one of the contiguous lower 48 states, or the lower 48 plus AK and HI, or a global map. If some or all points outside the US, a global map is drawn, and throws a warning. You may want to make sure the occurrence lat/long coordinates are correct.</p>

<h3 id="get-data">Get data</h3>

<pre><code class="language-r">out &lt;- bison(species = &quot;Helianthus annuus&quot;, count = 10)
</code></pre>

<p>Inspect summary</p>

<pre><code class="language-r">out$summary
#&gt;   occurrences.legend.living occurrences.legend.observation
#&gt; 1                         6                            746
#&gt;   occurrences.legend.centroid occurrences.legend.specimen
#&gt; 1                           1                        3709
#&gt;   occurrences.legend.unknown living observation centroid specimen unknown
#&gt; 1                       1521      6         746        1     3709    1521
</code></pre>

<p>Map occurrences</p>

<pre><code class="language-r">head(out$counties)
#&gt;   record_id total      county_name        state
#&gt; 1     39075     1    Holmes County         Ohio
#&gt; 2     42003     1 Allegheny County Pennsylvania
#&gt; 3     40063     1    Hughes County     Oklahoma
#&gt; 4     39077     1     Huron County         Ohio
#&gt; 5     17043     2    DuPage County     Illinois
#&gt; 6     40067     2 Jefferson County     Oklahoma
</code></pre>

<h3 id="all-points-within-the-us-including-ak-and-hi">All points within the US (including AK and HI)</h3>

<p>Get data</p>

<pre><code class="language-r">out &lt;- bison(species=&quot;Bison bison&quot;, count=600)
#&gt; Error: Bad Request (HTTP 400).
</code></pre>

<p>Inspect summary</p>

<pre><code class="language-r">out$summary
#&gt;   occurrences.legend.living occurrences.legend.observation
#&gt; 1                         6                            746
#&gt;   occurrences.legend.centroid occurrences.legend.specimen
#&gt; 1                           1                        3709
#&gt;   occurrences.legend.unknown living observation centroid specimen unknown
#&gt; 1                       1521      6         746        1     3709    1521
</code></pre>

<p>Map occurrences</p>

<pre><code class="language-r">bisonmap(out, tomap=&quot;state&quot;)
</code></pre>

<p><img src="/img/tutorial-images/rbison/six-1.png" alt="plot of chunk six" /></p>

<h3 id="all-points-within-the-contiguous-48-states">All points within the contiguous 48 states</h3>

<p>Get data</p>

<pre><code class="language-r">out &lt;- bison(species=&quot;Aquila chrysaetos&quot;, count=600)
#&gt; Error: Bad Request (HTTP 400).
</code></pre>

<p>Inspect summary</p>

<pre><code class="language-r">out$summary
#&gt;   occurrences.legend.living occurrences.legend.observation
#&gt; 1                         6                            746
#&gt;   occurrences.legend.centroid occurrences.legend.specimen
#&gt; 1                           1                        3709
#&gt;   occurrences.legend.unknown living observation centroid specimen unknown
#&gt; 1                       1521      6         746        1     3709    1521
</code></pre>

<p>Map occurrences</p>

<pre><code class="language-r">bisonmap(out, tomap=&quot;points&quot;)
</code></pre>

<p><img src="/img/tutorial-images/rbison/nine-1.png" alt="plot of chunk nine" /></p>

<h3 id="plot-county-or-state">Plot county or state</h3>

<p>With any data returned from a <code>bison</code> call, you can choose to plot county or state level data</p>

<p>Counties - using last data call for Aquila</p>

<pre><code class="language-r">bisonmap(out, tomap=&quot;county&quot;)
</code></pre>

<p><img src="/img/tutorial-images/rbison/ten-1.png" alt="plot of chunk ten" /></p>

<p>States - using last data call for Aquila</p>

<pre><code class="language-r">bisonmap(out, tomap=&quot;state&quot;)
</code></pre>

<p><img src="/img/tutorial-images/rbison/eleven-1.png" alt="plot of chunk eleven" /></p>

<h3 id="constrain-search-with-county-ids-or-bounding-boxes">Constrain search with county IDs or bounding boxes</h3>

<h4 id="constrain-search-to-a-certain-county">Constrain search to a certain county.</h4>

<p>Check out <a href="http://www.epa.gov/enviro/html/codes/state.html">this site</a> to get state and county fips codes. Fips codes are like so: First two digits are the state code - last three are the county code. For example the <em>06</em> in  06037 is the state of California, and the <em>037</em> is the Los Angeles county.</p>

<pre><code class="language-r">out &lt;- bison(species=&quot;Helianthus annuus&quot;, countyFips = &quot;06037&quot;)
</code></pre>

<p>Inspect summary</p>

<pre><code class="language-r">out$summary
#&gt;   occurrences.legend.living occurrences.legend.observation
#&gt; 1                         6                            746
#&gt;   occurrences.legend.centroid occurrences.legend.specimen
#&gt; 1                           1                        3709
#&gt;   occurrences.legend.unknown living observation centroid specimen unknown
#&gt; 1                       1521      6         746        1     3709    1521
</code></pre>

<p>By default, the query only returned 10 records</p>

<pre><code class="language-r">head(out$points)
#&gt;                name decimalLongitude decimalLatitude occurrenceID
#&gt; 1 Helianthus annuus        -122.3671        39.01127   1021808881
#&gt; 2 Helianthus annuus        -122.3308        47.60639   1258590900
#&gt; 3 Helianthus annuus        -122.3037        41.35260   1020858079
#&gt; 4 Helianthus annuus        -122.1928        38.82917     40886974
#&gt; 5 Helianthus annuus        -122.1692        37.42722   1022012170
#&gt; 6 Helianthus annuus        -122.1389        39.44917   1021150634
#&gt;                             provider    basis
#&gt; 1  Consortium of California Herbaria Specimen
#&gt; 2          Missouri Botanical Garden Specimen
#&gt; 3  Consortium of California Herbaria Specimen
#&gt; 4 US National Plant Germplasm System  Unknown
#&gt; 5  Consortium of California Herbaria Specimen
#&gt; 6  Consortium of California Herbaria Specimen
#&gt;                                                     common_name geo
#&gt; 1 annual sunflower, sunflower, wild sunflower, common sunflower Yes
#&gt; 2 annual sunflower, sunflower, wild sunflower, common sunflower Yes
#&gt; 3 annual sunflower, sunflower, wild sunflower, common sunflower Yes
#&gt; 4 annual sunflower, sunflower, wild sunflower, common sunflower Yes
#&gt; 5 annual sunflower, sunflower, wild sunflower, common sunflower Yes
#&gt; 6 annual sunflower, sunflower, wild sunflower, common sunflower Yes
</code></pre>

<p>Or specify county by its actual name - probably much easier.</p>

<pre><code class="language-r">out &lt;- bison(species=&quot;Helianthus annuus&quot;, county = &quot;Los Angeles&quot;)
</code></pre>

<p>Inspect summary</p>

<pre><code class="language-r">out$summary
#&gt;   occurrences.legend.observation occurrences.legend.centroid
#&gt; 1                             24                           1
#&gt;   occurrences.legend.specimen occurrences.legend.unknown observation
#&gt; 1                          59                          6          24
#&gt;   centroid specimen unknown
#&gt; 1        1       59       6
</code></pre>

<p>By default, the query only returned 10 records</p>

<pre><code class="language-r">head(out$points)
#&gt;                name decimalLongitude decimalLatitude occurrenceID
#&gt; 1 Helianthus annuus        -118.7203        34.08030   1488148453
#&gt; 2 Helianthus annuus        -118.8517        34.79611     40886955
#&gt; 3 Helianthus annuus        -118.8517        34.79611     40886954
#&gt; 4 Helianthus annuus        -118.8286        34.12916   1132411638
#&gt; 5 Helianthus annuus        -118.8285        34.12966   1132402545
#&gt; 6 Helianthus annuus        -118.7944        34.70194   1021481336
#&gt;                             provider       basis
#&gt; 1                              BISON Observation
#&gt; 2 US National Plant Germplasm System     Unknown
#&gt; 3 US National Plant Germplasm System     Unknown
#&gt; 4                    iNaturalist.org Observation
#&gt; 5                    iNaturalist.org Observation
#&gt; 6  Consortium of California Herbaria    Specimen
#&gt;                                                     common_name geo
#&gt; 1 annual sunflower, sunflower, wild sunflower, common sunflower Yes
#&gt; 2 annual sunflower, sunflower, wild sunflower, common sunflower Yes
#&gt; 3 annual sunflower, sunflower, wild sunflower, common sunflower Yes
#&gt; 4 annual sunflower, sunflower, wild sunflower, common sunflower Yes
#&gt; 5 annual sunflower, sunflower, wild sunflower, common sunflower Yes
#&gt; 6 annual sunflower, sunflower, wild sunflower, common sunflower Yes
</code></pre>

<p><code>bison</code> will help you if you spell the name wrong, or use a partial name. The results are not printed below, but you would get a prompt asking you to pick between the two counties that start with <em>Los</em>.</p>

<pre><code class="language-r">bison(species=&quot;Helianthus annuus&quot;, county = &quot;Los&quot;)
</code></pre>

<h4 id="constrain-search-to-a-amorphous-area">Constrain search to a amorphous area.</h4>

<p>Check out the Wikipedia page <a href="http://en.wikipedia.org/wiki/Well-known_text">here</a> for an in depth look at the options, terminology, etc.</p>

<pre><code class="language-r">out &lt;- bison(species=&quot;Helianthus annuus&quot;, aoi = &quot;POLYGON((-111.06360117772908 38.84001566645886,-110.80542246679359 39.37707771107983,-110.20117441992392 39.17722368276862,-110.20666758398464 38.90844075244811,-110.63513438085685 38.67724220095734,-111.06360117772908 38.84001566645886))&quot;)
</code></pre>

<p>Inspect summary</p>

<pre><code class="language-r">out$summary
#&gt;   occurrences.legend.centroid occurrences.legend.specimen centroid
#&gt; 1                           1                           1        1
#&gt;   specimen
#&gt; 1        1
</code></pre>

<p>The data</p>

<pre><code class="language-r">out$points
#&gt;                name decimalLongitude decimalLatitude occurrenceID provider
#&gt; 1 Helianthus annuus        -110.7211        39.00903   1419799586    BISON
#&gt;      basis                                                   common_name
#&gt; 1 Specimen annual sunflower, sunflower, wild sunflower, common sunflower
#&gt;   geo
#&gt; 1 Yes
</code></pre>

<h4 id="constrain-search-to-a-certain-aoibbox">Constrain search to a certain aoibbox.</h4>

<p>An aoibbox uses the format minx, miny, maxx, maxy.</p>

<pre><code class="language-r">out &lt;- bison(species=&quot;Helianthus annuus&quot;, aoibbox = '-120.31,35.81,-110.57,40.21')
</code></pre>

<p>Inspect summary</p>

<pre><code class="language-r">out$summary
#&gt;   occurrences.legend.observation occurrences.legend.centroid
#&gt; 1                             43                           1
#&gt;   occurrences.legend.specimen occurrences.legend.unknown observation
#&gt; 1                          92                         72          43
#&gt;   centroid specimen unknown
#&gt; 1        1       92      72
</code></pre>

<p>The data, by default, the query only returned 10 records</p>

<pre><code class="language-r">head(out$points)
#&gt;                name decimalLongitude decimalLatitude occurrenceID provider
#&gt; 1 Helianthus annuus        -113.7000        36.40001   1429539601    BISON
#&gt; 2 Helianthus annuus        -119.7417        36.94192   1493585452    BISON
#&gt; 3 Helianthus annuus        -111.4509        37.83162   1475891938    BISON
#&gt; 4 Helianthus annuus        -111.4509        37.83162   1475891939    BISON
#&gt; 5 Helianthus annuus        -111.7549        37.12521   1475815079    BISON
#&gt; 6 Helianthus annuus        -111.7549        37.12521   1475815080    BISON
#&gt;         basis
#&gt; 1 Observation
#&gt; 2 Observation
#&gt; 3 Observation
#&gt; 4 Observation
#&gt; 5 Observation
#&gt; 6 Observation
#&gt;                                                     common_name geo
#&gt; 1 annual sunflower, sunflower, wild sunflower, common sunflower Yes
#&gt; 2 annual sunflower, sunflower, wild sunflower, common sunflower Yes
#&gt; 3 annual sunflower, sunflower, wild sunflower, common sunflower Yes
#&gt; 4 annual sunflower, sunflower, wild sunflower, common sunflower Yes
#&gt; 5 annual sunflower, sunflower, wild sunflower, common sunflower Yes
#&gt; 6 annual sunflower, sunflower, wild sunflower, common sunflower Yes
</code></pre>

<h3 id="citing">Citing</h3>

<p>To cite <code>rbison</code> in publications use:</p>

<p><br></p>

<blockquote>
<p>Scott Chamberlain (2017). rbison: Interface to the &lsquo;USGS&rsquo; &lsquo;BISON&rsquo;
  &lsquo;API&rsquo;. R package version 0.5.4.
  <a href="https://CRAN.R-project.org/package=rbison">https://CRAN.R-project.org/package=rbison</a></p>
</blockquote>

<h3 id="license-and-bugs">License and bugs</h3>

<ul>
<li>License: <a href="http://opensource.org/licenses/MIT">MIT</a></li>
<li>Report bugs at <a href="https://github.com/ropensci/rbison/issues?state=open">our Github repo for rbison</a></li>
</ul>

<p><a href="#top">Back to top</a></p>

                    </article>
                </div>

                </div>
            </div>
        </div>
    </article>


    <div id="footer">
        <div class="container">
            <div class="row start">
                <div class="col-1 col-1-3 top-8">
                    <img src="/img/icon_short_white.svg" />
                </div>

                <div class="col-9 col-offset-2 top-10 bottom-8">
                    <div class="row between">
                        <div class="col-2 col-1-3">
                            <a href="http://github.com/ropensci" target="_blank"><div class="icon icon-github"></div></a>
                            <a href="http://twitter.com/ropensci" target="_blank"><div class="icon icon-twitter"></div></a>
                            <a href="http://vimeo.com/ropensci" target="_blank"><div class="icon icon-vimeo"></div></a>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Info</h5>
                                <li><a href="/about">Mission</a></li>
                                <li><a href="/about#team">Team</a></li>
                                <li><a href="/about#collaborators">Collaborators</a></li>
                                <li><a href="/careers">Careers</a></li>

                            </ul>
                        </div>

                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Work</h5>
                                <li><a href="/packages/">Packages</a></li>
                                <li><a href="/blog/">Blog</a></li>
                                <li><a href="/technotes/">Tech Notes</a></li>
                                <li><a href="/tutorials/">Tutorials</a></li>
                                <li><a href="/usecases/">Use Cases</a></li>
                                <li><a href="/resources/">More Resources</a></li>
                            </ul>
                        </div>
                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Participate</h5>
                                <li><a href="/contact.html">Contact us</a></li>
                                <li><a href="/community/">Community</a></li>
                                <li><a href="http://onboarding.ropensci.org/">Contribute software</a></li>
                                <li><a href="http://unconf17.ropensci.org/">Unconference</a></li>
                                <li><a href="/coc">Code of conduct</a></li>
                                <li><a href="/donate/">Donate</a></li>
                            </ul>
                        </div>
                        <div class="col-4 top-8 bottom-8">
                            <h5 class="bottom-2"></h5>

                            <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" target="_blank">NumFOCUS</a></p>
                            <a href="http://numfocus.org" target="_blank"><img src="img/numfocus.png"></a>
                            <br>

                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12 top-8 bottom-9 divider">
                    <p class="top-9">Except where otherwise noted, content on this site is licensed under the <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank">CC-BY license</a>.
                    </p>
                </div>
            </div>
        </div>
    </div>




    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    

    
    <script type="text/javascript" src="/js/highlight.pack.js"></script>
    <script type="text/javascript">
        hljs.initHighlightingOnLoad();
    </script>



</body>
</html>
