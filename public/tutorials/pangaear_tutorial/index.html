<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>rOpenSci | pangaear tutorial</title>

     
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>

    <script type="text/javascript">
    hljs.configure({languages: []});
    hljs.initHighlightingOnLoad();
    </script>
    <link rel="stylesheet" type="text/css" href="/css/style-new.css" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#4b8add">
<meta name="theme-color" content="#4b8add">


    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

    
    <div id="header">
        <div class="container">
            <div class="row center-m">
                
                <div class="col-1">
                    <a href="/index.html"><img src="/img/icon_lettering_white.svg" /></a>
                </div>
                
                
                <nav class="col-6 col-offset-4 top-3">
                    <ul class="row between">
						<li><a href="/about/">About</a></li>
                        <li><a href="/blog/">Blog</a></li>
                        <li><a href="/packages/">Packages</a></li>
                        <li><a href="/community/">Community</a></li>
                        <li><a href="http://discuss.ropensci.org/" target="_blank">Discuss</a></li>

                    </ul>
                </nav>
                
            </div>
        </div>
    </div>



    <article>
        <div class="container top-20">
            
            <div class="row centered">
                
                <div class="col-7 bottom-20 maintext">
                    <h1>pangaear tutorial</h1>
                    <br>
                    <h4><small style="color:grey">for v0.3.0</small></h4>
                    <br>

                    <article>
                    

<p>Tools to interact with the <a href="https:// www.pangaea.de">Pangaea Database</a>, including functions for searching for data, fetching datasets by dataset ID, and working with the Pangaea OAI-PMH service.</p>

<h3 id="installation">Installation</h3>

<p>Stable <code>pangaear</code> version from CRAN</p>

<pre><code class="language-r">install.packages(&quot;pangaear&quot;)
</code></pre>

<p>Or, the development version from Github</p>

<pre><code class="language-r">devtools::install_github(&quot;ropensci/pangaear&quot;)
</code></pre>

<pre><code class="language-r">library(&quot;pangaear&quot;)
</code></pre>

<h3 id="search-for-data">Search for data</h3>

<p>This is a thin wrapper around the GUI search interface on the page <a href="https://www.pangaea.de/">https://www.pangaea.de/</a>. Everything you can do there, you can do here.</p>

<pre><code class="language-r">pg_search(query = 'water', bbox = c(-124.2, 41.8, -116.8, 46.1), count = 3)
#&gt; # A tibble: 3 x 6
#&gt;      score                    doi  size size_measure
#&gt;      &lt;dbl&gt;                  &lt;chr&gt; &lt;dbl&gt;        &lt;chr&gt;
#&gt; 1 21.19016 10.1594/PANGAEA.812094     2     datasets
#&gt; 2 11.05477 10.1594/PANGAEA.862525   372     datasets
#&gt; 3 10.84113 10.1594/PANGAEA.736010     9     datasets
#&gt; # ... with 2 more variables: citation &lt;chr&gt;, supplement_to &lt;chr&gt;
</code></pre>

<h3 id="get-data">Get data</h3>

<pre><code class="language-r">res &lt;- pg_data(doi = '10.1594/PANGAEA.761032')
res[[1]]
#&gt; &lt;Pangaea data&gt; 10.1594/PANGAEA.761002
#&gt; # A tibble: 250,201 x 9
#&gt;          Event      `Date/Time` Latitude Longitude `Elevation [m]`
#&gt;          &lt;chr&gt;            &lt;chr&gt;    &lt;dbl&gt;     &lt;dbl&gt;           &lt;int&gt;
#&gt;  1 NBP97-05/01 1997-08-04T12:09 -57.5007  -44.9915           -3090
#&gt;  2 NBP97-05/01 1997-08-04T12:09 -57.5007  -44.9915           -3090
#&gt;  3 NBP97-05/01 1997-08-04T12:09 -57.5007  -44.9915           -3090
#&gt;  4 NBP97-05/01 1997-08-04T12:09 -57.5007  -44.9915           -3090
#&gt;  5 NBP97-05/01 1997-08-04T12:09 -57.5007  -44.9915           -3090
#&gt;  6 NBP97-05/01 1997-08-04T12:09 -57.5007  -44.9915           -3090
#&gt;  7 NBP97-05/01 1997-08-04T12:09 -57.5007  -44.9915           -3090
#&gt;  8 NBP97-05/01 1997-08-04T12:09 -57.5007  -44.9915           -3090
#&gt;  9 NBP97-05/01 1997-08-04T12:09 -57.5007  -44.9915           -3090
#&gt; 10 NBP97-05/01 1997-08-04T12:09 -57.5007  -44.9915           -3090
#&gt; # ... with 250,191 more rows, and 4 more variables: `Depth water
#&gt; #   [m]` &lt;int&gt;, `Temp [°C]` &lt;dbl&gt;, Sal &lt;dbl&gt;, `Tpot [°C]` &lt;dbl&gt;
</code></pre>

<p>Search for data then pass DOI to data function.</p>

<pre><code class="language-r">res &lt;- pg_search(query = 'water', bbox = c(-124.2, 41.8, -116.8, 46.1), count = 3)
pg_data(res$doi[1])
#&gt; [[1]]
#&gt; &lt;Pangaea data&gt; 10.1594/PANGAEA.812092
#&gt; # A tibble: 12 x 18
#&gt;         Event Latitude Longitude `Elevation [m]`       `Sample label`
#&gt;         &lt;chr&gt;    &lt;dbl&gt;     &lt;dbl&gt;           &lt;int&gt;                &lt;chr&gt;
#&gt;  1   169-856H   48.434  -128.681           -2423       169-856H-55R-1
#&gt;  2   169-856H   48.434  -128.681           -2423 169-856H-57R-1,52-54
#&gt;  3   169-856H   48.434  -128.681           -2423 169-856H-64R-2,93-95
#&gt;  4   169-856H   48.434  -128.681           -2423 169-856H-65R-1,35-38
#&gt;  5 SO145/2_20  -14.153  -112.514           -2650        20DS4-surface
#&gt;  6 SO145/2_20  -14.153  -112.514           -2650           20DS4-core
#&gt;  7 SO145/2_29  -14.825  -111.907           -3355        29DS2-surface
#&gt;  8 SO145/2_29  -14.825  -111.907           -3355           29DS2-core
#&gt;  9 SO145/2_36  -14.892  -109.187           -3503        36DS1-surface
#&gt; 10 SO145/2_36  -14.892  -109.187           -3503           36DS1-core
#&gt; 11 SO145/2_36  -14.892  -109.187           -3503     43DS9-oxid. halo
#&gt; 12 SO145/2_36  -14.892  -109.187           -3503           43DS9-core
#&gt; # ... with 13 more variables: `Sample comment` &lt;chr&gt;, `Depth [m]` &lt;dbl&gt;,
#&gt; #   `Age [ka BP]` &lt;int&gt;, Rock &lt;chr&gt;, Alteration &lt;chr&gt;, `DBD
#&gt; #   [g/cm**3]` &lt;dbl&gt;, `Poros frac (MIP)` &lt;dbl&gt;, `Pore radius mean
#&gt; #   [mm]` &lt;dbl&gt;, `SSA [m**2/g]` &lt;dbl&gt;, `Poros frac (#1 NIR)` &lt;dbl&gt;, `Poros
#&gt; #   frac (#2 NIR)` &lt;dbl&gt;, `Water dm [%]` &lt;dbl&gt;, Minerals &lt;chr&gt;
#&gt; 
#&gt; [[2]]
#&gt; &lt;Pangaea data&gt; 10.1594/PANGAEA.812093
#&gt; # A tibble: 36 x 18
#&gt;       Event `Sample label`                              `Sample comment`
#&gt;       &lt;chr&gt;          &lt;chr&gt;                                         &lt;chr&gt;
#&gt;  1 169-856H 169-856H-55R-1 complete altered, thickness of basalt =200 µm
#&gt;  2 169-856H 169-856H-55R-1 complete altered, thickness of basalt =200 µm
#&gt;  3 169-856H 169-856H-55R-1 complete altered, thickness of basalt =200 µm
#&gt;  4 169-856H 169-856H-55R-1 complete altered, thickness of basalt =200 µm
#&gt;  5 169-856H 169-856H-55R-1 complete altered, thickness of basalt =200 µm
#&gt;  6 169-856H 169-856H-55R-1 complete altered, thickness of basalt =200 µm
#&gt;  7 169-856H 169-856H-55R-1 complete altered, thickness of basalt =200 µm
#&gt;  8 169-856H 169-856H-55R-1 complete altered, thickness of basalt =200 µm
#&gt;  9 169-856H 169-856H-55R-1 complete altered, thickness of basalt =200 µm
#&gt; 10 169-856H 169-856H-55R-1 complete altered, thickness of basalt =200 µm
#&gt; # ... with 26 more rows, and 15 more variables: `Depth [m]` &lt;dbl&gt;,
#&gt; #   `Distance [µm]` &lt;int&gt;, `T tech [°C]` &lt;dbl&gt;, Run &lt;chr&gt;, `- (initial
#&gt; #   concentration of diff...)` &lt;dbl&gt;, `- (initial concentration of
#&gt; #   diff...)` &lt;dbl&gt;, `Poros frac (#1, from fit)` &lt;dbl&gt;, `Poros frac (#2,
#&gt; #   from fit)` &lt;dbl&gt;, `Diff coeff [10**-6 cm**2/s]` &lt;dbl&gt;, `Diff coeff std
#&gt; #   dev [±] (effective from fit)` &lt;dbl&gt;, `Diff coeff std dev [±]
#&gt; #   (effective total)` &lt;dbl&gt;, X &lt;dbl&gt;, `X (average)` &lt;int&gt;, F &lt;int&gt;, `-
#&gt; #   (m)` &lt;dbl&gt;
</code></pre>

<h3 id="oai-pmh-metadata">OAI-PMH metadata</h3>

<h4 id="identify-the-service">Identify the service</h4>

<pre><code class="language-r">pg_identify()
#&gt; &lt;Pangaea&gt;
#&gt;   repositoryName: PANGAEA - Data Publisher for Earth &amp; Environmental Science
#&gt;   baseURL: https://ws.pangaea.de/oai/provider
#&gt;   protocolVersion: 2.0
#&gt;   adminEmail: tech@pangaea.de
#&gt;   adminEmail: tech@pangaea.de
#&gt;   earliestDatestamp: 2015-01-01T00:00:00Z
#&gt;   deletedRecord: transient
#&gt;   granularity: YYYY-MM-DDThh:mm:ssZ
#&gt;   compression: gzip
#&gt;   description: oaipangaea.de:oai:pangaea.de:doi:10.1594/PANGAEA.999999
</code></pre>

<h4 id="list-metadata-formats">List metadata formats</h4>

<pre><code class="language-r">pg_list_metadata_formats()
#&gt;   metadataPrefix                                                 schema
#&gt; 1         oai_dc         http://www.openarchives.org/OAI/2.0/oai_dc.xsd
#&gt; 2         pan_md      http://ws.pangaea.de/schemas/pangaea/MetaData.xsd
#&gt; 3            dif http://gcmd.gsfc.nasa.gov/Aboutus/xml/dif/dif_v9.4.xsd
#&gt; 4       iso19139               http://www.isotc211.org/2005/gmd/gmd.xsd
#&gt; 5  iso19139.iodp               http://www.isotc211.org/2005/gmd/gmd.xsd
#&gt; 6      datacite3  http://schema.datacite.org/meta/kernel-3/metadata.xsd
#&gt;                             metadataNamespace
#&gt; 1 http://www.openarchives.org/OAI/2.0/oai_dc/
#&gt; 2              http://www.pangaea.de/MetaData
#&gt; 3  http://gcmd.gsfc.nasa.gov/Aboutus/xml/dif/
#&gt; 4            http://www.isotc211.org/2005/gmd
#&gt; 5            http://www.isotc211.org/2005/gmd
#&gt; 6         http://datacite.org/schema/kernel-3
</code></pre>

<h4 id="list-identifiers">List identifiers</h4>

<pre><code class="language-r">pg_list_identifiers(from = '2015-09-01', until = '2015-09-05')
#&gt; Error in handle_errors(parsed): OAI-PMH errors: noRecordsMatch:
</code></pre>

<h4 id="list-sets">List sets</h4>

<pre><code class="language-r">pg_list_sets()
#&gt; # A tibble: 262 x 2
#&gt;      setSpec                                        setName
#&gt;        &lt;chr&gt;                                          &lt;chr&gt;
#&gt;  1       ACD       PANGAEA tech-keyword 'ACD' (2 data sets)
#&gt;  2      ASPS     PANGAEA tech-keyword 'ASPS' (59 data sets)
#&gt;  3 AWIXRFraw PANGAEA tech-keyword 'AWIXRFraw' (1 data sets)
#&gt;  4   BAH1960   PANGAEA tech-keyword 'BAH1960' (2 data sets)
#&gt;  5   BAH1961   PANGAEA tech-keyword 'BAH1961' (2 data sets)
#&gt;  6   BAH1962   PANGAEA tech-keyword 'BAH1962' (7 data sets)
#&gt;  7   BAH1963   PANGAEA tech-keyword 'BAH1963' (7 data sets)
#&gt;  8   BAH1964   PANGAEA tech-keyword 'BAH1964' (7 data sets)
#&gt;  9   BAH1965   PANGAEA tech-keyword 'BAH1965' (7 data sets)
#&gt; 10   BAH1966   PANGAEA tech-keyword 'BAH1966' (6 data sets)
#&gt; # ... with 252 more rows
</code></pre>

<h4 id="list-records">List records</h4>

<pre><code class="language-r">pg_list_records(from = '2015-09-01', until = '2015-09-10')
#&gt; Error in handle_errors(parsed): OAI-PMH errors: noRecordsMatch:
</code></pre>

<h4 id="get-a-record">Get a record</h4>

<pre><code class="language-r">pg_get_record(identifier = &quot;oai:pangaea.de:doi:10.1594/PANGAEA.788382&quot;)
#&gt; $`oai:pangaea.de:doi:10.1594/PANGAEA.788382`
#&gt; $`oai:pangaea.de:doi:10.1594/PANGAEA.788382`$header
#&gt; # A tibble: 1 x 3
#&gt;                                  identifier            datestamp
#&gt;                                       &lt;chr&gt;                &lt;chr&gt;
#&gt; 1 oai:pangaea.de:doi:10.1594/PANGAEA.788382 2017-08-08T17:50:18Z
#&gt; # ... with 1 more variables: setSpec &lt;chr&gt;
#&gt; 
#&gt; $`oai:pangaea.de:doi:10.1594/PANGAEA.788382`$metadata
#&gt; # A tibble: 1 x 13
#&gt;                                                                         title
#&gt;                                                                         &lt;chr&gt;
#&gt; 1 Trace metals in shells of mussels and clams from deep-sea hydrothermal vent
#&gt; # ... with 12 more variables: creator &lt;chr&gt;, source &lt;chr&gt;,
#&gt; #   publisher &lt;chr&gt;, date &lt;chr&gt;, type &lt;chr&gt;, format &lt;chr&gt;,
#&gt; #   identifier &lt;chr&gt;, description &lt;chr&gt;, language &lt;chr&gt;, rights &lt;chr&gt;,
#&gt; #   coverage &lt;chr&gt;, subject &lt;chr&gt;
</code></pre>

<h3 id="citing">Citing</h3>

<p>To cite <code>pangaear</code> in publications use:</p>

<p><br></p>

<blockquote>
<p>Scott Chamberlain, Kara Woo, Andrew MacDonald, Naupaka Zimmerman and
  Gavin Simpson (2017). pangaear: Client for the &lsquo;Pangaea&rsquo; Database. R
  package version 0.3.0. <a href="https://CRAN.R-project.org/package=pangaear">https://CRAN.R-project.org/package=pangaear</a></p>
</blockquote>

<h3 id="license-and-bugs">License and bugs</h3>

<ul>
<li>License: <a href="http://opensource.org/licenses/MIT">MIT</a></li>
<li>Report bugs at <a href="https://github.com/ropensci/pangaear/issues?state=open">our Github repo for pangaear</a></li>
</ul>

<p><a href="#top">Back to top</a></p>

                    </article>
                </div>

                </div>
            </div>
        </div>
    </article>


    <div id="footer">
        <div class="container">
            <div class="row start">
                <div class="col-1 col-1-3 top-8">
                    <img src="/img/icon_short_white.svg" />
                </div>

                <div class="col-9 col-offset-2 top-10 bottom-8">
                    <div class="row between">
                        <div class="col-2 col-1-3">
                            <a href="http://github.com/ropensci" target="_blank"><div class="icon icon-github"></div></a>
                            <a href="http://twitter.com/ropensci" target="_blank"><div class="icon icon-twitter"></div></a>
                            <a href="http://vimeo.com/ropensci" target="_blank"><div class="icon icon-vimeo"></div></a>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Info</h5>
                                <li><a href="/about">Mission</a></li>
                                <li><a href="/about#team">Team</a></li>
                                <li><a href="/about#collaborators">Collaborators</a></li>
                                <li><a href="/careers">Careers</a></li>

                            </ul>
                        </div>

                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Work</h5>
                                <li><a href="/packages/">Packages</a></li>
                                <li><a href="/blog/">Blog</a></li>
                                <li><a href="/technotes/">Tech Notes</a></li>
                                <li><a href="/tutorials/">Tutorials</a></li>
                                <li><a href="/usecases/">Use Cases</a></li>
                                <li><a href="/resources/">More Resources</a></li>
                            </ul>
                        </div>
                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Participate</h5>
                                <li><a href="/contact.html">Contact us</a></li>
                                <li><a href="/community/">Community</a></li>
                                <li><a href="http://onboarding.ropensci.org/">Contribute software</a></li>
                                <li><a href="http://unconf17.ropensci.org/">Unconference</a></li>
                                <li><a href="/coc">Code of conduct</a></li>
                                <li><a href="/donate/">Donate</a></li>
                            </ul>
                        </div>
                        <div class="col-4 top-8 bottom-8">
                            <h5 class="bottom-2"></h5>

                            <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" target="_blank">NumFOCUS</a></p>
                            <a href="http://numfocus.org" target="_blank"><img src="img/numfocus.png"></a>
                            <br>

                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12 top-8 bottom-9 divider">
                    <p class="top-9">Except where otherwise noted, content on this site is licensed under the <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank">CC-BY license</a>.
                    </p>
                </div>
            </div>
        </div>
    </div>




    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    

    
    <script type="text/javascript" src="/js/highlight.pack.js"></script>
    <script type="text/javascript">
        hljs.initHighlightingOnLoad();
    </script>



</body>
</html>
