<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>rOpenSci | etseed tutorial</title>

     
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>

    <script type="text/javascript">
    hljs.configure({languages: []});
    hljs.initHighlightingOnLoad();
    </script>
    <link rel="stylesheet" type="text/css" href="/css/style-new.css" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#4b8add">
<meta name="theme-color" content="#4b8add">


    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

    
    <div id="header">
        <div class="container">
            <div class="row center-m">
                
                <div class="col-1">
                    <a href="/index.html"><img src="/img/icon_lettering_white.svg" /></a>
                </div>
                
                
                <nav class="col-6 col-offset-4 top-3">
                    <ul class="row between">
						<li><a href="/about/">About</a></li>
                        <li><a href="/blog/">Blog</a></li>
                        <li><a href="/packages/">Packages</a></li>
                        <li><a href="/community/">Community</a></li>
                        <li><a href="http://discuss.ropensci.org/" target="_blank">Discuss</a></li>

                    </ul>
                </nav>
                
            </div>
        </div>
    </div>



    <article>
        <div class="container top-20">
            
            <div class="row centered">
                
                <div class="col-7 bottom-20 maintext">
                    <h1>etseed tutorial</h1>
                    <br>
                    <h4><small style="color:grey">for v0.1.0</small></h4>
                    <br>

                    <article>
                    

<p><code>etcd</code> is a key-value DB written in <code>Go</code>. It has an HTTP API, which this R package wraps.</p>

<p><a href="https://github.com/coreos/etcd/blob/master/Documentation/v2/api.md">etcd API docs</a></p>

<p><strong>Installing etcd</strong></p>

<p>See the <a href="https://github.com/coreos/etcd#etcd">etcd Github repo</a> for help on installing <code>etcd</code>.</p>

<p>There are various ways to install it, and they depend on your operating sytsem.</p>

<p>You can install via <code>homebrew</code>, install from source, and via Docker.</p>

<p><strong>Start etcd</strong></p>

<p>at the command line</p>

<pre><code class="language-sh">etcd
</code></pre>

<blockquote>
<p>how to start etcd may differ depending on your setup</p>
</blockquote>

<h3 id="installation">Installation</h3>

<p>Stable version from CRAN</p>

<pre><code class="language-r">install.packages(&quot;etseed&quot;)
</code></pre>

<p>Development version from GitHub</p>

<pre><code class="language-r">if (!require(&quot;devtools&quot;)) install.packages(&quot;devtools&quot;)
devtools::install_github(&quot;ropensci/etseed&quot;)
</code></pre>

<pre><code class="language-r">library(&quot;etseed&quot;)
</code></pre>

<h3 id="usage">Usage</h3>

<p><strong>Make a client</strong></p>

<p>First task when using this package is to initialize a client
with the <code>etcd()</code> function. it&rsquo;s a wrapper around an R6 class.</p>

<pre><code class="language-r">(client &lt;- etcd())
#&gt; &lt;etcd client&gt;
#&gt;   host: 127.0.0.1
#&gt;   port: 2379
#&gt;   api_version: v2
#&gt;   scheme: http
#&gt;   allow redirect: TRUE
</code></pre>

<p>Default settings in <code>etcd()</code> connect you to <code>localhost</code>, and port <code>2379</code>,
using etcd API version 2, with an <code>http</code> scheme.</p>

<p><strong>Get version</strong></p>

<pre><code class="language-r">client$version()
#&gt; $etcdserver
#&gt; [1] &quot;3.2.9&quot;
#&gt; 
#&gt; $etcdcluster
#&gt; [1] &quot;3.2.0&quot;
</code></pre>

<p><strong>Create a directory</strong></p>

<pre><code class="language-r">client$create(&quot;/neighbor&quot;, dir = TRUE)
#&gt; $action
#&gt; [1] &quot;set&quot;
#&gt; 
#&gt; $node
#&gt; $node$key
#&gt; [1] &quot;/neighbor&quot;
#&gt; 
#&gt; $node$dir
#&gt; [1] TRUE
#&gt; 
#&gt; $node$modifiedIndex
#&gt; [1] 6480
#&gt; 
#&gt; $node$createdIndex
#&gt; [1] 6480
</code></pre>

<p><strong>Create a key</strong></p>

<pre><code class="language-r">client$create(key = &quot;/mykey&quot;, value = &quot;this is awesome&quot;)
#&gt; $action
#&gt; [1] &quot;set&quot;
#&gt; 
#&gt; $node
#&gt; $node$key
#&gt; [1] &quot;/mykey&quot;
#&gt; 
#&gt; $node$value
#&gt; [1] &quot;this is awesome&quot;
#&gt; 
#&gt; $node$modifiedIndex
#&gt; [1] 6482
#&gt; 
#&gt; $node$createdIndex
#&gt; [1] 6482
</code></pre>

<p>Use <code>ttl</code> parameter to make it dissappear after <code>x</code> seconds</p>

<pre><code class="language-r">client$create(key = &quot;/stuff&quot;, value = &quot;tables&quot;, ttl = 5)
#&gt; $action
#&gt; [1] &quot;set&quot;
#&gt; 
#&gt; $node
#&gt; $node$key
#&gt; [1] &quot;/stuff&quot;
#&gt; 
#&gt; $node$value
#&gt; [1] &quot;tables&quot;
#&gt; 
#&gt; $node$expiration
#&gt; [1] &quot;2017-10-17T00:19:35.356961171Z&quot;
#&gt; 
#&gt; $node$ttl
#&gt; [1] 5
#&gt; 
#&gt; $node$modifiedIndex
#&gt; [1] 6483
#&gt; 
#&gt; $node$createdIndex
#&gt; [1] 6483
</code></pre>

<p>And the key will be gone after 5 seconds, see:</p>

<pre><code class="language-r">client$key(&quot;/stuff&quot;)
#&gt; Error in etcd_GET(sprintf(&quot;%s%s/%s/&quot;, etcdbase(), &quot;keys&quot;, key), ...) :
#&gt;   client error: (404) Not Found
</code></pre>

<p><strong>Update a key</strong></p>

<p>Create a key</p>

<pre><code class="language-r">client$create(key = &quot;/foo&quot;, value = &quot;bar&quot;)
#&gt; $action
#&gt; [1] &quot;set&quot;
#&gt; 
#&gt; $node
#&gt; $node$key
#&gt; [1] &quot;/foo&quot;
#&gt; 
#&gt; $node$value
#&gt; [1] &quot;bar&quot;
#&gt; 
#&gt; $node$modifiedIndex
#&gt; [1] 6485
#&gt; 
#&gt; $node$createdIndex
#&gt; [1] 6485
</code></pre>

<p>Then update the key</p>

<pre><code class="language-r">client$update(key = &quot;/foo&quot;, value = &quot;bar stool&quot;)
#&gt; $action
#&gt; [1] &quot;set&quot;
#&gt; 
#&gt; $node
#&gt; $node$key
#&gt; [1] &quot;/foo&quot;
#&gt; 
#&gt; $node$value
#&gt; [1] &quot;bar stool&quot;
#&gt; 
#&gt; $node$modifiedIndex
#&gt; [1] 6486
#&gt; 
#&gt; $node$createdIndex
#&gt; [1] 6486
#&gt; 
#&gt; 
#&gt; $prevNode
#&gt; $prevNode$key
#&gt; [1] &quot;/foo&quot;
#&gt; 
#&gt; $prevNode$value
#&gt; [1] &quot;bar&quot;
#&gt; 
#&gt; $prevNode$modifiedIndex
#&gt; [1] 6485
#&gt; 
#&gt; $prevNode$createdIndex
#&gt; [1] 6485
</code></pre>

<p><strong>Create in-order keys</strong></p>

<pre><code class="language-r">client$create_inorder(&quot;/queue&quot;, &quot;thing1&quot;)
#&gt; $action
#&gt; [1] &quot;create&quot;
#&gt; 
#&gt; $node
#&gt; $node$key
#&gt; [1] &quot;/queue/00000000000000006487&quot;
#&gt; 
#&gt; $node$value
#&gt; [1] &quot;thing1&quot;
#&gt; 
#&gt; $node$modifiedIndex
#&gt; [1] 6487
#&gt; 
#&gt; $node$createdIndex
#&gt; [1] 6487
</code></pre>

<pre><code class="language-r">client$create_inorder(&quot;/queue&quot;, &quot;thing2&quot;)
#&gt; $action
#&gt; [1] &quot;create&quot;
#&gt; 
#&gt; $node
#&gt; $node$key
#&gt; [1] &quot;/queue/00000000000000006488&quot;
#&gt; 
#&gt; $node$value
#&gt; [1] &quot;thing2&quot;
#&gt; 
#&gt; $node$modifiedIndex
#&gt; [1] 6488
#&gt; 
#&gt; $node$createdIndex
#&gt; [1] 6488
</code></pre>

<pre><code class="language-r">client$create_inorder(&quot;/queue&quot;, &quot;thing3&quot;)
#&gt; $action
#&gt; [1] &quot;create&quot;
#&gt; 
#&gt; $node
#&gt; $node$key
#&gt; [1] &quot;/queue/00000000000000006489&quot;
#&gt; 
#&gt; $node$value
#&gt; [1] &quot;thing3&quot;
#&gt; 
#&gt; $node$modifiedIndex
#&gt; [1] 6489
#&gt; 
#&gt; $node$createdIndex
#&gt; [1] 6489
</code></pre>

<p><strong>List keys</strong></p>

<pre><code class="language-r">client$keys()
#&gt; $action
#&gt; [1] &quot;get&quot;
#&gt; 
#&gt; $node
#&gt; $node$dir
#&gt; [1] TRUE
#&gt; 
#&gt; $node$nodes
#&gt; $node$nodes[[1]]
#&gt; $node$nodes[[1]]$key
#&gt; [1] &quot;/mykey&quot;
#&gt; 
#&gt; $node$nodes[[1]]$value
#&gt; [1] &quot;this is awesome&quot;
#&gt; 
#&gt; $node$nodes[[1]]$modifiedIndex
#&gt; [1] 6482
#&gt; 
#&gt; $node$nodes[[1]]$createdIndex
#&gt; [1] 6482
#&gt; 
#&gt; 
#&gt; $node$nodes[[2]]
#&gt; $node$nodes[[2]]$key
#&gt; [1] &quot;/foo&quot;
#&gt; 
#&gt; $node$nodes[[2]]$value
#&gt; [1] &quot;bar stool&quot;
#&gt; 
#&gt; $node$nodes[[2]]$modifiedIndex
#&gt; [1] 6486
#&gt; 
#&gt; $node$nodes[[2]]$createdIndex
#&gt; [1] 6486
#&gt; 
#&gt; 
#&gt; $node$nodes[[3]]
#&gt; $node$nodes[[3]]$key
#&gt; [1] &quot;/spnacziur&quot;
#&gt; 
#&gt; $node$nodes[[3]]$value
#&gt; [1] &quot;saturn cow and moon cheese&quot;
#&gt; 
#&gt; $node$nodes[[3]]$modifiedIndex
#&gt; [1] 6452
#&gt; 
#&gt; $node$nodes[[3]]$createdIndex
#&gt; [1] 6452
#&gt; 
#&gt; 
#&gt; $node$nodes[[4]]
#&gt; $node$nodes[[4]]$key
#&gt; [1] &quot;/neighbor&quot;
#&gt; 
#&gt; $node$nodes[[4]]$dir
#&gt; [1] TRUE
#&gt; 
#&gt; $node$nodes[[4]]$modifiedIndex
#&gt; [1] 6480
#&gt; 
#&gt; $node$nodes[[4]]$createdIndex
#&gt; [1] 6480
#&gt; 
#&gt; 
#&gt; $node$nodes[[5]]
#&gt; $node$nodes[[5]]$key
#&gt; [1] &quot;/bgkalixcd&quot;
#&gt; 
#&gt; $node$nodes[[5]]$dir
#&gt; [1] TRUE
#&gt; 
#&gt; $node$nodes[[5]]$modifiedIndex
#&gt; [1] 6446
#&gt; 
#&gt; $node$nodes[[5]]$createdIndex
#&gt; [1] 6446
#&gt; 
#&gt; 
#&gt; $node$nodes[[6]]
#&gt; $node$nodes[[6]]$key
#&gt; [1] &quot;/stuff&quot;
#&gt; 
#&gt; $node$nodes[[6]]$value
#&gt; [1] &quot;tables&quot;
#&gt; 
#&gt; $node$nodes[[6]]$expiration
#&gt; [1] &quot;2017-10-17T00:19:35.356961171Z&quot;
#&gt; 
#&gt; $node$nodes[[6]]$ttl
#&gt; [1] 5
#&gt; 
#&gt; $node$nodes[[6]]$modifiedIndex
#&gt; [1] 6483
#&gt; 
#&gt; $node$nodes[[6]]$createdIndex
#&gt; [1] 6483
#&gt; 
#&gt; 
#&gt; $node$nodes[[7]]
#&gt; $node$nodes[[7]]$key
#&gt; [1] &quot;/queue&quot;
#&gt; 
#&gt; $node$nodes[[7]]$dir
#&gt; [1] TRUE
#&gt; 
#&gt; $node$nodes[[7]]$modifiedIndex
#&gt; [1] 6463
#&gt; 
#&gt; $node$nodes[[7]]$createdIndex
#&gt; [1] 6463
</code></pre>

<p><strong>List a key</strong></p>

<pre><code class="language-r">client$key(&quot;/mykey&quot;)
#&gt; $action
#&gt; [1] &quot;get&quot;
#&gt; 
#&gt; $node
#&gt; $node$key
#&gt; [1] &quot;/mykey&quot;
#&gt; 
#&gt; $node$value
#&gt; [1] &quot;this is awesome&quot;
#&gt; 
#&gt; $node$modifiedIndex
#&gt; [1] 6482
#&gt; 
#&gt; $node$createdIndex
#&gt; [1] 6482
</code></pre>

<h3 id="citing">Citing</h3>

<blockquote>
<p>Scott Chamberlain (2016). etseed: Client for &lsquo;etcd&rsquo;, a &lsquo;Key-value&rsquo; Database. R package version 0.1.0. <a href="https://cran.rstudio.com/package=etseed">https://cran.rstudio.com/package=etseed</a></p>
</blockquote>

<h3 id="license-and-bugs">License and bugs</h3>

<ul>
<li>License: <a href="http://opensource.org/licenses/MIT">MIT</a></li>
<li>Report bugs at <a href="https://github.com/ropensci/etseed/issues?state=open">our GitHub repo for etseed</a></li>
</ul>

<p><a href="#top">Back to top</a></p>

                    </article>
                </div>

                </div>
            </div>
        </div>
    </article>


    <div id="footer">
        <div class="container">
            <div class="row start">
                <div class="col-1 col-1-3 top-8">
                    <img src="/img/icon_short_white.svg" />
                </div>

                <div class="col-9 col-offset-2 top-10 bottom-8">
                    <div class="row between">
                        <div class="col-2 col-1-3">
                            <a href="http://github.com/ropensci" target="_blank"><div class="icon icon-github"></div></a>
                            <a href="http://twitter.com/ropensci" target="_blank"><div class="icon icon-twitter"></div></a>
                            <a href="http://vimeo.com/ropensci" target="_blank"><div class="icon icon-vimeo"></div></a>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Info</h5>
                                <li><a href="/about">Mission</a></li>
                                <li><a href="/about#team">Team</a></li>
                                <li><a href="/about#collaborators">Collaborators</a></li>
                                <li><a href="/careers">Careers</a></li>

                            </ul>
                        </div>

                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Work</h5>
                                <li><a href="/packages/">Packages</a></li>
                                <li><a href="/blog/">Blog</a></li>
                                <li><a href="/technotes/">Tech Notes</a></li>
                                <li><a href="/tutorials/">Tutorials</a></li>
                                <li><a href="/usecases/">Use Cases</a></li>
                                <li><a href="/resources/">More Resources</a></li>
                            </ul>
                        </div>
                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Participate</h5>
                                <li><a href="/contact.html">Contact us</a></li>
                                <li><a href="/community/">Community</a></li>
                                <li><a href="http://onboarding.ropensci.org/">Contribute software</a></li>
                                <li><a href="http://unconf17.ropensci.org/">Unconference</a></li>
                                <li><a href="/coc">Code of conduct</a></li>
                                <li><a href="/donate/">Donate</a></li>
                            </ul>
                        </div>
                        <div class="col-4 top-8 bottom-8">
                            <h5 class="bottom-2"></h5>

                            <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" target="_blank">NumFOCUS</a></p>
                            <a href="http://numfocus.org" target="_blank"><img src="img/numfocus.png"></a>
                            <br>

                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12 top-8 bottom-9 divider">
                    <p class="top-9">Except where otherwise noted, content on this site is licensed under the <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank">CC-BY license</a>.
                    </p>
                </div>
            </div>
        </div>
    </div>




    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    

    
    <script type="text/javascript" src="/js/highlight.pack.js"></script>
    <script type="text/javascript">
        hljs.initHighlightingOnLoad();
    </script>



</body>
</html>
