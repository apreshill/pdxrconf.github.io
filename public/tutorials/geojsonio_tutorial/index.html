<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>rOpenSci | geojsonio tutorial</title>

     
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>

    <script type="text/javascript">
    hljs.configure({languages: []});
    hljs.initHighlightingOnLoad();
    </script>
    <link rel="stylesheet" type="text/css" href="/css/style-new.css" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#4b8add">
<meta name="theme-color" content="#4b8add">


    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

    
    <div id="header">
        <div class="container">
            <div class="row center-m">
                
                <div class="col-1">
                    <a href="/index.html"><img src="/img/icon_lettering_white.svg" /></a>
                </div>
                
                
                <nav class="col-6 col-offset-4 top-3">
                    <ul class="row between">
						<li><a href="/about/">About</a></li>
                        <li><a href="/blog/">Blog</a></li>
                        <li><a href="/packages/">Packages</a></li>
                        <li><a href="/community/">Community</a></li>
                        <li><a href="http://discuss.ropensci.org/" target="_blank">Discuss</a></li>

                    </ul>
                </nav>
                
            </div>
        </div>
    </div>



    <article>
        <div class="container top-20">
            
            <div class="row centered">
                
                <div class="col-7 bottom-20 maintext">
                    <h1>geojsonio tutorial</h1>
                    <br>
                    <h4><small style="color:grey">for v0.4.2</small></h4>
                    <br>

                    <article>
                    

<p><code>geojsonio</code> converts geographic data to geojson and topojson formats. Nothing else. We hope to do this one job very well, and handle all reasonable use cases.</p>

<p>Functions in this package are organized first around what you&rsquo;re working with or want to get, geojson or topojson, then convert to or read from various formats:</p>

<ul>
<li><code>geojson_list()</code> - convert to geojson as R list format</li>
<li><code>geojson_json()</code> - convert to geojson as json</li>
<li><code>geojson_sp()</code> - convert output of <code>geojson_list()</code> or <code>geojson_json()</code> to spatial objects</li>
<li><code>geojson_read()</code>/<code>topojson_read()</code> - read a geojson/topojson file from file path or URL</li>
<li><code>geojson_write()</code>/<code>topojson_write()</code> - write a geojson/topojson file locally</li>
</ul>

<p>Each of the above functions have methods for various objects/classes, including <code>numeric</code>, <code>data.frame</code>, <code>list</code>, <code>SpatialPolygons</code>, <code>SpatialLines</code>, <code>SpatialPoints</code>, etc.</p>

<p>Additional functions:</p>

<ul>
<li><code>map_gist()</code> - push up a geojson or topojson file as a GitHub gist (renders as an interactive map) - See the <em>maps with geojsonio</em> vignette.</li>
<li><code>map_leaf()</code> - create a local interactive map with the <code>leaflet</code> package - See the <em>maps with geojsonio</em> vignette.</li>
</ul>

<h3 id="installation">Installation</h3>

<p>Stable version from CRAN</p>

<pre><code class="language-r">install.packages(&quot;geojsonio&quot;)
</code></pre>

<p>Development version from GitHub</p>

<pre><code class="language-r">if (!require(&quot;devtools&quot;)) install.packages(&quot;devtools&quot;)
devtools::install_github(&quot;ropensci/geojsonio&quot;)
</code></pre>

<pre><code class="language-r">library(&quot;geojsonio&quot;)
</code></pre>

<h3 id="geojson">GeoJSON</h3>

<h4 id="convert-various-formats-to-geojson">Convert various formats to geojson</h4>

<p>From a <code>numeric</code> vector of length 2</p>

<p>as <em>json</em></p>

<pre><code class="language-r">geojson_json(c(32.45, -99.74))
#&gt; {&quot;type&quot;:&quot;FeatureCollection&quot;,&quot;features&quot;:[{&quot;type&quot;:&quot;Feature&quot;,&quot;geometry&quot;:{&quot;type&quot;:&quot;Point&quot;,&quot;coordinates&quot;:[32.45,-99.74]},&quot;properties&quot;:{}}]}
</code></pre>

<p>as a <strong>list</strong></p>

<pre><code class="language-r">geojson_list(c(32.45, -99.74))
#&gt; $type
#&gt; [1] &quot;FeatureCollection&quot;
#&gt;
#&gt; $features
#&gt; $features[[1]]
#&gt; $features[[1]]$type
#&gt; [1] &quot;Feature&quot;
#&gt;
#&gt; $features[[1]]$geometry
#&gt; $features[[1]]$geometry$type
...
</code></pre>

<p>From a <code>data.frame</code></p>

<p>as <strong>json</strong></p>

<pre><code class="language-r">library('maps')
data(us.cities)
geojson_json(us.cities[1:2, ], lat = 'lat', lon = 'long')
#&gt; {&quot;type&quot;:&quot;FeatureCollection&quot;,&quot;features&quot;:[{&quot;type&quot;:&quot;Feature&quot;,&quot;geometry&quot;:{&quot;type&quot;:&quot;Point&quot;,&quot;coordinates&quot;:[-99.74,32.45]},&quot;properties&quot;:{&quot;name&quot;:&quot;Abilene TX&quot;,&quot;country.etc&quot;:&quot;TX&quot;,&quot;pop&quot;:&quot;113888&quot;,&quot;capital&quot;:&quot;0&quot;}},{&quot;type&quot;:&quot;Feature&quot;,&quot;geometry&quot;:{&quot;type&quot;:&quot;Point&quot;,&quot;coordinates&quot;:[-81.52,41.08]},&quot;properties&quot;:{&quot;name&quot;:&quot;Akron OH&quot;,&quot;country.etc&quot;:&quot;OH&quot;,&quot;pop&quot;:&quot;206634&quot;,&quot;capital&quot;:&quot;0&quot;}}]}
</code></pre>

<p>as a <strong>list</strong></p>

<pre><code class="language-r">geojson_list(us.cities[1:2, ], lat = 'lat', lon = 'long')
#&gt; $type
#&gt; [1] &quot;FeatureCollection&quot;
#&gt;
#&gt; $features
#&gt; $features[[1]]
#&gt; $features[[1]]$type
#&gt; [1] &quot;Feature&quot;
#&gt;
#&gt; $features[[1]]$geometry
#&gt; $features[[1]]$geometry$type
...
</code></pre>

<p>From <code>SpatialPolygons</code> class</p>

<pre><code class="language-r">library('sp')
poly1 &lt;- Polygons(list(Polygon(cbind(c(-100,-90,-85,-100),
  c(40,50,45,40)))), &quot;1&quot;)
poly2 &lt;- Polygons(list(Polygon(cbind(c(-90,-80,-75,-90),
  c(30,40,35,30)))), &quot;2&quot;)
sp_poly &lt;- SpatialPolygons(list(poly1, poly2), 1:2)
</code></pre>

<p>to <strong>json</strong></p>

<pre><code class="language-r">geojson_json(sp_poly)
#&gt; {
#&gt; &quot;type&quot;: &quot;FeatureCollection&quot;,
#&gt; &quot;features&quot;: [
#&gt; { &quot;type&quot;: &quot;Feature&quot;, &quot;id&quot;: 1, &quot;properties&quot;: { &quot;dummy&quot;: 0.0 }, &quot;geometry&quot;: { &quot;type&quot;: &quot;Polygon&quot;, &quot;coordinates&quot;: [ [ [ -100.0, 40.0 ], [ -90.0, 50.0 ], [ -85.0, 45.0 ], [ -100.0, 40.0 ] ] ] } },
#&gt; { &quot;type&quot;: &quot;Feature&quot;, &quot;id&quot;: 2, &quot;properties&quot;: { &quot;dummy&quot;: 0.0 }, &quot;geometry&quot;: { &quot;type&quot;: &quot;Polygon&quot;, &quot;coordinates&quot;: [ [ [ -90.0, 30.0 ], [ -80.0, 40.0 ], [ -75.0, 35.0 ], [ -90.0, 30.0 ] ] ] } }
#&gt; ]
#&gt; }
#&gt;
</code></pre>

<p>to a <strong>list</strong></p>

<pre><code class="language-r">geojson_list(sp_poly)
#&gt; $type
#&gt; [1] &quot;FeatureCollection&quot;
#&gt;
#&gt; $features
#&gt; $features[[1]]
#&gt; $features[[1]]$type
#&gt; [1] &quot;Feature&quot;
#&gt;
#&gt; $features[[1]]$id
#&gt; [1] 1
...
</code></pre>

<p>From <code>SpatialPoints</code> class</p>

<pre><code class="language-r">x &lt;- c(1, 2, 3, 4, 5)
y &lt;- c(3, 2, 5, 1, 4)
s &lt;- SpatialPoints(cbind(x, y))
</code></pre>

<p>to <strong>json</strong></p>

<pre><code class="language-r">geojson_json(s)
#&gt; {
#&gt; &quot;type&quot;: &quot;FeatureCollection&quot;,
#&gt; &quot;features&quot;: [
#&gt; { &quot;type&quot;: &quot;Feature&quot;, &quot;id&quot;: 1, &quot;properties&quot;: { &quot;dat&quot;: 1 }, &quot;geometry&quot;: { &quot;type&quot;: &quot;Point&quot;, &quot;coordinates&quot;: [ 1.0, 3.0 ] } },
#&gt; { &quot;type&quot;: &quot;Feature&quot;, &quot;id&quot;: 2, &quot;properties&quot;: { &quot;dat&quot;: 2 }, &quot;geometry&quot;: { &quot;type&quot;: &quot;Point&quot;, &quot;coordinates&quot;: [ 2.0, 2.0 ] } },
#&gt; { &quot;type&quot;: &quot;Feature&quot;, &quot;id&quot;: 3, &quot;properties&quot;: { &quot;dat&quot;: 3 }, &quot;geometry&quot;: { &quot;type&quot;: &quot;Point&quot;, &quot;coordinates&quot;: [ 3.0, 5.0 ] } },
#&gt; { &quot;type&quot;: &quot;Feature&quot;, &quot;id&quot;: 4, &quot;properties&quot;: { &quot;dat&quot;: 4 }, &quot;geometry&quot;: { &quot;type&quot;: &quot;Point&quot;, &quot;coordinates&quot;: [ 4.0, 1.0 ] } },
#&gt; { &quot;type&quot;: &quot;Feature&quot;, &quot;id&quot;: 5, &quot;properties&quot;: { &quot;dat&quot;: 5 }, &quot;geometry&quot;: { &quot;type&quot;: &quot;Point&quot;, &quot;coordinates&quot;: [ 5.0, 4.0 ] } }
#&gt; ]
#&gt; }
#&gt;
</code></pre>

<p>to a <strong>list</strong></p>

<pre><code class="language-r">geojson_list(s)
#&gt; $type
#&gt; [1] &quot;FeatureCollection&quot;
#&gt;
#&gt; $features
#&gt; $features[[1]]
#&gt; $features[[1]]$type
#&gt; [1] &quot;Feature&quot;
#&gt;
#&gt; $features[[1]]$id
#&gt; [1] 1
...
</code></pre>

<h4 id="write-geojson">Write geojson</h4>

<pre><code class="language-r">library('maps')
data(us.cities)
geojson_write(us.cities[1:2, ], lat = 'lat', lon = 'long')
#&gt; &lt;geojson-file&gt;
#&gt;   Path:       myfile.geojson
#&gt;   From class: data.frame
</code></pre>

<h4 id="read-geojson">Read geojson</h4>

<pre><code class="language-r">library(&quot;sp&quot;)
file &lt;- system.file(&quot;examples&quot;, &quot;california.geojson&quot;, package = &quot;geojsonio&quot;)
out &lt;- geojson_read(file, what = &quot;sp&quot;)
plot(out)
</code></pre>

<p><img src="/img/tutorial-images/geojsonio/unnamed-chunk-16-1.png" alt="plot of chunk unnamed-chunk-16" /></p>

<h3 id="topojson">Topojson</h3>

<p>In the current version of this package you can read topojson. Writing topojson was in this package, but is gone for now - will come back later as in interface to <a href="https://github.com/mbostock/topojson">topojson</a> via <a href="https://github.com/jeroenooms/V8">V8</a>.</p>

<p>Read from a file</p>

<pre><code class="language-r">file &lt;- system.file(&quot;examples&quot;, &quot;us_states.topojson&quot;, package = &quot;geojsonio&quot;)
out &lt;- topojson_read(file, verbose = FALSE)
summary(out)
#&gt; Object of class SpatialPolygonsDataFrame
#&gt; Coordinates:
#&gt;          min       max
#&gt; x -171.79111 -66.96466
#&gt; y   18.91619  71.35776
#&gt; Is projected: NA
#&gt; proj4string : [NA]
#&gt; Data attributes:
#&gt;           id
#&gt;  Alabama   : 1
#&gt;  Alaska    : 1
#&gt;  Arizona   : 1
#&gt;  Arkansas  : 1
#&gt;  California: 1
#&gt;  Colorado  : 1
#&gt;  (Other)   :45
</code></pre>

<p>Read from a URL</p>

<pre><code class="language-r">url &lt;- &quot;https://raw.githubusercontent.com/shawnbot/d3-cartogram/master/data/us-states.topojson&quot;
out &lt;- topojson_read(url, verbose = FALSE)
</code></pre>

<p>Or use <code>as.location()</code> first</p>

<pre><code class="language-r">(loc &lt;- as.location(file))
#&gt; &lt;location&gt;
#&gt;    Type:  file
#&gt;    Location:  /Library/Frameworks/R.framework/Versions/3.4/Resources/library/geojsonio/examples/us_states.topojson
out &lt;- topojson_read(loc, verbose = FALSE)
</code></pre>

<h3 id="citing">Citing</h3>

<blockquote>
<p>Scott Chamberlain and Andy Teucher (2017). geojsonio: Convert Data from and to &lsquo;geoJSON&rsquo; or &lsquo;topoJSON&rsquo;. R package version 0.4.2. <a href="https://cran.rstudio.com/package=geojsonio">https://cran.rstudio.com/package=geojsonio</a></p>
</blockquote>

<h3 id="license-and-bugs">License and bugs</h3>

<ul>
<li>License: <a href="http://opensource.org/licenses/MIT">MIT</a></li>
<li>Report bugs at <a href="https://github.com/ropensci/geojsonio/issues?state=open">our GitHub repo for geojsonio</a></li>
</ul>

<p><a href="#top">Back to top</a></p>

                    </article>
                </div>

                </div>
            </div>
        </div>
    </article>


    <div id="footer">
        <div class="container">
            <div class="row start">
                <div class="col-1 col-1-3 top-8">
                    <img src="/img/icon_short_white.svg" />
                </div>

                <div class="col-9 col-offset-2 top-10 bottom-8">
                    <div class="row between">
                        <div class="col-2 col-1-3">
                            <a href="http://github.com/ropensci" target="_blank"><div class="icon icon-github"></div></a>
                            <a href="http://twitter.com/ropensci" target="_blank"><div class="icon icon-twitter"></div></a>
                            <a href="http://vimeo.com/ropensci" target="_blank"><div class="icon icon-vimeo"></div></a>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Info</h5>
                                <li><a href="/about">Mission</a></li>
                                <li><a href="/about#team">Team</a></li>
                                <li><a href="/about#collaborators">Collaborators</a></li>
                                <li><a href="/careers">Careers</a></li>

                            </ul>
                        </div>

                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Work</h5>
                                <li><a href="/packages/">Packages</a></li>
                                <li><a href="/blog/">Blog</a></li>
                                <li><a href="/technotes/">Tech Notes</a></li>
                                <li><a href="/tutorials/">Tutorials</a></li>
                                <li><a href="/usecases/">Use Cases</a></li>
                                <li><a href="/resources/">More Resources</a></li>
                            </ul>
                        </div>
                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Participate</h5>
                                <li><a href="/contact.html">Contact us</a></li>
                                <li><a href="/community/">Community</a></li>
                                <li><a href="http://onboarding.ropensci.org/">Contribute software</a></li>
                                <li><a href="http://unconf17.ropensci.org/">Unconference</a></li>
                                <li><a href="/coc">Code of conduct</a></li>
                                <li><a href="/donate/">Donate</a></li>
                            </ul>
                        </div>
                        <div class="col-4 top-8 bottom-8">
                            <h5 class="bottom-2"></h5>

                            <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" target="_blank">NumFOCUS</a></p>
                            <a href="http://numfocus.org" target="_blank"><img src="img/numfocus.png"></a>
                            <br>

                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12 top-8 bottom-9 divider">
                    <p class="top-9">Except where otherwise noted, content on this site is licensed under the <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank">CC-BY license</a>.
                    </p>
                </div>
            </div>
        </div>
    </div>




    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    

    
    <script type="text/javascript" src="/js/highlight.pack.js"></script>
    <script type="text/javascript">
        hljs.initHighlightingOnLoad();
    </script>



</body>
</html>
