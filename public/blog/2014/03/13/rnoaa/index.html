<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>rOpenSci | rnoaa - Access to NOAA National Climatic Data Center data</title>

     
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>

    <script type="text/javascript">
    hljs.configure({languages: []});
    hljs.initHighlightingOnLoad();
    </script>
    <link rel="stylesheet" type="text/css" href="/css/style-new.css" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#4b8add">
<meta name="theme-color" content="#4b8add">


    <meta name="viewport" content="width=device-width, initial-scale=1">

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-462421-6', 'auto');
ga('send', 'pageview');
</script>

</head>
<body>

    
    <div id="header">
        <div class="container">
            <div class="row center-m">
                
                <div class="col-1">
                    <a href="/index.html"><img src="/img/icon_lettering_white.svg" /></a>
                </div>
                
                
                <nav class="col-6 col-offset-4 top-3">
                    <ul class="row between">
						<li><a href="/about/">About</a></li>
                        <li><a href="/blog/">Blog</a></li>
                        <li><a href="/packages/">Packages</a></li>
                        <li><a href="/community/">Community</a></li>
                        <li><a href="http://discuss.ropensci.org/" target="_blank">Discuss</a></li>

                    </ul>
                </nav>
                
            </div>
        </div>
    </div>


<article>
    <div class="container">
        <div class="row">
            <div class="col-2 sidebar top-5">
                <ul class="autoSidebar"></ul>
            </div> 
        </div>
        <div class="row">
            <div class="col-offset-2 col-8 top-20">
                <h2 style="text-align: center;">rnoaa - Access to NOAA National Climatic Data Center data</h2>
            </div>
        </div>
        <div class="row">
            <div class="col-offset-2 col-8 top-10 bottom-5" style="font-size: 20px; text-align: center;">
                <p class="authors" style="text-align: center;">
                    
                        
                          <a href="/about/#team"> Scott Chamberlain </a>&nbsp;
                        
                    
                </p>
                <br>
                <div style="font-size: 20px; color: #2C3E50; margin-top: 15px;">March 13, 2014</div>
            </div>
            <div class="col-offset-2 col-8 top-2">

                

                

<p>We recently pushed the first version of <code>rnoaa</code> to CRAN - version 0.1. NOAA has a lot of data, some of which is provided via the <a href="http://www.ncdc.noaa.gov/">National Climatic Data Center</a>, or NCDC. NOAA has provided access to NCDC climate data via a RESTful API - which is great because people like us can create clients for different programming languages to access their data programatically. If you are so inclined to write a bit of R code, this means you can get to NCDC data in the R environment where your workflow is reproducible, and you can connect data acquisition to a suite of tools for data manipulation (e.g., <code>plyr</code>), visualization (e.g., <code>ggplot2</code>), and statistics (e.g., <code>lme4</code>, etc.).</p>

<p>In addition to NCDC climate data, we have functions to access sea ice cover data via FTP, as well as the Severe Weather Data Inventory (SWDI) via API. We will continue to add in other data sources as we have time.</p>

<p>Some notes:</p>

<ul>
<li>The docs for the API are live at the <a href="http://www.ncdc.noaa.gov/cdo-web/webservices/v2">NOAA NCDC website</a></li>
<li>GCHN Daily data is also available via <a href="http://www.ncdc.noaa.gov/oa/climate/ghcn-daily/">FTP</a>.</li>
</ul>

<p>The below examples uses the development version, but most things can be done with the CRAN version. Here&rsquo;s a quick run down of some things you can do with <code>rnoaa</code>:</p>

<h2 id="first-install-and-load-taxize">First, install and load taxize</h2>

<pre><code class="language-r">install.packages(&quot;rnoaa&quot;)
</code></pre>

<p><strong>or development version from GitHub</strong></p>

<pre><code class="language-r">install.packages(&quot;devtools&quot;)
library(devtools)
install_github(&quot;rnoaa&quot;, &quot;ropensci&quot;)
library(rnoaa)
</code></pre>

<pre><code class="language-r">library(rnoaa)
</code></pre>

<h2 id="api-keys-authentication">API keys - authentication</h2>

<p>You&rsquo;ll need an API key to use this package (essentially a password). Go to the <a href="http://www.ncdc.noaa.gov/cdo-web/token">NCDC website</a> to get one. <em>You can&rsquo;t use this package without an API key.</em></p>

<p>Once you obtain a key, there are two ways to use it.</p>

<p>a) Pass it inline with each function call (somewhat cumbersome and wordy)</p>

<pre><code class="language-r">noaa(datasetid = &quot;PRECIP_HLY&quot;, locationid = &quot;ZIP:28801&quot;, datatypeid = &quot;HPCP&quot;,
    limit = 5, token = &quot;YOUR_TOKEN&quot;)
</code></pre>

<p>b) Alternatively, you might find it easier to set this as an option, either by adding this line to the top of a script or somewhere in your <code>.Rprofile</code> file</p>

<pre><code class="language-r">options(noaakey = &quot;KEY_EMAILED_TO_YOU&quot;)
</code></pre>

<p>Specifically use the name <em>noaakey</em> as the functions in the <code>rnoaa</code> package are looking for a key by that name.</p>

<h2 id="fetch-list-of-city-locations-in-descending-order">Fetch list of city locations in descending order</h2>

<pre><code class="language-r">noaa_locs(locationcategoryid = &quot;CITY&quot;, sortfield = &quot;name&quot;, sortorder = &quot;desc&quot;,
    limit = 5)
</code></pre>

<pre><code>## $meta
## $meta$totalCount
## [1] 1654
##
## $meta$pageCount
## [1] 5
##
## $meta$offset
## [1] 1
##
##
## $data
##              id           name datacoverage    mindate    maxdate
## 1 CITY:NL000012     Zwolle, NL       1.0000 1892-08-01 2014-01-31
## 2 CITY:SZ000007     Zurich, SZ       1.0000 1901-01-01 2014-03-11
## 3 CITY:NG000004     Zinder, NG       0.8678 1906-01-01 1980-12-31
## 4 CITY:UP000025  Zhytomyra, UP       0.9726 1938-01-01 2014-03-11
## 5 CITY:KZ000017 Zhezkazgan, KZ       0.9279 1948-03-01 2014-03-10
##
## attr(,&quot;class&quot;)
## [1] &quot;noaa_locs&quot;
</code></pre>

<h2 id="get-info-on-a-station-by-specifcying-a-dataset-locationtype-location-and-station">Get info on a station by specifcying a dataset, locationtype, location, and station</h2>

<pre><code class="language-r">noaa_stations(datasetid = &quot;GHCND&quot;, locationid = &quot;FIPS:12017&quot;, stationid = &quot;GHCND:USC00084289&quot;)
</code></pre>

<pre><code>## $meta
## NULL
##
## $data
##                  id                  name datacoverage    mindate
## 1 GHCND:USC00084289 INVERNESS 3 SE, FL US            1 1899-02-01
##      maxdate
## 1 2014-03-12
##
## attr(,&quot;class&quot;)
## [1] &quot;noaa_stations&quot;
</code></pre>

<h2 id="search-for-data">Search for data</h2>

<pre><code class="language-r">out &lt;- noaa(datasetid = &quot;GHCND&quot;, stationid = &quot;GHCND:USW00014895&quot;, datatypeid = &quot;PRCP&quot;,
    startdate = &quot;2010-05-01&quot;, enddate = &quot;2010-10-31&quot;)
</code></pre>

<h3 id="see-a-data-frame">See a data.frame</h3>

<pre><code class="language-r">head(out$data)
</code></pre>

<pre><code>##             station value attributes datatype                date
## 1 GHCND:USW00014895     0  T,,0,2400     PRCP 2010-05-01T00:00:00
## 2 GHCND:USW00014895    30   ,,0,2400     PRCP 2010-05-02T00:00:00
## 3 GHCND:USW00014895    51   ,,0,2400     PRCP 2010-05-03T00:00:00
## 4 GHCND:USW00014895     0  T,,0,2400     PRCP 2010-05-04T00:00:00
## 5 GHCND:USW00014895    18   ,,0,2400     PRCP 2010-05-05T00:00:00
## 6 GHCND:USW00014895    30   ,,0,2400     PRCP 2010-05-06T00:00:00
</code></pre>

<h2 id="get-table-of-all-datasets">Get table of all datasets</h2>

<pre><code class="language-r">res &lt;- noaa_datasets()
res$data
</code></pre>

<pre><code>##                     uid         id                    name datacoverage
## 1  gov.noaa.ncdc:C00040     ANNUAL        Annual Summaries         1.00
## 2  gov.noaa.ncdc:C00861      GHCND         Daily Summaries         1.00
## 3  gov.noaa.ncdc:C00841    GHCNDMS       Monthly Summaries         1.00
## 4  gov.noaa.ncdc:C00345    NEXRAD2         Nexrad Level II         0.95
## 5  gov.noaa.ncdc:C00708    NEXRAD3        Nexrad Level III         0.95
## 6  gov.noaa.ncdc:C00821 NORMAL_ANN Normals Annual/Seasonal         1.00
## 7  gov.noaa.ncdc:C00823 NORMAL_DLY           Normals Daily         1.00
## 8  gov.noaa.ncdc:C00824 NORMAL_HLY          Normals Hourly         1.00
## 9  gov.noaa.ncdc:C00822 NORMAL_MLY         Normals Monthly         1.00
## 10 gov.noaa.ncdc:C00505  PRECIP_15 Precipitation 15 Minute         0.25
## 11 gov.noaa.ncdc:C00313 PRECIP_HLY    Precipitation Hourly         1.00
##       mindate    maxdate
## 1  1831-02-01 2013-11-01
## 2  1763-01-01 2014-03-13
## 3  1763-01-01 2014-01-01
## 4  1991-06-05 2014-03-12
## 5  1994-05-20 2014-03-09
## 6  2010-01-01 2010-01-01
## 7  2010-01-01 2010-12-31
## 8  2010-01-01 2010-12-31
## 9  2010-01-01 2010-12-01
## 10 1970-05-12 2013-03-01
## 11 1900-01-01 2013-03-01
</code></pre>

<h2 id="get-data-category-data-and-metadata">Get data category data and metadata</h2>

<pre><code class="language-r">noaa_datacats(locationid = &quot;CITY:US390029&quot;, limit = 5)
</code></pre>

<pre><code>## $meta
## $meta$totalCount
## [1] 37
##
## $meta$pageCount
## [1] 5
##
## $meta$offset
## [1] 1
##
##
## $data
##        id                 name
## 1  ANNAGR  Annual Agricultural
## 2   ANNDD   Annual Degree Days
## 3 ANNPRCP Annual Precipitation
## 4 ANNTEMP   Annual Temperature
## 5   AUAGR  Autumn Agricultural
##
## attr(,&quot;class&quot;)
## [1] &quot;noaa_datacats&quot;
</code></pre>

<h2 id="plotting">Plotting</h2>

<h3 id="plot-data-super-simple-but-it-s-a-start">Plot data, super simple, but it&rsquo;s a start</h3>

<pre><code class="language-r">out &lt;- noaa(datasetid = &quot;GHCND&quot;, stationid = &quot;GHCND:USW00014895&quot;, datatypeid = &quot;PRCP&quot;,
    startdate = &quot;2010-05-01&quot;, enddate = &quot;2010-10-31&quot;, limit = 500)
noaa_plot(out, breaks = &quot;1 month&quot;, dateformat = &quot;%d/%m&quot;)
</code></pre>

<p><img src="/assets/blog-images/2014-03-13-rnoaa/unnamed-chunk-12.png" alt="" /></p>

<h3 id="more-plotting">More plotting</h3>

<p>You can pass many outputs from calls to the <code>noaa</code> function in to the <code>noaa_plot</code> function.</p>

<pre><code class="language-r">out1 &lt;- noaa(datasetid = &quot;GHCND&quot;, stationid = &quot;GHCND:USW00014895&quot;, datatypeid = &quot;PRCP&quot;,
    startdate = &quot;2010-03-01&quot;, enddate = &quot;2010-05-31&quot;, limit = 500)
out2 &lt;- noaa(datasetid = &quot;GHCND&quot;, stationid = &quot;GHCND:USW00014895&quot;, datatypeid = &quot;PRCP&quot;,
    startdate = &quot;2010-09-01&quot;, enddate = &quot;2010-10-31&quot;, limit = 500)
noaa_plot(out1, out2, breaks = &quot;45 days&quot;)
</code></pre>

<p><img src="/assets/blog-images/2014-03-13-rnoaa/unnamed-chunk-13.png" alt="" /></p>

<h2 id="sea-ice-cover-data">Sea ice cover data</h2>

<p>Get urls for ftp files</p>

<pre><code class="language-r">urls &lt;- sapply(seq(1979, 1990, 1), function(x) seaiceeurls(yr = x, mo = &quot;Feb&quot;,
    pole = &quot;S&quot;))
</code></pre>

<p>Call the <code>noaa_seaice</code> function on each url, which downloads shape files, and reads them in to R as <code>sp</code> objects</p>

<pre><code class="language-r">out &lt;- lapply(urls, noaa_seaice)
</code></pre>

<p>Then plot</p>

<pre><code class="language-r">library(plyr)
library(ggplot2)
names(out) &lt;- seq(1979, 1990, 1)
df &lt;- ldply(out)
ggplot(df, aes(long, lat, group = group)) + geom_polygon(fill = &quot;steelblue&quot;) +
    theme_ice() + facet_wrap(~.id)
</code></pre>

<p><img src="/assets/blog-images/2014-03-13-rnoaa/unnamed-chunk-16.png" alt="" /></p>

<h2 id="severe-weather-data">Severe weather data</h2>

<h3 id="search-for-nx3tvs-data-from-5-may-2006-to-6-may-2006">Search for nx3tvs data from 5 May 2006 to 6 May 2006</h3>

<pre><code class="language-r">noaa_swdi(dataset = &quot;nx3tvs&quot;, startdate = &quot;20060505&quot;, enddate = &quot;20060506&quot;,
    limit = 3)
</code></pre>

<pre><code>## $meta
## $meta$totalCount
## [1] 3
##
## $meta$totalTimeInSeconds
## [1] 0.004
##
##
## $data
##                  ztime wsr_id cell_id cell_type range azimuth max_shear
## 1 2006-05-05T00:05:50Z   KBMX      Q0       TVS     7     217       403
## 2 2006-05-05T00:10:02Z   KBMX      Q0       TVS     5     208       421
## 3 2006-05-05T00:12:34Z   KSJT      P2       TVS    49     106        17
##   mxdv
## 1  116
## 2  120
## 3   52
##
## $shape
##                                        shape
## 1 POINT (-86.8535716274277 33.0786326913943)
## 2 POINT (-86.8165772540846 33.0982820681588)
## 3 POINT (-99.5771091971025 31.1421609654838)
##
## attr(,&quot;class&quot;)
## [1] &quot;noaa_swdi&quot;
</code></pre>

<h3 id="get-all-plsr-within-the-bounding-box-91-30-90-31">Get all &lsquo;plsr&rsquo; within the bounding box (-91,30,-90,31)</h3>

<pre><code class="language-r">noaa_swdi(dataset = &quot;plsr&quot;, startdate = &quot;20060505&quot;, enddate = &quot;20060510&quot;, bbox = c(-91,
    30, -90, 31), limit = 3)
</code></pre>

<pre><code>## $meta
## $meta$totalCount
## [1] 3
##
## $meta$totalTimeInSeconds
## [1] 0.015
##
##
## $data
##                  ztime     id        event magnitude         city
## 1 2006-05-09T02:20:00Z 427540         HAIL         1 5 E KENTWOOD
## 2 2006-05-09T02:40:00Z 427536         HAIL         1 MOUNT HERMAN
## 3 2006-05-09T02:40:00Z 427537 TSTM WND DMG     -9999 MOUNT HERMAN
##       county state          source
## 1 TANGIPAHOA    LA TRAINED SPOTTER
## 2 WASHINGTON    LA TRAINED SPOTTER
## 3 WASHINGTON    LA TRAINED SPOTTER
##
## $shape
##                  shape
## 1 POINT (-90.43 30.93)
## 2  POINT (-90.3 30.96)
## 3  POINT (-90.3 30.96)
##
## attr(,&quot;class&quot;)
## [1] &quot;noaa_swdi&quot;
</code></pre>

<h3 id="get-all-nx3tvs-within-the-tile-102-1-32-6">Get all &lsquo;nx3tvs&rsquo; within the tile -102.<sup>1</sup>&frasl;<sub>32</sub>.6</h3>

<pre><code class="language-r">noaa_swdi(dataset = &quot;nx3tvs&quot;, startdate = &quot;20060506&quot;, enddate = &quot;20060507&quot;,
    tile = c(-102.12, 32.62), limit = 3)
</code></pre>

<pre><code>## $meta
## $meta$totalCount
## [1] 3
##
## $meta$totalTimeInSeconds
## [1] 0.021
##
##
## $data
##                  ztime wsr_id cell_id cell_type range azimuth max_shear
## 1 2006-05-06T00:41:29Z   KMAF      D9       TVS    37       6        39
## 2 2006-05-06T03:56:18Z   KMAF      N4       TVS    39       3        30
## 3 2006-05-06T03:56:18Z   KMAF      N4       TVS    42       4        20
##   mxdv
## 1   85
## 2   73
## 3   52
##
## $shape
##                                        shape
## 1 POINT (-102.112726356403 32.5574494581267)
## 2  POINT (-102.14873079873 32.5933553250156)
## 3 POINT (-102.131167022161 32.6426287452898)
##
## attr(,&quot;class&quot;)
## [1] &quot;noaa_swdi&quot;
</code></pre>

<h3 id="counts">Counts</h3>

<p>Get number of &lsquo;nx3tvs&rsquo; within 15 miles of latitude = 32.7 and longitude = -102.0</p>

<pre><code class="language-r">noaa_swdi(dataset = &quot;nx3tvs&quot;, startdate = &quot;20060505&quot;, enddate = &quot;20060516&quot;,
    radius = 15, center = c(-102, 32.7), stat = &quot;count&quot;)
</code></pre>

<pre><code>## $meta
## $meta$totalCount
## [1] 1
##
## $meta$totalTimeInSeconds
## [1] 0.02
##
##
## $data
## [1] &quot;37&quot;
##
## $shape
## data frame with 0 columns and 1 rows
##
## attr(,&quot;class&quot;)
## [1] &quot;noaa_swdi&quot;
</code></pre>

            </div>
            <br>
            <div class="col-offset-2 col-8 top-4 labels">
                
                    <a href="/tags/r"><span class="label">R</span></a>
                
                    <a href="/tags/api"><span class="label">API</span></a>
                
                    <a href="/tags/climate"><span class="label">climate</span></a>
                
            </div>

            
            
            <div class="col-offset-2 col-8 top-4">
              <div id="disqus_thread"></div>
                <div id="disqus_thread"></div>
                <script type="text/javascript">
                var disqus_shortname = 'ropenscience';
                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
                </script>
                <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            </div>
            
        </div>
        <br>
    </div>
</article>





    <div id="footer">
        <div class="container">
            <div class="row start">
                <div class="col-1 col-1-3 top-8">
                    <img src="/img/icon_short_white.svg" />
                </div>

                <div class="col-9 col-offset-2 top-10 bottom-8">
                    <div class="row between">
                        <div class="col-2 col-1-3">
                            <a href="http://github.com/ropensci" target="_blank"><div class="icon icon-github"></div></a>
                            <a href="http://twitter.com/ropensci" target="_blank"><div class="icon icon-twitter"></div></a>
                            <a href="http://vimeo.com/ropensci" target="_blank"><div class="icon icon-vimeo"></div></a>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Info</h5>
                                <li><a href="/about">Mission</a></li>
                                <li><a href="/about#team">Team</a></li>
                                <li><a href="/about#collaborators">Collaborators</a></li>
                                <li><a href="/careers">Careers</a></li>

                            </ul>
                        </div>

                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Work</h5>
                                <li><a href="/packages/">Packages</a></li>
                                <li><a href="/blog/">Blog</a></li>
                                <li><a href="/technotes/">Tech Notes</a></li>
                                <li><a href="/tutorials/">Tutorials</a></li>
                                <li><a href="/usecases/">Use Cases</a></li>
                                <li><a href="/resources/">More Resources</a></li>
                            </ul>
                        </div>
                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Participate</h5>
                                <li><a href="/contact.html">Contact us</a></li>
                                <li><a href="/community/">Community</a></li>
                                <li><a href="http://onboarding.ropensci.org/">Contribute software</a></li>
                                <li><a href="http://unconf17.ropensci.org/">Unconference</a></li>
                                <li><a href="/coc">Code of conduct</a></li>
                                <li><a href="/donate/">Donate</a></li>
                            </ul>
                        </div>
                        <div class="col-4 top-8 bottom-8">
                            <h5 class="bottom-2"></h5>

                            <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" target="_blank">NumFOCUS</a></p>
                            <a href="http://numfocus.org" target="_blank"><img src="img/numfocus.png"></a>
                            <br>

                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12 top-8 bottom-9 divider">
                    <p class="top-9">Except where otherwise noted, content on this site is licensed under the <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank">CC-BY license</a>.
                    </p>
                </div>
            </div>
        </div>
    </div>



</body>
</html>



