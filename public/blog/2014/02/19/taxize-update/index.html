<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>rOpenSci | New features in the most recent taxize update, v0.2</title>

     
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>

    <script type="text/javascript">
    hljs.configure({languages: []});
    hljs.initHighlightingOnLoad();
    </script>
    <link rel="stylesheet" type="text/css" href="/css/style-new.css" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#4b8add">
<meta name="theme-color" content="#4b8add">


    <meta name="viewport" content="width=device-width, initial-scale=1">

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-462421-6', 'auto');
ga('send', 'pageview');
</script>

</head>
<body>

    
    <div id="header">
        <div class="container">
            <div class="row center-m">
                
                <div class="col-1">
                    <a href="/index.html"><img src="/img/icon_lettering_white.svg" /></a>
                </div>
                
                
                <nav class="col-6 col-offset-4 top-3">
                    <ul class="row between">
						<li><a href="/about/">About</a></li>
                        <li><a href="/blog/">Blog</a></li>
                        <li><a href="/packages/">Packages</a></li>
                        <li><a href="/community/">Community</a></li>
                        <li><a href="http://discuss.ropensci.org/" target="_blank">Discuss</a></li>

                    </ul>
                </nav>
                
            </div>
        </div>
    </div>


<article>
    <div class="container">
        <div class="row">
            <div class="col-2 sidebar top-5">
                <ul class="autoSidebar"></ul>
            </div> 
        </div>
        <div class="row">
            <div class="col-offset-2 col-8 top-20">
                <h2 style="text-align: center;">New features in the most recent taxize update, v0.2</h2>
            </div>
        </div>
        <div class="row">
            <div class="col-offset-2 col-8 top-10 bottom-5" style="font-size: 20px; text-align: center;">
                <p class="authors" style="text-align: center;">
                    
                        
                          <a href="/about/#team"> Scott Chamberlain </a>&nbsp;
                        
                    
                </p>
                <br>
                <div style="font-size: 20px; color: #2C3E50; margin-top: 15px;">February 19, 2014</div>
            </div>
            <div class="col-offset-2 col-8 top-2">

                

                

<p>We just released a new version of <code>taxize</code> - version 0.2.0. This release contains a number of new features, and bug fixes. Here is a run down of some of the changes:</p>

<h2 id="first-install-and-load-taxize">First, install and load taxize</h2>

<pre><code class="language-r">install.packages(&quot;rgbif&quot;)
</code></pre>

<pre><code class="language-r">library(taxize)
</code></pre>

<h2 id="new-things">New things</h2>

<h3 id="new-functions-class2tree">New functions: class2tree</h3>

<p>Sometimes you just want to have a visual of the taxonomic relationships among taxa. If you don&rsquo;t know how to build a molecular phylogeny, don&rsquo;t have time, or there just isn&rsquo;t molecular data, you can sorta build one using taxonomy. Building on our <code>classification</code> function, you can get a bunch of taxonomic hierarchies from the <code>classification</code> function, then pass them to the new function <code>class2tree</code>. Like so:</p>

<p>Define a species list</p>

<pre><code class="language-r">spnames &lt;- c(&quot;Latania lontaroides&quot;, &quot;Randia cubana&quot;, &quot;Blumea brevipes&quot;, &quot;Commelina erecta&quot;,
    &quot;Miconia pyramidalis&quot;, &quot;Aquilegia moorcroftiana&quot;, &quot;Acridocarpus austrocaledonicus&quot;,
    &quot;Vaccinium wrightii&quot;, &quot;Riocreuxia flanaganii&quot;, &quot;Macroditassa adnata&quot;, &quot;Acianthera ochreata&quot;,
    &quot;Spathodea campanulata&quot;, &quot;Leucadendron salicifolium&quot;, &quot;Habenaria fluminensis&quot;,
    &quot;Platostoma siamense&quot;, &quot;Bulbophyllum hoehnei&quot;, &quot;Aspidosperma polyneuron&quot;,
    &quot;Rhynchospora fascicularis&quot;, &quot;Sida lonchitis&quot;, &quot;Ardisia cymosa&quot;, &quot;Morinda brachycalyx&quot;,
    &quot;Tetrastigma hypoglaucum&quot;, &quot;Paphiopedilum vietnamense&quot;, &quot;Goodenia glabra&quot;)
</code></pre>

<p>Then collect taxonomic hierarchies for each taxon, and remove those with no results (those with no results are just <code>NA</code>) (I&rsquo;m setting <code>verbose=TRUE</code> to suppress messages for this example)</p>

<pre><code class="language-r">out &lt;- classification(spnames, db = &quot;ncbi&quot;, verbose = FALSE)
out &lt;- out[!is.na(out)]
</code></pre>

<p>Use <code>class2tree</code> to automagically convert the list of hierarchies to a ape <code>phylo</code> object, then plot</p>

<pre><code class="language-r">tr &lt;- class2tree(out)
plot(tr, no.margin = TRUE)
</code></pre>

<p><img src="/assets/blog-images/2014-02-19-taxize-update/unnamed-chunk-5.png" alt="" /></p>

<h3 id="new-functions-get-gbfid">New functions: get_gbfid</h3>

<p>The Global Biodiversity Information Facility (GBIF) has their own taxonomy. They allow programmatic access to their taxonomy, see <a href="http://www.gbif.org/developer/summary">here</a> for details. Also see our <a href="https://github.com/ropensci/rgbif"><code>rgbif</code> package</a> that wraps all their API services.</p>

<p>We added a similar function to our <code>get_tsn</code>, <code>get_uid</code>, etc. functions for various taxonomies, but for the GBIF taxonomy. Here are some example calls:</p>

<pre><code class="language-r">get_gbifid(sciname = &quot;Poa annua&quot;, verbose = FALSE)
</code></pre>

<pre><code>##         1
## &quot;2704179&quot;
## attr(,&quot;class&quot;)
## [1] &quot;gbifid&quot;
</code></pre>

<pre><code class="language-r">get_gbifid(sciname = &quot;Pinus contorta&quot;, verbose = FALSE)
</code></pre>

<pre><code>##         1
## &quot;5285750&quot;
## attr(,&quot;class&quot;)
## [1] &quot;gbifid&quot;
</code></pre>

<pre><code class="language-r">get_gbifid(sciname = &quot;Puma concolor&quot;, verbose = FALSE)
</code></pre>

<pre><code>##         1
## &quot;2435099&quot;
## attr(,&quot;class&quot;)
## [1] &quot;gbifid&quot;
</code></pre>

<pre><code class="language-r">get_gbifid(c(&quot;Poa annua&quot;, &quot;Pinus contorta&quot;), verbose = FALSE)
</code></pre>

<pre><code>## [1] &quot;2704179&quot; &quot;5285750&quot;
## attr(,&quot;class&quot;)
## [1] &quot;gbifid&quot;
</code></pre>

<p>This could be useful if you for example, want to have the exact IDs GBIF uses for your set of species to use at some later point - and at that later point you could use our <code>rgbif</code> package and search for biodiversity occurrence data with the IDs you collected. For example:</p>

<pre><code class="language-r">library(rgbif)
(id &lt;- get_gbifid(sciname = &quot;Puma concolor&quot;, verbose = FALSE))
</code></pre>

<pre><code>##         1
## &quot;2435099&quot;
## attr(,&quot;class&quot;)
## [1] &quot;gbifid&quot;
</code></pre>

<pre><code class="language-r">occ_search(id)
</code></pre>

<pre><code>## $meta
## $meta$offset
## [1] 0
##
## $meta$limit
## [1] 20
##
## $meta$endOfRecords
## [1] FALSE
##
## $meta$count
## [1] 8392
##
##
## $hierarchy
## $hierarchy[[1]]
##            name     key    rank
## 1      Animalia       1 kingdom
## 2      Chordata      44  phylum
## 3      Mammalia     359   clazz
## 4     Carnivora     732   order
## 5       Felidae    9703  family
## 6          Puma 2435098   genus
## 7 Puma concolor 2435099 species
##
##
## $data
##             name       key longitude latitude
## 1  Puma concolor 866527350   -110.58    31.85
## 2  Puma concolor 866545169   -103.60    29.16
## 3  Puma concolor 866495627   -106.39    35.13
## 4  Puma concolor 866498665    -89.43    20.31
## 5  Puma concolor 866508658   -105.04    19.47
## 6  Puma concolor 866523280   -118.24    34.06
## 7  Puma concolor 866526517   -104.45    29.92
## 8  Puma concolor 866530535   -118.30    34.07
## 9  Puma concolor 860790696    -77.35     2.77
## 10 Puma concolor        NA        NA       NA
## 11 Puma concolor        NA        NA       NA
## 12 Puma concolor        NA        NA       NA
## 13 Puma concolor 866525528   -123.83    40.13
## 14 Puma concolor 866531329   -123.83    40.13
## 15 Puma concolor 866519497   -118.90    34.54
## 16 Puma concolor 866601452   -122.52    38.45
## 17 Puma concolor 866547065   -110.30    41.88
## 18 Puma concolor 866562541   -123.83    40.13
## 19 Puma concolor 866562081   -123.82    40.13
## 20 Puma concolor 866558112   -103.13    29.65
</code></pre>

<p>In addition, <code>get_ids</code> now accepts &lsquo;gbif&rsquo; as an option for the <code>db</code> parameter - <code>get_ids</code> is our omnibus function to search for taxon ids across all sources available in <code>taxize</code>.</p>

<h3 id="new-functions-rbind-and-cbind-for-classification">New functions: rbind and cbind for classification</h3>

<p>The <code>classification</code> function gives back taxonomic hierarchies from a variety of sources, including NCBI, ITIS, Catalogue of Life, Tropicos, EOL, and now GBIF. If you pass in many taxonomic IDs or taxon names, you get back a list of hierarchies. We added two functions to make it convenient to mash these outputs together, <code>rbind</code> for basically stacking hierarchies on top of one another, and <code>cbind</code> for making a width-wise combination of hierarchies. Our <code>cbind</code> doesn&rsquo;t do exactly what your used to cbind doing for data.frame&rsquo;s. The examples below are based on some changed code since the newest CRAN version, but you can install the development version with the changes from Github (see <a href="https://github.com/ropensci/taxize#install-taxize">here</a> for instructions).</p>

<p>From a call to <code>get_ids</code>, then passed on to <code>classification</code>, we get a object of class <code>classification_ids</code></p>

<pre><code class="language-r">(out &lt;- get_ids(names = &quot;Puma concolor&quot;, db = c(&quot;ncbi&quot;, &quot;gbif&quot;), verbose = FALSE))
</code></pre>

<pre><code>## $ncbi
## Puma concolor
##        &quot;9696&quot;
## attr(,&quot;match&quot;)
## [1] &quot;found&quot;
## attr(,&quot;class&quot;)
## [1] &quot;uid&quot;
##
## $gbif
## Puma concolor
##     &quot;2435099&quot;
## attr(,&quot;class&quot;)
## [1] &quot;gbifid&quot;
##
## attr(,&quot;class&quot;)
## [1] &quot;ids&quot;
</code></pre>

<pre><code class="language-r">(cl &lt;- classification(out, verbose = FALSE))
</code></pre>

<pre><code>## $ncbi
## $`9696`
##                    name         rank
## 1    cellular organisms      no rank
## 2             Eukaryota superkingdom
## 3          Opisthokonta      no rank
## 4               Metazoa      kingdom
## 5             Eumetazoa      no rank
## 6             Bilateria      no rank
## 7         Deuterostomia      no rank
## 8              Chordata       phylum
## 9              Craniata    subphylum
## 10           Vertebrata      no rank
## 11        Gnathostomata   superclass
## 12           Teleostomi      no rank
## 13         Euteleostomi      no rank
## 14        Sarcopterygii      no rank
## 15 Dipnotetrapodomorpha      no rank
## 16            Tetrapoda      no rank
## 17              Amniota      no rank
## 18             Mammalia        class
## 19               Theria      no rank
## 20             Eutheria      no rank
## 21        Boreoeutheria      no rank
## 22       Laurasiatheria   superorder
## 23            Carnivora        order
## 24           Feliformia     suborder
## 25              Felidae       family
## 26              Felinae    subfamily
## 27                 Puma        genus
## 28        Puma concolor      species
##
## attr(,&quot;class&quot;)
## [1] &quot;classification&quot;
## attr(,&quot;db&quot;)
## [1] &quot;ncbi&quot;
##
## $gbif
## $`2435099`
##            name    rank
## 1      Animalia kingdom
## 2      Chordata  phylum
## 3      Mammalia   clazz
## 4     Carnivora   order
## 5       Felidae  family
## 6          Puma   genus
## 7 Puma concolor species
##
## attr(,&quot;class&quot;)
## [1] &quot;classification&quot;
##
## attr(,&quot;class&quot;)
## [1] &quot;classification_ids&quot;
</code></pre>

<p>We can bind width-wise</p>

<pre><code class="language-r">cbind(cl)
</code></pre>

<pre><code>##              no rank superkingdom  kingdom   phylum subphylum
## 1 cellular organisms    Eukaryota  Metazoa Chordata  Craniata
## 2               &lt;NA&gt;         &lt;NA&gt; Animalia Chordata      &lt;NA&gt;
##      superclass    class     superorder     order   suborder  family
## 1 Gnathostomata Mammalia Laurasiatheria Carnivora Feliformia Felidae
## 2          &lt;NA&gt;     &lt;NA&gt;           &lt;NA&gt; Carnivora       &lt;NA&gt; Felidae
##   subfamily genus       species    clazz
## 1   Felinae  Puma Puma concolor     &lt;NA&gt;
## 2      &lt;NA&gt;  Puma Puma concolor Mammalia
</code></pre>

<p>Or bind length-wise</p>

<pre><code class="language-r">rbind(cl)
</code></pre>

<pre><code>##    source taxonid                 name         rank
## 1    ncbi    9696   cellular organisms      no rank
## 2    ncbi    9696            Eukaryota superkingdom
## 3    ncbi    9696         Opisthokonta      no rank
## 4    ncbi    9696              Metazoa      kingdom
## 5    ncbi    9696            Eumetazoa      no rank
## 6    ncbi    9696            Bilateria      no rank
## 7    ncbi    9696        Deuterostomia      no rank
## 8    ncbi    9696             Chordata       phylum
## 9    ncbi    9696             Craniata    subphylum
## 10   ncbi    9696           Vertebrata      no rank
## 11   ncbi    9696        Gnathostomata   superclass
## 12   ncbi    9696           Teleostomi      no rank
## 13   ncbi    9696         Euteleostomi      no rank
## 14   ncbi    9696        Sarcopterygii      no rank
## 15   ncbi    9696 Dipnotetrapodomorpha      no rank
## 16   ncbi    9696            Tetrapoda      no rank
## 17   ncbi    9696              Amniota      no rank
## 18   ncbi    9696             Mammalia        class
## 19   ncbi    9696               Theria      no rank
## 20   ncbi    9696             Eutheria      no rank
## 21   ncbi    9696        Boreoeutheria      no rank
## 22   ncbi    9696       Laurasiatheria   superorder
## 23   ncbi    9696            Carnivora        order
## 24   ncbi    9696           Feliformia     suborder
## 25   ncbi    9696              Felidae       family
## 26   ncbi    9696              Felinae    subfamily
## 27   ncbi    9696                 Puma        genus
## 28   ncbi    9696        Puma concolor      species
## 29   gbif 2435099             Animalia      kingdom
## 30   gbif 2435099             Chordata       phylum
## 31   gbif 2435099             Mammalia        clazz
## 32   gbif 2435099            Carnivora        order
## 33   gbif 2435099              Felidae       family
## 34   gbif 2435099                 Puma        genus
## 35   gbif 2435099        Puma concolor      species
</code></pre>

<p>Or we can do the same thing on the class <code>classification</code> that we get back from a call to one of <code>get_colid</code>, <code>get_tsn</code>, <code>get_eolid</code>, <code>get_tpsid</code>, <code>get_gbifid</code>, or <code>get_uid</code>, that&rsquo;s then passed on to <code>classification</code></p>

<pre><code class="language-r">cl_col &lt;- classification(get_colid(c(&quot;Puma concolor&quot;, &quot;Accipiter striatus&quot;),
    verbose = FALSE))
rbind(cl_col)
</code></pre>

<pre><code>##    source  taxonid            name    rank
## 1     col  6862841        Animalia Kingdom
## 2     col  6862841        Chordata  Phylum
## 3     col  6862841        Mammalia   Class
## 4     col  6862841       Carnivora   Order
## 5     col  6862841         Felidae  Family
## 6     col  6862841            Puma   Genus
## 7     col 11909487        Animalia Kingdom
## 8     col 11909487        Chordata  Phylum
## 9     col 11909487            Aves   Class
## 10    col 11909487 Accipitriformes   Order
## 11    col 11909487    Accipitridae  Family
## 12    col 11909487       Accipiter   Genus
</code></pre>

<pre><code class="language-r">cbind(cl_col)
</code></pre>

<pre><code>##    kingdom   phylum    class           order       family     genus
## 1 Animalia Chordata Mammalia       Carnivora      Felidae      Puma
## 2 Animalia Chordata     Aves Accipitriformes Accipitridae Accipiter
</code></pre>

<p>Read more about changes in v0.2 <a href="https://github.com/ropensci/taxize/releases/tag/v0.2.0">at Github</a>.</p>

            </div>
            <br>
            <div class="col-offset-2 col-8 top-4 labels">
                
                    <a href="/tags/r"><span class="label">R</span></a>
                
                    <a href="/tags/api"><span class="label">API</span></a>
                
                    <a href="/tags/taxize"><span class="label">taxize</span></a>
                
                    <a href="/tags/taxonomy"><span class="label">taxonomy</span></a>
                
            </div>

            
            
            <div class="col-offset-2 col-8 top-4">
              <div id="disqus_thread"></div>
                <div id="disqus_thread"></div>
                <script type="text/javascript">
                var disqus_shortname = 'ropenscience';
                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
                </script>
                <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            </div>
            
        </div>
        <br>
    </div>
</article>





    <div id="footer">
        <div class="container">
            <div class="row start">
                <div class="col-1 col-1-3 top-8">
                    <img src="/img/icon_short_white.svg" />
                </div>

                <div class="col-9 col-offset-2 top-10 bottom-8">
                    <div class="row between">
                        <div class="col-2 col-1-3">
                            <a href="http://github.com/ropensci" target="_blank"><div class="icon icon-github"></div></a>
                            <a href="http://twitter.com/ropensci" target="_blank"><div class="icon icon-twitter"></div></a>
                            <a href="http://vimeo.com/ropensci" target="_blank"><div class="icon icon-vimeo"></div></a>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Info</h5>
                                <li><a href="/about">Mission</a></li>
                                <li><a href="/about#team">Team</a></li>
                                <li><a href="/about#collaborators">Collaborators</a></li>
                                <li><a href="/careers">Careers</a></li>

                            </ul>
                        </div>

                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Work</h5>
                                <li><a href="/packages/">Packages</a></li>
                                <li><a href="/blog/">Blog</a></li>
                                <li><a href="/technotes/">Tech Notes</a></li>
                                <li><a href="/tutorials/">Tutorials</a></li>
                                <li><a href="/usecases/">Use Cases</a></li>
                                <li><a href="/resources/">More Resources</a></li>
                            </ul>
                        </div>
                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Participate</h5>
                                <li><a href="/contact.html">Contact us</a></li>
                                <li><a href="/community/">Community</a></li>
                                <li><a href="http://onboarding.ropensci.org/">Contribute software</a></li>
                                <li><a href="http://unconf17.ropensci.org/">Unconference</a></li>
                                <li><a href="/coc">Code of conduct</a></li>
                                <li><a href="/donate/">Donate</a></li>
                            </ul>
                        </div>
                        <div class="col-4 top-8 bottom-8">
                            <h5 class="bottom-2"></h5>

                            <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" target="_blank">NumFOCUS</a></p>
                            <a href="http://numfocus.org" target="_blank"><img src="img/numfocus.png"></a>
                            <br>

                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12 top-8 bottom-9 divider">
                    <p class="top-9">Except where otherwise noted, content on this site is licensed under the <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank">CC-BY license</a>.
                    </p>
                </div>
            </div>
        </div>
    </div>



</body>
</html>



