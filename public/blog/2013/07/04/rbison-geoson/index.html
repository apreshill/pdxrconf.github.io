<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>rOpenSci | From occurrence data to interactive maps on the web</title>

     
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>

    <script type="text/javascript">
    hljs.configure({languages: []});
    hljs.initHighlightingOnLoad();
    </script>
    <link rel="stylesheet" type="text/css" href="/css/style-new.css" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#4b8add">
<meta name="theme-color" content="#4b8add">


    <meta name="viewport" content="width=device-width, initial-scale=1">

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-462421-6', 'auto');
ga('send', 'pageview');
</script>

</head>
<body>

    
    <div id="header">
        <div class="container">
            <div class="row center-m">
                
                <div class="col-1">
                    <a href="/index.html"><img src="/img/icon_lettering_white.svg" /></a>
                </div>
                
                
                <nav class="col-6 col-offset-4 top-3">
                    <ul class="row between">
						<li><a href="/about/">About</a></li>
                        <li><a href="/blog/">Blog</a></li>
                        <li><a href="/packages/">Packages</a></li>
                        <li><a href="/community/">Community</a></li>
                        <li><a href="http://discuss.ropensci.org/" target="_blank">Discuss</a></li>

                    </ul>
                </nav>
                
            </div>
        </div>
    </div>


<article>
    <div class="container">
        <div class="row">
            <div class="col-2 sidebar top-5">
                <ul class="autoSidebar"></ul>
            </div> 
        </div>
        <div class="row">
            <div class="col-offset-2 col-8 top-20">
                <h2 style="text-align: center;">From occurrence data to interactive maps on the web</h2>
            </div>
        </div>
        <div class="row">
            <div class="col-offset-2 col-8 top-10 bottom-5" style="font-size: 20px; text-align: center;">
                <p class="authors" style="text-align: center;">
                    
                        
                          <a href="/about/#team"> Scott Chamberlain </a>&nbsp;
                        
                    
                </p>
                <br>
                <div style="font-size: 20px; color: #2C3E50; margin-top: 15px;">July 4, 2013</div>
            </div>
            <div class="col-offset-2 col-8 top-2">

                

                

<p>We have a number of packages for getting species occurrence data: <a href="https://github.com/ropensci/rgbif">rgbif</a> and <a href="https://github.com/ropensci/rbison">rbison</a>. The power of R is that you can pull down this occurrence data, manipulate the data, do some analyses, and visualize the data - all in one open source framework.</p>

<p>However, when dealing with occurrence data on maps, it is often useful to be able to interact with the visualization. <a href="https://github.com/">Github</a>, a code hosting and collaboration site, now renders a particular type of map file format as an interactive map. This file format is called <code>.geojson</code>. Here is an example of an interactive map hosted on Github, embedded here:</p>

<p><br></p>

<script src="https://embed.github.com/view/geojson/geobabbler/geodata/master/geojson/leonardtown_bldgs.geojson"></script>

<p><br></p>

<p>Note that you can go full screen on these maps too. Check it out <a href="https://render.github.com/view/geojson?url=https://raw.github.com/geobabbler/geodata/master/geojson/leonardtown_bldgs.geojson">here</a>.</p>

<p>To demonstrate how easy it can be to do this on your own, the following is a small demo of searching for occurrence data, converting to geojson, and pushing up to Github.</p>

<p><br></p>

<h3 id="install-rbison-from-github">Install rbison from Github</h3>

<pre><code class="language-r"># install_github('rbison', 'ropensci') # uncomment if you haven't
# installed it
library(rbison)
</code></pre>

<hr />

<h3 id="step-1-seach-for-some-occurrence-data">Step 1: Seach for some occurrence data</h3>

<p>Search for data on the bison.</p>

<pre><code class="language-r">dat &lt;- bison(species = &quot;Bison bison&quot;, count = 500)
</code></pre>

<p>Take a peak at the data just to make sure we have some occurrence data</p>

<pre><code class="language-r">head(bison_data(dat, &quot;data_df&quot;))
</code></pre>

<pre><code>         id        name longitude latitude
1 686467428 Bison bison    -118.8    43.31
2 656975776 Bison bison    -118.8    43.31
3 785794942 Bison bison    -111.1    44.66
4 687029742 Bison bison    -110.7    44.46
5 687027385 Bison bison    -110.7    44.61
6 773434631 Bison bison    -110.6    44.83
                                      provider
1  University of Kansas Biodiversity Institute
2 Natural History Museum of Los Angeles County
3               Museum of Southwestern Biology
4                              iNaturalist.org
5                              iNaturalist.org
6                              iNaturalist.org
</code></pre>

<hr />

<h3 id="step-2-convert-the-data-to-geojson-format">Step 2: Convert the data to geojson format</h3>

<p>Before this step I made a folder called <em>mygeojson</em> to write data in to, which will also be a Github repository.</p>

<p>In this example, we are using the option method=&lsquo;web&rsquo; in the <code>togeojson</code> function, but we could also use method=&lsquo;local&rsquo; which wouldl use the <code>rgdal</code> package to convert to a geojson file format locally. Specifying method=&lsquo;web&rsquo; uses the <a href="http://ogre.adc4gis.com/">Ogre web client</a>.</p>

<pre><code class="language-r">dat_df &lt;- bison_data(dat, &quot;data_df&quot;)
write.csv(dat_df, &quot;~/github/sac/mygeojson/bison_bison.csv&quot;)
file &lt;- &quot;~/github/sac/mygeojson/bison_bison.csv&quot;
togeojson(file, method = &quot;web&quot;, destpath = &quot;~/github/sac/mygeojson/&quot;, outfilename = &quot;bison_bison&quot;)
</code></pre>

<hr />

<h3 id="step-3-go-to-your-terminal-or-git-gui-and-push-up-the-new-geojson-file">Step 3: Go to your terminal or git GUI and push up the new geojson file</h3>

<pre><code class="language-bash">cd ~/github/sac/mygeojson/
git init
git add .
git commit -a -m 'my first geojson file'
git remote add origin https://github.com/sckott/mygeojson.git
git push origin master
</code></pre>

<p><br></p>

<p>Then go to your new repo on Github and click on the <code>.geojson</code> file you created, and you&rsquo;ll get a map. You can share this with others, and even embed the interactive map in other web sites, as you can see below. Try clicking on the points - they give metadata associated with each point.</p>

<p><br></p>

<script src="https://embed.github.com/view/geojson/sckott/mygeojson/master/bison_bison.geojson"></script>

<p><br></p>

<p>Check out the full screen version <a href="https://render.github.com/view/geojson?url=https://raw.github.com/sckott/mygeojson/master/bison_bison.geojson">here</a>.</p>

<hr />

<p>It is as easy as that! We&rsquo;ll add this functionality into our <code>rgbif</code> package as well.</p>

<p>Further reading:</p>

<ul>
<li><a href="http://blog.geomusings.com/2013/06/18/geojson-on-github-now-what/">http://blog.geomusings.com/2013/06/18/geojson-on-github-now-what/</a></li>
<li>I wrote earlier about this topic on my own blog <a href="http://sckott.github.io/2013/06/geojson/">here</a>.</li>
<li>Github help for geojson file <a href="https://help.github.com/articles/mapping-geojson-files-on-github#embedding-your-map-elsewhere">https://help.github.com/articles/mapping-geojson-files-on-github#embedding-your-map-elsewhere</a></li>
</ul>

            </div>
            <br>
            <div class="col-offset-2 col-8 top-4 labels">
                
                    <a href="/tags/r"><span class="label">R</span></a>
                
                    <a href="/tags/ropensci"><span class="label">ropensci</span></a>
                
                    <a href="/tags/rbison"><span class="label">rbison</span></a>
                
                    <a href="/tags/api"><span class="label">API</span></a>
                
                    <a href="/tags/geojson"><span class="label">geojson</span></a>
                
            </div>

            
            
            <div class="col-offset-2 col-8 top-4">
              <div id="disqus_thread"></div>
                <div id="disqus_thread"></div>
                <script type="text/javascript">
                var disqus_shortname = 'ropenscience';
                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
                </script>
                <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            </div>
            
        </div>
        <br>
    </div>
</article>





    <div id="footer">
        <div class="container">
            <div class="row start">
                <div class="col-1 col-1-3 top-8">
                    <img src="/img/icon_short_white.svg" />
                </div>

                <div class="col-9 col-offset-2 top-10 bottom-8">
                    <div class="row between">
                        <div class="col-2 col-1-3">
                            <a href="http://github.com/ropensci" target="_blank"><div class="icon icon-github"></div></a>
                            <a href="http://twitter.com/ropensci" target="_blank"><div class="icon icon-twitter"></div></a>
                            <a href="http://vimeo.com/ropensci" target="_blank"><div class="icon icon-vimeo"></div></a>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Info</h5>
                                <li><a href="/about">Mission</a></li>
                                <li><a href="/about#team">Team</a></li>
                                <li><a href="/about#collaborators">Collaborators</a></li>
                                <li><a href="/careers">Careers</a></li>

                            </ul>
                        </div>

                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Work</h5>
                                <li><a href="/packages/">Packages</a></li>
                                <li><a href="/blog/">Blog</a></li>
                                <li><a href="/technotes/">Tech Notes</a></li>
                                <li><a href="/tutorials/">Tutorials</a></li>
                                <li><a href="/usecases/">Use Cases</a></li>
                                <li><a href="/resources/">More Resources</a></li>
                            </ul>
                        </div>
                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Participate</h5>
                                <li><a href="/contact.html">Contact us</a></li>
                                <li><a href="/community/">Community</a></li>
                                <li><a href="http://onboarding.ropensci.org/">Contribute software</a></li>
                                <li><a href="http://unconf17.ropensci.org/">Unconference</a></li>
                                <li><a href="/coc">Code of conduct</a></li>
                                <li><a href="/donate/">Donate</a></li>
                            </ul>
                        </div>
                        <div class="col-4 top-8 bottom-8">
                            <h5 class="bottom-2"></h5>

                            <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" target="_blank">NumFOCUS</a></p>
                            <a href="http://numfocus.org" target="_blank"><img src="img/numfocus.png"></a>
                            <br>

                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12 top-8 bottom-9 divider">
                    <p class="top-9">Except where otherwise noted, content on this site is licensed under the <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank">CC-BY license</a>.
                    </p>
                </div>
            </div>
        </div>
    </div>



</body>
</html>



