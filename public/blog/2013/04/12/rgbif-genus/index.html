<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>rOpenSci | Use case - how to get species occurrence data from GBIF for a genus</title>

     
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>

    <script type="text/javascript">
    hljs.configure({languages: []});
    hljs.initHighlightingOnLoad();
    </script>
    <link rel="stylesheet" type="text/css" href="/css/style-new.css" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#4b8add">
<meta name="theme-color" content="#4b8add">


    <meta name="viewport" content="width=device-width, initial-scale=1">

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-462421-6', 'auto');
ga('send', 'pageview');
</script>

</head>
<body>

    
    <div id="header">
        <div class="container">
            <div class="row center-m">
                
                <div class="col-1">
                    <a href="/index.html"><img src="/img/icon_lettering_white.svg" /></a>
                </div>
                
                
                <nav class="col-6 col-offset-4 top-3">
                    <ul class="row between">
						<li><a href="/about/">About</a></li>
                        <li><a href="/blog/">Blog</a></li>
                        <li><a href="/packages/">Packages</a></li>
                        <li><a href="/community/">Community</a></li>
                        <li><a href="http://discuss.ropensci.org/" target="_blank">Discuss</a></li>

                    </ul>
                </nav>
                
            </div>
        </div>
    </div>


<article>
    <div class="container">
        <div class="row">
            <div class="col-2 sidebar top-5">
                <ul class="autoSidebar"></ul>
            </div> 
        </div>
        <div class="row">
            <div class="col-offset-2 col-8 top-20">
                <h2 style="text-align: center;">Use case - how to get species occurrence data from GBIF for a genus</h2>
            </div>
        </div>
        <div class="row">
            <div class="col-offset-2 col-8 top-10 bottom-5" style="font-size: 20px; text-align: center;">
                <p class="authors" style="text-align: center;">
                    
                        
                          <a href="/about/#team"> Scott Chamberlain </a>&nbsp;
                        
                    
                </p>
                <br>
                <div style="font-size: 20px; color: #2C3E50; margin-top: 15px;">April 12, 2013</div>
            </div>
            <div class="col-offset-2 col-8 top-2">

                

                

<p>Real use cases from people using our software are awesome. They are important for many reasons: 1) They make the code more useable because we may change code to make the interace and output easier to understand; 2) They may highlight bugs in our code; and 3) They show us what functions users care the most about (if we can assume number of questions equates to use).</p>

<p>If someone has a question, others are likely to have the same, or a similar question. Thus, we are sharing use cases on our blog.</p>

<hr />

<h3 id="the-use-case-how-do-i-get-gbif-occurrences-for-all-species-in-a-genus">The use case: How do I get GBIF occurrences for all species in a genus?</h3>

<p>The best way to approach this right now is to use the <code>scientificname</code> argument in the <code>occurrencelist()</code> function. For example, use an asterisk &ldquo;*&rdquo; after <em>Abies</em>, which will get you everything in the genus <em>Abies</em>.</p>

<hr />

<h3 id="install-rgbif-from-github">Install rgbif from Github</h3>

<pre><code class="language-r"># install_github('rgbif', 'ropensci') # uncomment if you don't have it
# installed yet
library(rgbif)
</code></pre>

<h3 id="lets-see-how-many-records-there-are-in-the-genus-with-lat-long-data-in-spain">Lets see how many records there are in the genus with lat/long data in Spain</h3>

<p>There are only 2975, so we can just set maxresults below to this number</p>

<pre><code class="language-r">occurrencecount(&quot;Abies*&quot;, coordinatestatus = TRUE, originisocountrycode = &quot;ES&quot;)
</code></pre>

<pre><code>## [1] 2975
</code></pre>

<hr />

<h3 id="lets-get-some-data">Lets get some data</h3>

<pre><code class="language-r">dataout &lt;- occurrencelist(scientificname = &quot;Abies*&quot;, coordinatestatus = TRUE,
    originisocountrycode = &quot;ES&quot;, removeZeros = TRUE, maxresults = 3000)

# take a quick peek
head(dataout[, 1:4])
</code></pre>

<pre><code>##          taxonName country decimalLatitude decimalLongitude
## 1 Abies alba Mill.      ES           37.84          -4.8200
## 2 Abies alba Mill.      ES           43.02          -1.3444
## 3 Abies alba Mill.      ES           42.93          -0.8569
## 4 Abies alba Mill.      ES           42.93          -0.8569
## 5 Abies alba Mill.      ES           42.93          -0.8569
## 6 Abies alba Mill.      ES           42.76          -0.8810
</code></pre>

<hr />

<h3 id="in-the-dataout-data-frame-there-are-31-unique-names">In the dataout data.frame there are 31 unique names</h3>

<pre><code class="language-r">length(unique(dataout$taxonName))
</code></pre>

<pre><code>## [1] 31
</code></pre>

<hr />

<h3 id="but-some-are-duplicates-just-spelled-in-different-ways-or-with-whitespace">But some are duplicates just spelled in different ways, or with whitespace</h3>

<pre><code class="language-r">unique(dataout$taxonName)
</code></pre>

<pre><code>##  [1] &quot;Abies alba Mill.&quot;
##  [2] &quot;Abies alba L.&quot;
##  [3] &quot;Abies sp.&quot;
##  [4] &quot;Abies  alba&quot;
##  [5] &quot;Abies  alba                                                 M Miller&quot;
##  [6] &quot;Abies  alba Mill.&quot;
##  [7] &quot;Abies&quot;
##  [8] &quot;Abies pinsapo Boiss.&quot;
##  [9] &quot;Abies alba Miller&quot;
## [10] &quot;Abies pinsapo Boiss&quot;
## [11] &quot;Abies marocana Trab.&quot;
## [12] &quot;Abies nordmanniana (Steven) Spach&quot;
## [13] &quot;Abies concolor (Gord.) Lindl. &amp; Hildebr.&quot;
## [14] &quot;Abies pinsapo&quot;
## [15] &quot;Abies koreana&quot;
## [16] &quot;Abies pinsapo var. \&quot;Kelleris\&quot;&quot;
## [17] &quot;Abies  excelsa DC.&quot;
## [18] &quot;Abies  nordmanniana&quot;
## [19] &quot;Abies  pinsapo Boiss.&quot;
## [20] &quot;Abies  pinsapo&quot;
## [21] &quot;Abies  alba Miller&quot;
## [22] &quot;Abies  pectinata DC.&quot;
## [23] &quot;Abies  pectinata&quot;
## [24] &quot;Abies pectinata DC.&quot;
## [25] &quot;Abies excelsa Poir.&quot;
## [26] &quot;Abies balsamea (L.) Mill.&quot;
## [27] &quot;Abies concolor Hildebr.&quot;
## [28] &quot;Abies numidica De Lannoy ex Carriere&quot;
## [29] &quot;Abies pinsapo Boiss. var. pinsapo&quot;
## [30] &quot;Abies concolor (Gord.) Lindl.ex Hildebr.&quot;
## [31] &quot;Abies cephalonica Loudon&quot;
</code></pre>

<hr />

<h3 id="so-you-can-exlude-ones-you-don-t-want-or-change-names-using-regex-for-example-notice-one-name-replaced">So you can exlude ones you don&rsquo;t want or change names using regex, for example (notice one name replaced)</h3>

<pre><code class="language-r">library(stringr)
unique(gsub(&quot;Abies pinsapo Boiss&quot;, &quot;Abies pinsapo&quot;, dataout$taxonName, fixed = TRUE))
</code></pre>

<pre><code>##  [1] &quot;Abies alba Mill.&quot;
##  [2] &quot;Abies alba L.&quot;
##  [3] &quot;Abies sp.&quot;
##  [4] &quot;Abies  alba&quot;
##  [5] &quot;Abies  alba                                                 M Miller&quot;
##  [6] &quot;Abies  alba Mill.&quot;
##  [7] &quot;Abies&quot;
##  [8] &quot;Abies pinsapo.&quot;
##  [9] &quot;Abies alba Miller&quot;
## [10] &quot;Abies pinsapo&quot;
## [11] &quot;Abies marocana Trab.&quot;
## [12] &quot;Abies nordmanniana (Steven) Spach&quot;
## [13] &quot;Abies concolor (Gord.) Lindl. &amp; Hildebr.&quot;
## [14] &quot;Abies koreana&quot;
## [15] &quot;Abies pinsapo var. \&quot;Kelleris\&quot;&quot;
## [16] &quot;Abies  excelsa DC.&quot;
## [17] &quot;Abies  nordmanniana&quot;
## [18] &quot;Abies  pinsapo Boiss.&quot;
## [19] &quot;Abies  pinsapo&quot;
## [20] &quot;Abies  alba Miller&quot;
## [21] &quot;Abies  pectinata DC.&quot;
## [22] &quot;Abies  pectinata&quot;
## [23] &quot;Abies pectinata DC.&quot;
## [24] &quot;Abies excelsa Poir.&quot;
## [25] &quot;Abies balsamea (L.) Mill.&quot;
## [26] &quot;Abies concolor Hildebr.&quot;
## [27] &quot;Abies numidica De Lannoy ex Carriere&quot;
## [28] &quot;Abies pinsapo. var. pinsapo&quot;
## [29] &quot;Abies concolor (Gord.) Lindl.ex Hildebr.&quot;
## [30] &quot;Abies cephalonica Loudon&quot;
</code></pre>

<hr />

<h3 id="that-s-it">That&rsquo;s it!</h3>

<p>Let us know if you have any questions on this tutorial.</p>

<p>And keep those use cases/questions coming!</p>

            </div>
            <br>
            <div class="col-offset-2 col-8 top-4 labels">
                
                    <a href="/tags/r"><span class="label">R</span></a>
                
                    <a href="/tags/ropensci"><span class="label">ropensci</span></a>
                
                    <a href="/tags/rgbif"><span class="label">rgbif</span></a>
                
                    <a href="/tags/api"><span class="label">API</span></a>
                
            </div>

            
            
            <div class="col-offset-2 col-8 top-4">
              <div id="disqus_thread"></div>
                <div id="disqus_thread"></div>
                <script type="text/javascript">
                var disqus_shortname = 'ropenscience';
                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
                </script>
                <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            </div>
            
        </div>
        <br>
    </div>
</article>





    <div id="footer">
        <div class="container">
            <div class="row start">
                <div class="col-1 col-1-3 top-8">
                    <img src="/img/icon_short_white.svg" />
                </div>

                <div class="col-9 col-offset-2 top-10 bottom-8">
                    <div class="row between">
                        <div class="col-2 col-1-3">
                            <a href="http://github.com/ropensci" target="_blank"><div class="icon icon-github"></div></a>
                            <a href="http://twitter.com/ropensci" target="_blank"><div class="icon icon-twitter"></div></a>
                            <a href="http://vimeo.com/ropensci" target="_blank"><div class="icon icon-vimeo"></div></a>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Info</h5>
                                <li><a href="/about">Mission</a></li>
                                <li><a href="/about#team">Team</a></li>
                                <li><a href="/about#collaborators">Collaborators</a></li>
                                <li><a href="/careers">Careers</a></li>

                            </ul>
                        </div>

                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Work</h5>
                                <li><a href="/packages/">Packages</a></li>
                                <li><a href="/blog/">Blog</a></li>
                                <li><a href="/technotes/">Tech Notes</a></li>
                                <li><a href="/tutorials/">Tutorials</a></li>
                                <li><a href="/usecases/">Use Cases</a></li>
                                <li><a href="/resources/">More Resources</a></li>
                            </ul>
                        </div>
                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Participate</h5>
                                <li><a href="/contact.html">Contact us</a></li>
                                <li><a href="/community/">Community</a></li>
                                <li><a href="http://onboarding.ropensci.org/">Contribute software</a></li>
                                <li><a href="http://unconf17.ropensci.org/">Unconference</a></li>
                                <li><a href="/coc">Code of conduct</a></li>
                                <li><a href="/donate/">Donate</a></li>
                            </ul>
                        </div>
                        <div class="col-4 top-8 bottom-8">
                            <h5 class="bottom-2"></h5>

                            <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" target="_blank">NumFOCUS</a></p>
                            <a href="http://numfocus.org" target="_blank"><img src="img/numfocus.png"></a>
                            <br>

                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12 top-8 bottom-9 divider">
                    <p class="top-9">Except where otherwise noted, content on this site is licensed under the <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank">CC-BY license</a>.
                    </p>
                </div>
            </div>
        </div>
    </div>



</body>
</html>



