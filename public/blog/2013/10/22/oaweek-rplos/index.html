<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>rOpenSci | OA week - A simple use case for programmatic access to PLOS full text</title>

     
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>

    <script type="text/javascript">
    hljs.configure({languages: []});
    hljs.initHighlightingOnLoad();
    </script>
    <link rel="stylesheet" type="text/css" href="/css/style-new.css" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#4b8add">
<meta name="theme-color" content="#4b8add">


    <meta name="viewport" content="width=device-width, initial-scale=1">

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-462421-6', 'auto');
ga('send', 'pageview');
</script>

</head>
<body>

    
    <div id="header">
        <div class="container">
            <div class="row center-m">
                
                <div class="col-1">
                    <a href="/index.html"><img src="/img/icon_lettering_white.svg" /></a>
                </div>
                
                
                <nav class="col-6 col-offset-4 top-3">
                    <ul class="row between">
						<li><a href="/about/">About</a></li>
                        <li><a href="/blog/">Blog</a></li>
                        <li><a href="/packages/">Packages</a></li>
                        <li><a href="/community/">Community</a></li>
                        <li><a href="http://discuss.ropensci.org/" target="_blank">Discuss</a></li>

                    </ul>
                </nav>
                
            </div>
        </div>
    </div>


<article>
    <div class="container">
        <div class="row">
            <div class="col-2 sidebar top-5">
                <ul class="autoSidebar"></ul>
            </div> 
        </div>
        <div class="row">
            <div class="col-offset-2 col-8 top-20">
                <h2 style="text-align: center;">OA week - A simple use case for programmatic access to PLOS full text</h2>
            </div>
        </div>
        <div class="row">
            <div class="col-offset-2 col-8 top-10 bottom-5" style="font-size: 20px; text-align: center;">
                <p class="authors" style="text-align: center;">
                    
                        
                          <a href="/about/#team"> Scott Chamberlain </a>&nbsp;
                        
                    
                </p>
                <br>
                <div style="font-size: 20px; color: #2C3E50; margin-top: 15px;">October 22, 2013</div>
            </div>
            <div class="col-offset-2 col-8 top-2">

                

                

<p>Open access week is here!  We love open access, and think it&rsquo;s extremely important to publish in open access journals. One of the many benefits of open access literature is that we likely can use the text of articles in OA journals for many things, including text-mining.</p>

<p>What&rsquo;s even more awesome is some OA publishers provide API (application programming interface) access to their full text articles. Public Library of Science (PLOS) is one of these. We have had an R package for a while now that makes it convenient to search PLOS full text programatically. You can search on specific parts of articles (e.g., just in titles, or just in results sections), and you can return specific parts of articles (e.g., just abstracts). There are additional options for more fine-grained control over searches like facetting.</p>

<p>What if you want to find similar papers based on their text content?  This can be done using the PLOS search API, with help from the <code>tm</code> R package. These are basic examples just to demonstrate that you can quickly go from a search of PLOS data to a visualization or analysis.</p>

<h3 id="install-rplos-and-other-packages-from-cran">Install rplos and other packages from CRAN</h3>

<pre><code class="language-r">install.packages(c(&quot;rplos&quot;, &quot;tm&quot;, &quot;wordcloud&quot;, &quot;RColorBrewer&quot;, &quot;proxy&quot;, &quot;plyr&quot;))
</code></pre>

<h3 id="get-some-text">Get some text</h3>

<pre><code class="language-r">library(rplos)
out &lt;- searchplos(&quot;birds&quot;, fields = &quot;id,introduction&quot;, limit = 20, toquery = list(&quot;cross_published_journal_key:PLoSONE&quot;,
    &quot;doc_type:full&quot;))
out$idshort &lt;- sapply(out$id, function(x) strsplit(x, &quot;\\.&quot;)[[1]][length(strsplit(x,
    &quot;\\.&quot;)[[1]])], USE.NAMES = FALSE)
</code></pre>

<p>The result is a list of length <code>limit</code> defined in the previous call.</p>

<pre><code class="language-r">nrow(out)
</code></pre>

<pre><code>[1] 20
</code></pre>

<h3 id="word-dictionaries">Word dictionaries.</h3>

<p>Next, we&rsquo;ll use the tm package to create word dictionaries for each paper.</p>

<pre><code class="language-r">library(tm)
library(proxy)
corpus &lt;- Corpus(DataframeSource(out[&quot;introduction&quot;]))

# Clean up corpus
corpus &lt;- tm_map(corpus, function(x) removeWords(x, stopwords(&quot;english&quot;)))
corpus &lt;- tm_map(corpus, function(x) removePunctuation(x))
tdm &lt;- TermDocumentMatrix(corpus)
tdm$dimnames$Docs &lt;- out$idshort

# Comparison among documents in a heatmap
dissmat &lt;- dissimilarity(tdm, method = &quot;Euclidean&quot;)
get_dist_frame &lt;- function(x) {
    temp &lt;- data.frame(subset(data.frame(expand.grid(dimnames(as.matrix(x))),
        expand.grid(lower.tri(as.matrix(x)))), Var1.1 == &quot;TRUE&quot;)[, -3], as.vector(x))
    names(temp) &lt;- c(&quot;one&quot;, &quot;two&quot;, &quot;value&quot;)
    tempout &lt;- temp[!temp[, 1] == temp[, 2], ]
    tempout
}
dissmatdf &lt;- get_dist_frame(dissmat)
ggplot(dissmatdf, aes(one, two)) + geom_tile(aes(fill = value), colour = &quot;white&quot;,
    binwidth = 3) + scale_fill_gradient(low = &quot;white&quot;, high = &quot;steelblue&quot;) +
    theme_grey(base_size = 16) + labs(x = &quot;&quot;, y = &quot;&quot;) + scale_x_discrete(expand = c(0,
    0)) + scale_y_discrete(expand = c(0, 0)) + theme(axis.ticks = theme_blank(),
    axis.text.x = element_text(size = 12, hjust = 0.6, colour = &quot;grey50&quot;, angle = 90),
    panel.grid.major = theme_blank(), panel.grid.minor = theme_blank(), panel.border = theme_blank())
</code></pre>

<p><img src="/assets/blog-images/2013-10-22-oaweek-rplos-2/tmit.png" alt="plot of chunk tmit" /></p>

<p>Picking two with low values (=high similarity), dois 10.1371/journal.pone.0000184 and 10.1371/journal.pone.0004148, here&rsquo;s some of the most common terms used (some overlap).</p>

<pre><code class="language-r">library(plyr)
df1 &lt;- sort(termFreq(corpus[[grep(&quot;10.1371/journal.pone.0010997&quot;, out$id)]]))
df1 &lt;- data.frame(terms = names(df1[df1 &gt; 2]), vals = df1[df1 &gt; 2], row.names = NULL)
df2 &lt;- sort(termFreq(corpus[[grep(&quot;10.1371/journal.pone.0004148&quot;, out$id)]]))
df2 &lt;- data.frame(terms = names(df2[df2 &gt; 1]), vals = df2[df2 &gt; 1], row.names = NULL)
df1$terms &lt;- reorder(df1$terms, df1$vals)
df2$terms &lt;- reorder(df2$terms, df2$vals)
dfboth &lt;- ldply(list(`0010997` = df1, `0004148` = df2))
ggplot(dfboth, aes(x = terms, y = vals)) + geom_histogram(stat = &quot;identity&quot;) +
    facet_grid(. ~ .id, scales = &quot;free&quot;) + theme(axis.text.x = element_text(angle = 90))
</code></pre>

<p><img src="/assets/blog-images/2013-10-22-oaweek-rplos-2/words.png" alt="plot of chunk words" /></p>

<h3 id="determine-similarity-among-papers">Determine similarity among papers</h3>

<p>Using a wordcloud</p>

<pre><code class="language-r">library(wordcloud)
library(RColorBrewer)

m &lt;- as.matrix(tdm)
v &lt;- sort(rowSums(m), decreasing = TRUE)
d &lt;- data.frame(word = names(v), freq = v)
pal &lt;- brewer.pal(9, &quot;Blues&quot;)
pal &lt;- pal[-(1:2)]

# Plot the chart
wordcloud(d$word, d$freq, scale = c(3, 0.1), min.freq = 2, max.words = 250,
    random.order = FALSE, rot.per = 0.2, colors = pal)
</code></pre>

<p><img src="/assets/blog-images/2013-10-22-oaweek-rplos-2/wordcloud.png" alt="plot of chunk wordcloud" /></p>

            </div>
            <br>
            <div class="col-offset-2 col-8 top-4 labels">
                
                    <a href="/tags/r"><span class="label">R</span></a>
                
                    <a href="/tags/rplos"><span class="label">rplos</span></a>
                
                    <a href="/tags/textmining"><span class="label">textmining</span></a>
                
            </div>

            
            
            <div class="col-offset-2 col-8 top-4">
              <div id="disqus_thread"></div>
                <div id="disqus_thread"></div>
                <script type="text/javascript">
                var disqus_shortname = 'ropenscience';
                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
                </script>
                <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            </div>
            
        </div>
        <br>
    </div>
</article>





    <div id="footer">
        <div class="container">
            <div class="row start">
                <div class="col-1 col-1-3 top-8">
                    <img src="/img/icon_short_white.svg" />
                </div>

                <div class="col-9 col-offset-2 top-10 bottom-8">
                    <div class="row between">
                        <div class="col-2 col-1-3">
                            <a href="http://github.com/ropensci" target="_blank"><div class="icon icon-github"></div></a>
                            <a href="http://twitter.com/ropensci" target="_blank"><div class="icon icon-twitter"></div></a>
                            <a href="http://vimeo.com/ropensci" target="_blank"><div class="icon icon-vimeo"></div></a>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Info</h5>
                                <li><a href="/about">Mission</a></li>
                                <li><a href="/about#team">Team</a></li>
                                <li><a href="/about#collaborators">Collaborators</a></li>
                                <li><a href="/careers">Careers</a></li>

                            </ul>
                        </div>

                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Work</h5>
                                <li><a href="/packages/">Packages</a></li>
                                <li><a href="/blog/">Blog</a></li>
                                <li><a href="/technotes/">Tech Notes</a></li>
                                <li><a href="/tutorials/">Tutorials</a></li>
                                <li><a href="/usecases/">Use Cases</a></li>
                                <li><a href="/resources/">More Resources</a></li>
                            </ul>
                        </div>
                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Participate</h5>
                                <li><a href="/contact.html">Contact us</a></li>
                                <li><a href="/community/">Community</a></li>
                                <li><a href="http://onboarding.ropensci.org/">Contribute software</a></li>
                                <li><a href="http://unconf17.ropensci.org/">Unconference</a></li>
                                <li><a href="/coc">Code of conduct</a></li>
                                <li><a href="/donate/">Donate</a></li>
                            </ul>
                        </div>
                        <div class="col-4 top-8 bottom-8">
                            <h5 class="bottom-2"></h5>

                            <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" target="_blank">NumFOCUS</a></p>
                            <a href="http://numfocus.org" target="_blank"><img src="img/numfocus.png"></a>
                            <br>

                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12 top-8 bottom-9 divider">
                    <p class="top-9">Except where otherwise noted, content on this site is licensed under the <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank">CC-BY license</a>.
                    </p>
                </div>
            </div>
        </div>
    </div>



</body>
</html>



