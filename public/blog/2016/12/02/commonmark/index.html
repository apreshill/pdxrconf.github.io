<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>rOpenSci | High Performance CommonMark and Github Markdown Rendering in R</title>

     
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>

    <script type="text/javascript">
    hljs.configure({languages: []});
    hljs.initHighlightingOnLoad();
    </script>
    <link rel="stylesheet" type="text/css" href="/css/style-new.css" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#4b8add">
<meta name="theme-color" content="#4b8add">


    <meta name="viewport" content="width=device-width, initial-scale=1">

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-462421-6', 'auto');
ga('send', 'pageview');
</script>

</head>
<body>

    
    <div id="header">
        <div class="container">
            <div class="row center-m">
                
                <div class="col-1">
                    <a href="/index.html"><img src="/img/icon_lettering_white.svg" /></a>
                </div>
                
                
                <nav class="col-6 col-offset-4 top-3">
                    <ul class="row between">
						<li><a href="/about/">About</a></li>
                        <li><a href="/blog/">Blog</a></li>
                        <li><a href="/packages/">Packages</a></li>
                        <li><a href="/community/">Community</a></li>
                        <li><a href="http://discuss.ropensci.org/" target="_blank">Discuss</a></li>

                    </ul>
                </nav>
                
            </div>
        </div>
    </div>


<article>
    <div class="container">
        <div class="row">
            <div class="col-2 sidebar top-5">
                <ul class="autoSidebar"></ul>
            </div> 
        </div>
        <div class="row">
            <div class="col-offset-2 col-8 top-20">
                <h2 style="text-align: center;">High Performance CommonMark and Github Markdown Rendering in R</h2>
            </div>
        </div>
        <div class="row">
            <div class="col-offset-2 col-8 top-10 bottom-5" style="font-size: 20px; text-align: center;">
                <p class="authors" style="text-align: center;">
                    
                        
                          <a href="/about/#team"> Jeroen Ooms </a>&nbsp;
                        
                    
                </p>
                <br>
                <div style="font-size: 20px; color: #2C3E50; margin-top: 15px;">December 2, 2016</div>
            </div>
            <div class="col-offset-2 col-8 top-2">

                

                

<p>This week the folks at Github have open sourced their <a href="https://github.com/github/cmark">fork</a> of libcmark (based on the extensive <a href="https://github.com/jgm/cmark/pull/123">PR by Mathieu Duponchelle</a>), which they use to render markdown text within documents, issues, comments and anything else on the Github website. The new release of the <a href="https://cran.r-project.org/web/packages/commonmark/index.html">commonmark</a> R package incorporates this library so that we can take advantage of Github quality markdown rendering in R.</p>

<p>The most exciting change is that the library has gained an extension mechanism to provide optional rendering features which are missing from the commonmark spec. Most notably, Github has added extentions for rendering GFM style tables and autolinks, both very useful features for R users.</p>

<p><img src="/assets/blog-images/consolemd.png" alt="consolemd" /></p>

<h2 id="what-is-commonmark">What is CommonMark</h2>

<p><a href="http://spec.commonmark.org/">CommonMark</a> is an initiative by Professor John MacFarlane (author of Pandoc) to formally define markdown syntax specification and provide high quality reference implementations. His high performance <a href="https://github.com/jgm/cmark">cmark</a> C library converts markdown text into xml, html, latex or groff man in the <a href="https://github.com/jgm/cmark#readme">blink of an eye</a>.</p>

<p>The <a href="https://cran.r-project.org/web/packages/commonmark/index.html">commonmark</a> R package wraps libcmark and has been on CRAN for a while. It should replace the old <a href="https://cran.r-project.org/web/packages/markdown/index.html">markdown</a> package which is based on the deprecated Sundown library (the <a href="https://github.com/vmg/sundown">author</a> of Sundown now works for Github and is one of the contributors to libcmark).</p>

<h2 id="commonmark-extensions">CommonMark Extensions</h2>

<p>Commonmark is extremely reliable and optimized, but the disadvantage of the formal specification is that it can take a long time for new feature proposals to be adopted. For example a <a href="https://talk.commonmark.org/t/tables-in-pure-markdown/81">proposal</a> for markdown tables has been open for over two years, but ironing out the syntax details has proven to be difficult.</p>

<p>For this reason many commonmark implementations include &lsquo;extensions&rsquo; to enable features which are not (yet) part of the official specification. The current version of the commonmark R package offers 4 such extensions:</p>

<ul>
<li><strong>table</strong> support rendering of tables</li>
<li><strong>strikethough</strong> via <code>~sometext~</code> syntax</li>
<li><strong>autolink</strong> automatically turn URLs into hyperlinks</li>
<li><strong>tagfilter</strong> blacklist html tags: <code>title</code> <code>textarea</code> <code>style</code> <code>xmp</code> <code>iframe</code>
<code>noembed</code> <code>noframes</code> <code>script</code> <code>plaintext</code>.</li>
</ul>

<p>These extensions were added by Github to support <a href="https://guides.github.com/features/mastering-markdown/">GitHub Flavored Markdown</a>.</p>

<p><img src="/assets/blog-images/autolink.png" alt="roxygenmd" /></p>

<p>Note that extensions are not enabled by default. For example to render tables, you need to set the <code>extensions</code> parameter to <code>TRUE</code> or <code>&quot;table&quot;</code>.</p>

<h2 id="markdown-and-roxygen">Markdown and Roxygen</h2>

<p>We also use commonmark in the upcoming version 6.0 of roxygen2 to support <a href="https://github.com/klutometis/roxygen/blob/master/vignettes/markdown.Rmd">markdown within roxygen</a>, which is super awesome.</p>

<p><img src="/assets/blog-images/roxygenmd.png" alt="roxygenmd" /></p>

<p>To give this a try you need the development version of roxygen2:</p>

<pre><code class="language-r">devtools::install_github(&quot;klutometis/roxygen&quot;)
</code></pre>

<p>To enable markdown roxygen for a given package, all you need to do is add a line with <code>Roxygen: list(markdown = TRUE)</code> to the package DESCRIPTION file. For more details check out the <a href="https://github.com/klutometis/roxygen/blob/master/vignettes/markdown.Rmd">vignette</a>.
There is also package <a href="https://github.com/r-pkgs/roxygen2md">roxygen2md</a> which will automatically convert existing roxygen code to markdown.</p>

            </div>
            <br>
            <div class="col-offset-2 col-8 top-4 labels">
                
                    <a href="/tags/ropensci"><span class="label">ropensci</span></a>
                
                    <a href="/tags/packages"><span class="label">packages</span></a>
                
                    <a href="/tags/commonmark"><span class="label">commonmark</span></a>
                
                    <a href="/tags/markdown"><span class="label">markdown</span></a>
                
                    <a href="/tags/r"><span class="label">R</span></a>
                
            </div>

            
            
            <div class="col-offset-2 col-8 top-4">
              <div id="disqus_thread"></div>
                <div id="disqus_thread"></div>
                <script type="text/javascript">
                var disqus_shortname = 'ropenscience';
                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
                </script>
                <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            </div>
            
        </div>
        <br>
    </div>
</article>





    <div id="footer">
        <div class="container">
            <div class="row start">
                <div class="col-1 col-1-3 top-8">
                    <img src="/img/icon_short_white.svg" />
                </div>

                <div class="col-9 col-offset-2 top-10 bottom-8">
                    <div class="row between">
                        <div class="col-2 col-1-3">
                            <a href="http://github.com/ropensci" target="_blank"><div class="icon icon-github"></div></a>
                            <a href="http://twitter.com/ropensci" target="_blank"><div class="icon icon-twitter"></div></a>
                            <a href="http://vimeo.com/ropensci" target="_blank"><div class="icon icon-vimeo"></div></a>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Info</h5>
                                <li><a href="/about">Mission</a></li>
                                <li><a href="/about#team">Team</a></li>
                                <li><a href="/about#collaborators">Collaborators</a></li>
                                <li><a href="/careers">Careers</a></li>

                            </ul>
                        </div>

                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Work</h5>
                                <li><a href="/packages/">Packages</a></li>
                                <li><a href="/blog/">Blog</a></li>
                                <li><a href="/technotes/">Tech Notes</a></li>
                                <li><a href="/tutorials/">Tutorials</a></li>
                                <li><a href="/usecases/">Use Cases</a></li>
                                <li><a href="/resources/">More Resources</a></li>
                            </ul>
                        </div>
                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Participate</h5>
                                <li><a href="/contact.html">Contact us</a></li>
                                <li><a href="/community/">Community</a></li>
                                <li><a href="http://onboarding.ropensci.org/">Contribute software</a></li>
                                <li><a href="http://unconf17.ropensci.org/">Unconference</a></li>
                                <li><a href="/coc">Code of conduct</a></li>
                                <li><a href="/donate/">Donate</a></li>
                            </ul>
                        </div>
                        <div class="col-4 top-8 bottom-8">
                            <h5 class="bottom-2"></h5>

                            <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" target="_blank">NumFOCUS</a></p>
                            <a href="http://numfocus.org" target="_blank"><img src="img/numfocus.png"></a>
                            <br>

                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12 top-8 bottom-9 divider">
                    <p class="top-9">Except where otherwise noted, content on this site is licensed under the <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank">CC-BY license</a>.
                    </p>
                </div>
            </div>
        </div>
    </div>



</body>
</html>



