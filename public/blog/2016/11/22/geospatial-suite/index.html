<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>rOpenSci | The rOpenSci geospatial suite</title>

     
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>

    <script type="text/javascript">
    hljs.configure({languages: []});
    hljs.initHighlightingOnLoad();
    </script>
    <link rel="stylesheet" type="text/css" href="/css/style-new.css" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#4b8add">
<meta name="theme-color" content="#4b8add">


    <meta name="viewport" content="width=device-width, initial-scale=1">

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-462421-6', 'auto');
ga('send', 'pageview');
</script>

</head>
<body>

    
    <div id="header">
        <div class="container">
            <div class="row center-m">
                
                <div class="col-1">
                    <a href="/index.html"><img src="/img/icon_lettering_white.svg" /></a>
                </div>
                
                
                <nav class="col-6 col-offset-4 top-3">
                    <ul class="row between">
						<li><a href="/about/">About</a></li>
                        <li><a href="/blog/">Blog</a></li>
                        <li><a href="/packages/">Packages</a></li>
                        <li><a href="/community/">Community</a></li>
                        <li><a href="http://discuss.ropensci.org/" target="_blank">Discuss</a></li>

                    </ul>
                </nav>
                
            </div>
        </div>
    </div>


<article>
    <div class="container">
        <div class="row">
            <div class="col-2 sidebar top-5">
                <ul class="autoSidebar"></ul>
            </div> 
        </div>
        <div class="row">
            <div class="col-offset-2 col-8 top-20">
                <h2 style="text-align: center;">The rOpenSci geospatial suite</h2>
            </div>
        </div>
        <div class="row">
            <div class="col-offset-2 col-8 top-10 bottom-5" style="font-size: 20px; text-align: center;">
                <p class="authors" style="text-align: center;">
                    
                        
                          <a href="/about/#team"> Scott Chamberlain </a>&nbsp;
                        
                    
                </p>
                <br>
                <div style="font-size: 20px; color: #2C3E50; margin-top: 15px;">November 22, 2016</div>
            </div>
            <div class="col-offset-2 col-8 top-2">

                

                

<p>Geospatial data - data embedded in a spatial context - is used across disciplines, whether it be history, biology, business, tech, public health, etc. Along with community contributors, we&rsquo;re working on a suite of tools to make working with spatial data in R as easy as possible.</p>

<p>If you&rsquo;re not familiar with geospatial tools, it&rsquo;s helpful to see what people do with them in the real world.</p>

<p><strong>Example 1</strong></p>

<p>One of our geospatial packages, <a href="https://github.com/ropensci/geonames">geonames</a>, is used for geocoding, the practice of either sorting out place names from geographic data, or vice versa. <code>geonames</code> interfaces with the open database of the same name: <a href="http://www.geonames.org/">http://www.geonames.org/</a>. A recent paper in PlosONE highlights a common use case. Harsch &amp; HilleRisLambers<sup class="footnote-ref" id="fnref:1"><a rel="footnote" href="#fn:1">1</a></sup> asked how plant species distributions have shifted due to climate warming. They used the <code>GNsrtm3()</code> function in <code>geonames</code>, which uses <a href="http://www.geonames.org/export/web-services.html#srtm3">Shuttle Radar Topography Mission</a> elevation data, to fill in missing or incorrect elevation values in their dataset.</p>

<p><strong>Example 2</strong></p>

<p>Another of our packages, <a href="https://github.com/ropensci/geojsonio">geojsonio</a>, is used as a tool to ingest GeoJSON, or make GeoJSON from various inputs. <code>geojsonio</code> was used in Frankfurt&rsquo;s Open Data Hackathon in March 2016 in a project to present users with random Google Streetview Images of Frankfurt. Check out the repo at <a href="https://github.com/safferli/opendataday2016">safferli/opendataday2016</a>.</p>

<hr />

<p><a href="https://ropensci.org/blog/blog/2016/03/17/ropensci-geospatial-stack">We covered</a> the state of our geospatial tools in March of this year, but a lot has changed since then so we thought it would be useful to do an overview of these tools and future work.</p>

<p>There are <a href="https://en.wikipedia.org/wiki/GIS_file_formats">many geospatial data formats</a>,
including <a href="https://en.wikipedia.org/wiki/Shapefile">shapefiles</a>,
<a href="https://en.wikipedia.org/wiki/GeoTIFF">GeoTIFF</a>, <a href="https://en.wikipedia.org/wiki/NetCDF">netCDF</a>,
<a href="https://en.wikipedia.org/wiki/Well-known_text">Well-known text/Well-known binary</a>,
<a href="http://geojson.org/">GeoJSON</a>, and many more. Readers may be more familiar with shape files
than WKT or GeoJSON. There are  <a href="https://cran.rstudio.com/web/views/Spatial.html">R tools for shape files</a>,
so our tools largely don&rsquo;t concern themselves with shape files and other geospatial
data formats. Two formats in particular that we create tools for are GeoJSON and WKT.</p>

<h3 id="geojson">GeoJSON</h3>

<p>With the explosion of Javascript/Node and web-first tools, and increasing dominance of JSON as a data format, <a href="http://geojson.org/">GeoJSON</a> as a spatial data format has seen increasing use. GeoJSON is a lightweight format based on JSON, and has a very new standard specification: <a href="https://tools.ietf.org/html/rfc7946">RFC 7946</a>. Many of our geospatial tools center around GeoJSON. Our goal with GeoJSON focused tools is to create a pipeline in which users can process GeoJSON data without any headaches due to dependencies.</p>

<ul>
<li>links: <a href="https://tools.ietf.org/html/rfc7946">specification</a> - <a href="https://en.wikipedia.org/wiki/GeoJSON">Wikipedia entry</a></li>
<li>GeoJSON was inspired in part from Simple Features, but is not part of that specification. The most recent iteration is called <a href="https://tools.ietf.org/html/rfc7946">RFC 7946 GeoJSON</a>.</li>
<li>Features of note:

<ul>
<li>JSON character representation only (though see <a href="https://github.com/mapbox/geobuf">geobuf</a> for binary GeoJSON - not part of RFC 7946)</li>
<li>All data is WGS84</li>
<li>Often found in web applications</li>
</ul></li>
</ul>

<h3 id="wkt">WKT</h3>

<p>Well-known text is a plain text format, just like GeoJSON (WKB is a binary form of WKT). It is often used in SQL databases to store geospatial data. Many of the data sources our R packages work with, for example <a href="http://www.gbif.org/">http://www.gbif.org/</a> (see our package <a href="https://github.com/ropensci/rgbif">rgbif</a>), use WKT to specify geospatial extent. Thus, <code>rgbif</code> shouldn&rsquo;t need to import an entire spatial stack that is hard for some to install only for dealing with a single spatial data format - and only some users will do geospatial queries wih WKT as you can constrain queries simply with country names, while others may not need to constrain spatially. We&rsquo;ve been working on tools to make dealing with WKT more lightweight.</p>

<ul>
<li>links: <a href="https://d17oy1vhnax1f7.cloudfront.net/items/291d412o1c3E3s0R112A/06-103r4_Implementation_Specification_for_Geographic_Information_-_Simple_feature_access_-_Part_1_Common_Architecture_v1.2.1%20(1).pdf">specification</a> - <a href="https://en.wikipedia.org/wiki/Well-known_text">Wikipedia entry</a></li>
<li>WKT is part of <a href="https://en.wikipedia.org/wiki/Simple_Features">Simple Features</a> (see <code>sf</code> below)</li>
<li>Features of note:

<ul>
<li>Character and binary representations</li>
<li>Supports any coordinate reference system</li>
<li>Often used in databases to store geospatial information</li>
</ul></li>
</ul>

<hr />

<h2 id="ropensci-use-cases">rOpenSci use cases</h2>

<p>The motivation for our geospatial tools is supported in part by these use cases for software we make that use WKT and GeoJSON:</p>

<ul>
<li>Web services that some of our packages interact with accept a geospatial filter as a query component. This often means WKT. Having tools that are light weight is important here as we don&rsquo;t need a full geospatial stack when we only need to lint (i.e., validate) WKT or create it from a bounding box, for example.</li>
<li>Likewise, some web services only accept GeoJSON. Same argument as above applies here.</li>
<li>Vizualize WKT and GeoJSON: given the above, users should be able to vizualize the area that they are defining with their WKT or GeoJSON.</li>
<li>WKT-GeoJSON conversion: sometimes one needs to convert WKT to GeoJSON, or vice versa. Light weight tools to do that task are really useful.</li>
</ul>

<hr />

<h2 id="tools">Tools</h2>

<p>rOpenSci has a growing suite of database tools:</p>

<h3 id="geojson-wkt-tools">GeoJSON/WKT Tools</h3>

<ul>
<li><a href="https://github.com/ropensci/geojson">geojson</a> (geojson classes for R) (on CRAN)</li>
<li><a href="https://github.com/ropensci/geojsonio">geojsonio</a> (I/O for GeoJSON) (on CRAN)</li>
<li><a href="https://github.com/ropenscilabs/geojsonlint">geojsonlint</a> (Lint GeoJSON) (on CRAN)</li>
<li><a href="https://github.com/ropensci/lawn">lawn</a> (Turf.js R client) (on CRAN)</li>
<li><a href="https://github.com/ropenscilabs/geoaxe">geoaxe</a> (split up well known text into chunks) (on CRAN)</li>
<li><a href="https://github.com/ropenscilabs/wellknown">wellknown</a> (Well-Known-Text &lt;&ndash;&gt; GeoJSON) (on CRAN)</li>
<li><a href="https://github.com/ropenscilabs/geoops">geoops</a> (Operations on GeoJSON, sort of like <code>rgeos</code>)</li>
</ul>

<h3 id="data-data-services">Data/Data Services</h3>

<ul>
<li><a href="https://github.com/ropenscilabs/geoparser">geoparser</a> (Geoparser.io client for place names) (on CRAN)</li>
<li><a href="https://github.com/ropenscilabs/rgeospatialquality">rgeospatialquality</a> (spatial quality of biodiversity records) (on CRAN)</li>
<li><a href="https://github.com/ropenscilabs/getlandsat">getlandsat</a> (Landsat images) (on CRAN)</li>
<li><a href="https://github.com/ropenscilabs/osmplotr">osmplotr</a> (OpenStreeMap data and vizualization) (on CRAN)</li>
<li><a href="https://github.com/ropenscilabs/rnaturalearth">rnaturalearth</a> (Natural Earth data)</li>
<li><a href="https://github.com/ropensci/geonames">geonames</a> (Access Geonames.org API) (on CRAN)</li>
</ul>

<hr />

<p><br><br></p>

<p>For each package below, there are 2-3 badges. One for whether the package is on CRAN
or not (<span class="label label-warning">cran</span> if on CRAN, <span class="label label-default">cran</span>
if not), another for link to source on GitHub (<span class="label label-info">github</span>),
and another when the package is community contributed (<span class="label label-success">community</span>).</p>

<h2 id="geojson-1">geojson</h2>

<p><a href="https://cran.rstudio.com/web/packages/geojson/"><span class="label label-warning">cran</span></a> <a href="https://github.com/ropensci/geojson"><span class="label label-info">github</span></a></p>

<p>We&rsquo;re excited to announce a new package <code>geojson</code>, which is now on CRAN. Check out the vignettes (<a href="https://cran.rstudio.com/web/packages/geojson/vignettes/geojson.html">geojson classes</a>, <a href="https://cran.rstudio.com/web/packages/geojson/vignettes/geojson-operations.html">geojson operations</a>) to get started.</p>

<p>You can install the package from CRAN:</p>

<pre><code class="language-r">install.packages(&quot;geojson&quot;)
</code></pre>

<pre><code class="language-r">library(&quot;geojson&quot;)
</code></pre>

<p>The <code>geojson</code> package has functions for creating each of the GeoJSON classes from character strings of GeoJSON.</p>

<ul>
<li><code>feature()</code> - Feature</li>
<li><code>featurecollection()</code> - FeatureCollection</li>
<li><code>geometrycollection()</code> - GeometryCollection</li>
<li><code>linestring()</code> - LineString</li>
<li><code>multilinestring()</code> - MultiLineString</li>
<li><code>multipoint()</code> - MultiPoint</li>
<li><code>multipolygon()</code> - MultiPolygon</li>
<li><code>point()</code> - Point</li>
<li><code>polygon()</code> - Polygon</li>
</ul>

<p>Internally, we perform some basic checks that the string is proper JSON, then if you want to lint
the GeoJSON (see the <code>linting_opts()</code> function) we&rsquo;ll lint the GeoJSON as well using our
<code>geojsonlint</code> package.</p>

<p>Make a <code>Point</code></p>

<pre><code class="language-r">(x &lt;- point('{ &quot;type&quot;: &quot;Point&quot;, &quot;coordinates&quot;: [100.0, 0.0] }'))
#&gt; &lt;Point&gt;
#&gt;   coordinates:  [100,0]
</code></pre>

<p>In addition, you can perform some basic operations, such as adding (<code>properties_add()</code>) or getting properties (<code>properties_get()</code>), adding (<code>crs_add()</code>) or getting CRS (<code>crs_get()</code>), adding (<code>bbox_add()</code>) or getting (<code>bbox_get()</code>) a bounding box. You can calculate a bounding box on your GeoJSON with <code>geo_bbox()</code>, prettify your GeoJSON with <code>geo_pretty()</code>, and write your GeoJSON to disk with <code>geo_write()</code>.</p>

<p>Add and get properties</p>

<pre><code class="language-r">(y &lt;- linestring('{ &quot;type&quot;: &quot;LineString&quot;, &quot;coordinates&quot;: [ [100.0, 0.0], [101.0, 1.0] ]}'))
#&gt; &lt;LineString&gt;
#&gt;   coordinates:  [[100,0],[101,1]]
(z &lt;- y %&gt;% feature() %&gt;% properties_add(population = 1000))
#&gt; {
#&gt;     &quot;type&quot;: &quot;Feature&quot;,
#&gt;     &quot;properties&quot;: {
#&gt;         &quot;population&quot;: 1000
#&gt;     },
#&gt;     &quot;geometry&quot;: {
#&gt;         &quot;type&quot;: &quot;LineString&quot;,
#&gt;         &quot;coordinates&quot;: [
#&gt;             [
#&gt;                 100,
#&gt;                 0
#&gt;             ],
#&gt;             [
#&gt;                 101,
#&gt;                 1
#&gt;             ]
#&gt;         ]
#&gt;     }
#&gt; }
properties_get(z, property = 'population')
#&gt; 1000
</code></pre>

<p>Add bbox - without an input, we figure out the 2D bbox for you</p>

<pre><code class="language-r">x &lt;- '{ &quot;type&quot;: &quot;Polygon&quot;,
&quot;coordinates&quot;: [
  [ [100.0, 0.0], [101.0, 0.0], [101.0, 1.0], [100.0, 1.0], [100.0, 0.0] ]
  ]
}'
y &lt;- polygon(x)
y %&gt;% feature() %&gt;% bbox_add()
#&gt; {
#&gt;     &quot;type&quot;: &quot;Feature&quot;,
#&gt;     &quot;properties&quot;: {
#&gt;
#&gt;     },
#&gt;     &quot;geometry&quot;: {
#&gt;         &quot;type&quot;: &quot;Polygon&quot;,
#&gt;         &quot;coordinates&quot;: [
#&gt;             [
#&gt;                 [
#&gt;                     100,
#&gt;                     0
#&gt;                 ],
#&gt;                 [
#&gt;                     101,
#&gt;                     0
#&gt;                 ],
#&gt;                 [
#&gt;                     101,
#&gt;                     1
#&gt;                 ],
#&gt;                 [
#&gt;                     100,
#&gt;                     1
#&gt;                 ],
#&gt;                 [
#&gt;                     100,
#&gt;                     0
#&gt;                 ]
#&gt;             ]
#&gt;         ]
#&gt;     },
#&gt;     &quot;bbox&quot;: [
#&gt;         100,
#&gt;         0,
#&gt;         101,
#&gt;         1
#&gt;     ]
#&gt; }
</code></pre>

<p>Get the GeoJSON type</p>

<pre><code class="language-r">geo_type(y)
#&gt; [1] &quot;Polygon&quot;
</code></pre>

<p>Pretty print the GeoJSON</p>

<pre><code class="language-r">geo_pretty(y)
#&gt; {
#&gt;     &quot;type&quot;: &quot;Polygon&quot;,
#&gt;     &quot;coordinates&quot;: [
#&gt;         [
#&gt;             [
#&gt;                 100.0,
#&gt;                 0.0
#&gt;             ],
#&gt;             [
#&gt;                 101.0,
#&gt;                 0.0
#&gt;             ],
#&gt;             [
#&gt;                 101.0,
#&gt;                 1.0
#&gt;             ],
#&gt;             [
#&gt;                 100.0,
#&gt;                 1.0
#&gt;             ],
#&gt;             [
#&gt;                 100.0,
#&gt;                 0.0
#&gt;             ]
#&gt;         ]
#&gt;     ]
#&gt; }
#&gt;
</code></pre>

<p>Write to disk (and read back)</p>

<pre><code class="language-r">f &lt;- tempfile(fileext = &quot;.geojson&quot;)
geo_write(y, f)
jsonlite::fromJSON(f, FALSE)
#&gt; $type
#&gt; [1] &quot;Polygon&quot;
#&gt;
#&gt; $coordinates
#&gt; $coordinates[[1]]
#&gt; $coordinates[[1]][[1]]
#&gt; $coordinates[[1]][[1]][[1]]
#&gt; [1] 100
#&gt;
#&gt; $coordinates[[1]][[1]][[2]]
#&gt; [1] 0
#&gt;
#&gt;
#&gt; $coordinates[[1]][[2]]
#&gt; $coordinates[[1]][[2]][[1]]
#&gt; [1] 101
#&gt;
#&gt; $coordinates[[1]][[2]][[2]]
#&gt; [1] 0
#&gt;
#&gt;
#&gt; $coordinates[[1]][[3]]
#&gt; $coordinates[[1]][[3]][[1]]
#&gt; [1] 101
#&gt;
#&gt; $coordinates[[1]][[3]][[2]]
#&gt; [1] 1
#&gt;
#&gt;
#&gt; $coordinates[[1]][[4]]
#&gt; $coordinates[[1]][[4]][[1]]
#&gt; [1] 100
#&gt;
#&gt; $coordinates[[1]][[4]][[2]]
#&gt; [1] 1
#&gt;
#&gt;
#&gt; $coordinates[[1]][[5]]
#&gt; $coordinates[[1]][[5]][[1]]
#&gt; [1] 100
#&gt;
#&gt; $coordinates[[1]][[5]][[2]]
#&gt; [1] 0
</code></pre>

<p>Lastly, the Mapbox folks have a compact binary encoding for geographic data (<a href="https://github.com/mapbox/geobuf">Geobuf</a>) that provides lossless compression of GeoJSON data into protocol buffers. Our own <a href="https://ropensci.org/about/#staff">Jeroen Ooms</a> added Geobuf serialization to his <a href="https://github.com/jeroen/protolite">protolite</a> package, which we import in <code>geojson</code> to allow you to read Geobuf with <code>from_geobuf()</code> and write Geobuf with <code>to_geobuf()</code>.</p>

<pre><code class="language-r">file &lt;- system.file(&quot;examples/test.pb&quot;, package = &quot;geojson&quot;)
from_geobuf(file, pretty = TRUE)
#&gt; {
#&gt;   &quot;type&quot;: &quot;FeatureCollection&quot;,
#&gt;   &quot;features&quot;: [
#&gt;     {
#&gt;       &quot;type&quot;: &quot;Feature&quot;,
#&gt;       &quot;geometry&quot;: {
#&gt;         &quot;type&quot;: &quot;Point&quot;,
#&gt;         &quot;coordinates&quot;: [102, 0.5]
#&gt;       },
#&gt;       &quot;id&quot;: 999,
...
</code></pre>

<pre><code class="language-r">to_geobuf(from_geobuf(file))
#&gt;   [1] 0a 05 70 72 6f 70 30 0a 06 64 6f 75 62 6c 65 0a 0c 6e 65 67 61 74 69
#&gt;  [24] 76 65 5f 69 6e 74 0a 0c 70 6f 73 69 74 69 76 65 5f 69 6e 74 0a 0f 6e
#&gt;  [47] 65 67 61 74 69 76 65 5f 64 6f 75 62 6c 65 0a 0f 70 6f 73 69 74 69 76
#&gt;  [70] 65 5f 64 6f 75 62 6c 65 0a 04 6e 75 6c 6c 0a 05 61 72 72 61 79 0a 06
#&gt;  [93] 6f 62 6a 65 63 74 0a 06 62 6c 61 62 6c 61 0a 07 63 75 73 74 6f 6d 31
...
</code></pre>

<h2 id="geoops">geoops</h2>

<p><span class="label label-default">cran</span> <a href="https://github.com/ropenscilabs/geoops"><span class="label label-info">github</span></a></p>

<p><a href="https://github.com/ropenscilabs/geoops">geoops</a> - <code>geoops</code> is not quite ready to use yet, but
the goal with <code>geoops</code> is to provide spatial operations on GeoJSON that work with the <code>geojson</code>
package. Example operations are:</p>

<ul>
<li>Find the set of points that are also in a polygon</li>
<li>Find centroid of a polygon</li>
<li>Calculate distance between two points</li>
<li>Calculate buffer of a given radius around a point</li>
<li>Combine one or more polygons together</li>
</ul>

<p>Another feature of <code>geoops</code> we&rsquo;re excited about is slicing up GeoJSON easily by using our
package <a href="https://github.com/ropensci/jqr">jqr</a>. It&rsquo;s similar in concept to using <code>dplyr</code> for drilling down into
a data.frame, but instead we can do that with GeoJSON.</p>

<blockquote>
<p>note: this package used to be called <code>siftgeojson</code></p>
</blockquote>

<h2 id="geojsonio">geojsonio</h2>

<p><a href="https://cran.rstudio.com/web/packages/geojsonio/"><span class="label label-warning">cran</span></a> <a href="https://github.com/ropensci/geojsonio"><span class="label label-info">github</span></a></p>

<p><a href="https://github.com/ropensci/geojsonio">geojsonio</a> - <code>geojsonio</code> is a client for making it
easy to convert lots of different things to GeoJSON, and for reading/writing GeoJSON.</p>

<p>We had a new version (<code>v0.2</code>) come out in July this year, with major performance improvements to
<code>geojson_json()</code> - and we&rsquo;ve deprecated GeoJSON linting functionality and now point people
to our package <code>geojsonlint</code> for all GeoJSON linting tasks.</p>

<h3 id="example">Example</h3>

<p>A quick example of the power of <code>geojsonio</code></p>

<pre><code class="language-r">install.packages(&quot;geojsonio&quot;)
</code></pre>

<pre><code class="language-r">library(&quot;geojsonio&quot;)
</code></pre>

<p>Convert a numeric vector to a GeoJSON <code>Point</code>:</p>

<pre><code class="language-r">geojson_json(c(32.45, -99.74))
#&gt; {&quot;type&quot;:&quot;FeatureCollection&quot;,&quot;features&quot;:[{&quot;type&quot;:&quot;Feature&quot;,&quot;geometry&quot;:{&quot;type&quot;:&quot;Point&quot;,&quot;coordinates&quot;:[32.45,-99.74]},&quot;properties&quot;:{}}]}
</code></pre>

<p>Read GeoJSON from a file with one simple command and plot it:</p>

<pre><code class="language-r">file &lt;- system.file(&quot;examples&quot;, &quot;california.geojson&quot;, package = &quot;geojsonio&quot;)
out &lt;- geojson_read(file, what = &quot;sp&quot;)
library('sp')
plot(out)
</code></pre>

<p><img src="/assets/blog-images/2016-11-22-geospatial-suite/unnamed-chunk-16-1.png" alt="plot of chunk unnamed-chunk-16" /></p>

<h2 id="geojsonlint">geojsonlint</h2>

<p><a href="https://cran.rstudio.com/web/packages/geojsonlint/"><span class="label label-warning">cran</span></a> <a href="https://github.com/ropensci/geojsonlint"><span class="label label-info">github</span></a></p>

<p><a href="https://github.com/ropensci/geojsonlint">geojsonlint</a> - <code>geojsonlint</code> is a client for linting
GeoJSON. It provides three different ways to lint GeoJSON, using: the API at <geojsonlint.com>,
the JS library <code>geojsonhint</code>, or the JS library <code>is-my-json-valid</code>. The package provides a consistent
interface to the three different linters, always returning a boolean, and toggles provided for
verbose output and whether to stop when invalid GeoJSON is found.</p>

<p>We released a new version (<code>v0.2</code>) this month that uses the newer version of the JS
library <code>geojsonhint</code>, affecting the <code>geojson_hint()</code> function. Note that the dev version of
<code>geojsonlint</code> has an even newer version of the JS <code>geojsonhint</code> library, so you may want to
upgrade if you&rsquo;re using that linter: <code>devtools::install_github(&quot;ropensci/geojsonlint&quot;)</code>.</p>

<h3 id="example-1">Example</h3>

<p>A quick example of the power of <code>geojsonlint</code></p>

<pre><code class="language-r">install.packages(&quot;geojsonlint&quot;)
</code></pre>

<pre><code class="language-r">library(&quot;geojsonlint&quot;)
</code></pre>

<p>Good GeoJSON</p>

<pre><code class="language-r">geojson_hint(x = '{&quot;type&quot;: &quot;Point&quot;, &quot;coordinates&quot;: [-100, 80]}')
#&gt; [1] TRUE
</code></pre>

<p>Bad GeoJSON</p>

<pre><code class="language-r">geojson_hint('{ &quot;type&quot;: &quot;FeatureCollection&quot; }')
#&gt; [1] FALSE
geojson_hint('{ &quot;type&quot;: &quot;FeatureCollection&quot; }', verbose = TRUE)
#&gt; [1] FALSE
#&gt; attr(,&quot;errors&quot;)
#&gt;   line                    message
#&gt; 1    1 &quot;features&quot; member required
geojson_hint('{ &quot;type&quot;: &quot;FeatureCollection&quot; }', error = TRUE)
#&gt; Error: Line 1
#&gt;        - &quot;features&quot; member required
</code></pre>

<h2 id="lawn">lawn</h2>

<p><a href="https://cran.rstudio.com/web/packages/lawn/"><span class="label label-warning">cran</span></a> <a href="https://github.com/ropensci/lawn"><span class="label label-info">github</span></a></p>

<p><a href="https://github.com/ropensci/lawn">lawn</a> - <code>lawn</code> is an R client wrapping <a href="http://turfjs.org/">Turf.js</a>
from Mapbox. Turf is a JS library for doing advanced geospatial analysis. Using the great <a href="https://github.com/jeroen/v8">V8</a>
R client from <a href="https://ropensci.org/about/#staff">Jeroen Ooms</a> we can wrap Turf.js
in R.</p>

<p>We released a new version (<code>v0.3</code>) late last month that is a big change from the previous
version as we now wrap the newest version of Turf <code>v3.5.2</code> that dropped a number of methods,
and introduced new ones.</p>

<h3 id="example-2">Example</h3>

<p>A quick example of the power of <code>lawn</code></p>

<pre><code class="language-r">install.packages(&quot;lawn&quot;)
</code></pre>

<pre><code class="language-r">library(&quot;lawn&quot;)
</code></pre>

<p>Calcuate distance (default: km) between two points</p>

<pre><code class="language-r">from &lt;- '{
 &quot;type&quot;: &quot;Feature&quot;,
 &quot;properties&quot;: {},
 &quot;geometry&quot;: {
   &quot;type&quot;: &quot;Point&quot;,
   &quot;coordinates&quot;: [-75.343, 39.984]
 }
}'
to &lt;- '{
  &quot;type&quot;: &quot;Feature&quot;,
  &quot;properties&quot;: {},
  &quot;geometry&quot;: {
    &quot;type&quot;: &quot;Point&quot;,
    &quot;coordinates&quot;: [-75.534, 39.123]
  }
}'
lawn_distance(from, to)
#&gt; [1] 97.15958
</code></pre>

<p>Buffer a point (with distance of 5 km)</p>

<pre><code class="language-r">pt &lt;- '{
 &quot;type&quot;: &quot;Feature&quot;,
 &quot;properties&quot;: {},
 &quot;geometry&quot;: {
    &quot;type&quot;: &quot;Point&quot;,
    &quot;coordinates&quot;: [-90.548630, 14.616599]
  }
}'
lawn_buffer(pt, dist = 5)
#&gt; &lt;Feature&gt;
#&gt;   Type: Polygon
#&gt;   Bounding box: -90.6 14.6 -90.5 14.7
#&gt;   No. points: 66
#&gt;   Properties: NULL
</code></pre>

<h2 id="geonames">geonames</h2>

<p><a href="https://cran.rstudio.com/web/packages/geonames/"><span class="label label-warning">cran</span></a> <a href="https://github.com/ropensci/geonames"><span class="label label-info">github</span></a> <span class="label label-success">community</span></p>

<p><a href="https://github.com/ropensci/geonames">geonames</a> - <code>geonames</code> is an R client for the
<geonames.org> web service, that allows you to query for global geographic data such
as administrative areas, populated places, and more.</p>

<h3 id="example-3">Example</h3>

<p>A quick example of the power of <code>geonames</code></p>

<pre><code class="language-r">install.packages(&quot;geonames&quot;)
</code></pre>

<pre><code class="language-r">library(&quot;geonames&quot;)
</code></pre>

<p>Search for place names with by place name:</p>

<pre><code class="language-r">GNsearch(q = 'london', maxRows = 10)
#&gt;    adminCode1       lng geonameId             toponymName countryId fcl
#&gt; 1         ENG  -0.12574   2643743                  London   2635167   P
#&gt; 2          08 -81.23304   6058560                  London   6251999   P
#&gt; 3         ENG  -0.09184   2643741          City of London   2635167   P
#&gt; 4          05  27.91162   1006984             East London    953987   P
...
</code></pre>

<p>Find the ISO country code for a given lat/long:</p>

<pre><code class="language-r">GNcountryCode(lat = 47.03, lng = 10.2)
#&gt; $languages
#&gt; [1] &quot;de-AT,hr,hu,sl&quot;
#&gt;
#&gt; $distance
#&gt; [1] &quot;0&quot;
#&gt;
#&gt; $countryCode
#&gt; [1] &quot;AT&quot;
#&gt;
#&gt; $countryName
#&gt; [1] &quot;Republic of Austria&quot;
</code></pre>

<h2 id="geoparser">geoparser</h2>

<p><a href="https://cran.rstudio.com/web/packages/geoparser/"><span class="label label-warning">cran</span></a> <a href="https://github.com/ropenscilabs/geoparser"><span class="label label-info">github</span></a> <span class="label label-success">community</span></p>

<p><a href="https://github.com/ropenscilabs/geoparser">geoparser</a> - <code>geoparser</code> is an interface
to the Geoparser.io API for Identifying and Disambiguating Places Mentioned in Text</p>

<h3 id="example-4">Example</h3>

<p>A quick example of the power of <code>geoparser</code></p>

<pre><code class="language-r">install.packages(&quot;geoparser&quot;)
</code></pre>

<pre><code class="language-r">library(&quot;geoparser&quot;)
</code></pre>

<p>In a very simple example, send a small string to get geoparsed:</p>

<pre><code class="language-r">output &lt;- geoparser_q(&quot;I was born in Vannes and I live in Barcelona&quot;)
output$results
#&gt; # A tibble: 2 × 11
#&gt;   country confidence      name admin1                                           type geometry.type longitude latitude reference1 reference2
#&gt; *   &lt;chr&gt;     &lt;fctr&gt;     &lt;chr&gt;  &lt;chr&gt;                                          &lt;chr&gt;        &lt;fctr&gt;     &lt;dbl&gt;    &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;
#&gt; 1      FR          1    Vannes     A2 seat of a second-order administrative division         Point  -2.75000 47.66667         14         20
#&gt; 2      ES          1 Barcelona     56  seat of a first-order administrative division         Point   2.15899 41.38879         35         44
#&gt; # ... with 1 more variables: text_md5 &lt;chr&gt;
output$properties
#&gt; # A tibble: 1 × 4
#&gt;   apiVersion       source                    id                         text_md5
#&gt; *     &lt;fctr&gt;       &lt;fctr&gt;                &lt;fctr&gt;                            &lt;chr&gt;
#&gt; 1      0.4.1 geoparser.io 7Mp287nh6XbbH0QMojB6L 51e05aeb3366e55795a9729dd74ae901
</code></pre>

<p>The <code>properties</code> data.frame gives some metadata for your request, while the
<code>results</code> data.frame gives results of the geoparsing, including the
name found, the type of geospatial thing, geometry type, and coordinates.</p>

<h2 id="rgeospatialquality">rgeospatialquality</h2>

<p><a href="https://cran.rstudio.com/web/packages/rgeospatialquality/"><span class="label label-warning">cran</span></a> <a href="https://github.com/ropenscilabs/rgeospatialquality"><span class="label label-info">github</span></a> <span class="label label-success">community</span></p>

<p><a href="https://github.com/ropenscilabs/rgeospatialquality">rgeospatialquality</a> - <code>rgeospatialquality</code>
is an R client for the <a href="http://api-geospatial.vertnet-portal.appspot.com/geospatial">Geospatial Data Quality API</a>
that detects geospatial quality issues with geostpaial biodiversity occurrence data.</p>

<h3 id="example-5">Example</h3>

<p>A quick example of the power of <code>rgeospatialquality</code></p>

<pre><code class="language-r">install.packages(&quot;rgeospatialquality&quot;)
</code></pre>

<pre><code class="language-r">library(&quot;rgeospatialquality&quot;)
</code></pre>

<p>Make a simple occurrence record:</p>

<pre><code class="language-r">rec &lt;- list(
  decimalLatitude = 42.1833,
  decimalLongitude = -1.8332,
  countryCode = &quot;ES&quot;,
  scientificName = &quot;Puma concolor&quot;
)
</code></pre>

<p>Pass the record to the API:</p>

<pre><code class="language-r">parse_record(record = rec)
#&gt; $hasCoordinates
#&gt; [1] TRUE
#&gt;
#&gt; $validCountry
#&gt; [1] TRUE
#&gt;
#&gt; $validCoordinates
#&gt; [1] TRUE
#&gt;
#&gt; $hasCountry
#&gt; [1] TRUE
#&gt;
#&gt; $coordinatesInsideCountry
#&gt; [1] TRUE
#&gt;
#&gt; $hasScientificName
#&gt; [1] TRUE
#&gt;
#&gt; $highPrecisionCoordinates
#&gt; [1] TRUE
#&gt;
#&gt; $coordinatesInsideRangeMap
#&gt; [1] FALSE
#&gt;
#&gt; $nonZeroCoordinates
#&gt; [1] TRUE
#&gt;
#&gt; $distanceToRangeMapInKm
#&gt; [1] 6874.023
</code></pre>

<p>The results is a named list, with results for various aspects of geospatial quality, including
whether the record has coordinates, whether the country is valid, whether the coordinates
are valid, and more.</p>

<h2 id="getlandsat">getlandsat</h2>

<p><a href="https://cran.rstudio.com/web/packages/getlandsat/"><span class="label label-warning">cran</span></a> <a href="https://github.com/ropenscilabs/getlandsat"><span class="label label-info">github</span></a></p>

<p><a href="https://github.com/ropenscilabs/getlandsat">getlandsat</a> - <code>getlandsat</code> provides
access to Landsat <a href="https://landsat.usgs.gov">https://landsat.usgs.gov</a> 8 metadata and images hosted on
AWS S3 at <a href="https://aws.amazon.com/public-data-sets/landsat">https://aws.amazon.com/public-data-sets/landsat</a>. The package only
fetches data. It does not attempt to aid users in downstream usage.</p>

<h3 id="example-6">Example</h3>

<p>A quick example of the power of <code>getlandsat</code></p>

<pre><code class="language-r">install.packages(&quot;getlandsat&quot;)
</code></pre>

<pre><code class="language-r">library(&quot;getlandsat&quot;)
</code></pre>

<p>Get an image (see <code>lsat_list()</code>, <code>lsat_scenes()</code>, <code>lsat_scene_files()</code> to find/search
for images):</p>

<pre><code class="language-r">lsat_image(&quot;LC80101172015002LGN00_B5.TIF&quot;)
#&gt; [1] &quot;/Users/sacmac/Library/Caches/landsat-pds/L8/010/117/LC80101172015002LGN00/LC80101172015002LGN00_B5.TIF&quot;
</code></pre>

<p>Make a plot</p>

<pre><code class="language-r">library(&quot;raster&quot;)
x &lt;- lsat_cache_details()[[1]]
img &lt;- raster(x$file)
plot(img)
</code></pre>

<p><img src="/assets/blog-images/2016-11-22-geospatial-suite/unnamed-chunk-39-1.png" alt="plot of chunk unnamed-chunk-39" /></p>

<h2 id="osmplotr">osmplotr</h2>

<p><a href="https://cran.rstudio.com/web/packages/osmplotr/"><span class="label label-warning">cran</span></a> <a href="https://github.com/ropenscilabs/osmplotr"><span class="label label-info">github</span></a> <span class="label label-success">community</span></p>

<p><a href="https://github.com/ropenscilabs/osmplotr">osmplotr</a> - <code>osmplotr</code> produces customisable
images of <a href="https://www.openstreetmap.org/">OpenStreetMap (OSM)</a> data and enables data
visualisation using OSM objects.</p>

<h3 id="example-7">Example</h3>

<p>A quick example of the power of <code>osmplotr</code></p>

<pre><code class="language-r">install.packages(&quot;osmplotr&quot;)
</code></pre>

<pre><code class="language-r">library(&quot;osmplotr&quot;)
library(&quot;maptools&quot;)
</code></pre>

<p>Make a basic map:</p>

<pre><code class="language-r">bbox &lt;- get_bbox(latlon = c(-0.13,51.50,-0.11,51.52))
dat_B &lt;- extract_osm_objects(key = 'building', bbox = bbox)
map &lt;- osm_basemap(bbox = bbox, bg = 'gray20')
map &lt;- add_osm_objects(map, dat_B, col = 'gray40')
print_osm_map(map)
</code></pre>

<p><img src="/assets/blog-images/2016-11-22-geospatial-suite/osmplotr_plot.png" alt="osmplot" /></p>

<h2 id="rnaturalearth">rnaturalearth</h2>

<p><span class="label label-default">cran</span> <a href="https://github.com/ropenscilabs/rnaturalearth"><span class="label label-info">github</span></a> <span class="label label-success">community</span></p>

<p><a href="https://github.com/ropenscilabs/rnaturalearth">rnaturalearth</a> - <code>rnaturalearth</code>
facilitates world mapping by making Natural Earth (<a href="http://www.naturalearthdata.com/">http://www.naturalearthdata.com/</a>)
map data available in R.</p>

<h3 id="example-8">Example</h3>

<p>A quick example of the power of <code>rnaturalearth</code></p>

<pre><code class="language-r">devtools::install_github(&quot;ropenscilabs/rnaturalearth&quot;)
</code></pre>

<pre><code class="language-r">library(&quot;rnaturalearth&quot;)
</code></pre>

<p>Some data comes installed with <code>rnaturalearth</code></p>

<pre><code class="language-r">sp::plot(ne_countries())
</code></pre>

<p><img src="/assets/blog-images/2016-11-22-geospatial-suite/unnamed-chunk-45-1.png" alt="plot of chunk unnamed-chunk-45" /></p>

<p>You can also download specific data:</p>

<pre><code class="language-r">rivers50 &lt;- ne_download(scale = 50, type = 'rivers_lake_centerlines',
                        category = 'physical')
#&gt; OGR data source with driver: ESRI Shapefile
#&gt; Source: &quot;/var/folders/gs/4khph0xs0436gmd2gdnwsg080000gn/T//Rtmp8yl7Kj&quot;, layer: &quot;ne_50m_rivers_lake_centerlines&quot;
#&gt; with 460 features
#&gt; It has 4 fields
sp::plot(rivers50)
</code></pre>

<p><img src="/assets/blog-images/2016-11-22-geospatial-suite/unnamed-chunk-46-1.png" alt="plot of chunk unnamed-chunk-46" /></p>

<hr />

<h2 id="future-ongoing-work">Future/Ongoing work</h2>

<p>We still have a lot that we&rsquo;d like to do. Here&rsquo;s a run down of some of the items on our list:</p>

<ul>
<li><code>geoops</code> first version: We need to get <code>geoops</code> to a first stable version on
CRAN. It will likely be a few months before that happens, as we&rsquo;re experimenting
with how to achieve the best performance, whether that be via <code>jqr</code> or dropping
down to C/C++.</li>
<li><code>geojson</code> - We just released the first version - We&rsquo;ll be integrating <code>geojson</code>
into some of our other packages that deal with GeoJSON, and may hit upon
some improvements we can make to <code>geojson</code>.</li>
<li><code>wellknown</code> fixes: We&rsquo;re working on our next version of this package, see
<a href="https://github.com/ropensci/wellknown/milestone/2">milestone v0.2</a>, which includes
making sure we account for 3D/4D WKT (<a href="https://github.com/ropensci/wellknown/issues/18">issue #18</a>),
among other things, and there&rsquo;s a possibility of changing the package interface to be slightly
more intuitive (<a href="https://github.com/ropensci/wellknown/issues/17">issue #17</a>).</li>
<li><code>geojsonio</code>: <a href="https://github.com/ropensci/geojsonio/milestone/3">milestone v0.3</a>
has a number of bug fixes, and includes methods integrating the new <a href="https://cran.rstudio.com/web/packages/sf/">sf</a> package.</li>
<li><code>geojsonrewind</code>: The new <a href="https://tools.ietf.org/html/rfc7946">GeoJSON specification</a> now has a rule about
polygons following a <a href="https://tools.ietf.org/html/rfc7946#section-3.1.6">right-hand rule</a>.
We&rsquo;re porting some of Mapbox&rsquo;s JS stuff to R in <a href="https://github.com/ropenscilabs/geojsonrewind">geojsonrewind</a> package
to be help users fix winding order.</li>
</ul>

<hr />

<h2 id="takeaway-and-feedback">Takeaway and Feedback</h2>

<p>Our goal with our geospatial suite is to make your work &ndash; whether it be serious
reproducible science, analysis of your company&rsquo;s data, or just fooling around with
some data &ndash; as easy as possible with as few installation headaches as possible.</p>

<p>How are you using our geospatial tools? We&rsquo;d love to hear about how you&rsquo;re using
our packages, whether it be in blog posts, scholarly papers, shiny apps, business
use cases, etc.</p>

<p>Let us know if you have any feedback on these packages, and/or if you think
there&rsquo;s anything else we should be thinking about making in this space.</p>

<hr />

<h2 id="community-contributors">Community contributors</h2>

<p>We&rsquo;re so so grateful to our community for their hard work on these packages:</p>

<ul>
<li><a href="https://github.com/masalmon">Maëlle Salmon</a> - <code>geoparser</code></li>
<li><a href="https://github.com/ateucher">Andy Teucher</a> - <code>geojsonio</code>, <code>geojsonlint</code></li>
<li><a href="https://github.com/jhollist">Jeff Hollister</a> - <code>lawn</code></li>
<li><a href="https://github.com/mpadge">Mark Padgham</a> - <code>osmplotr</code></li>
<li><a href="https://github.com/AndySouth">Andy South</a> - <code>rnaturalearth</code></li>
<li><a href="https://github.com/jotegui">Javier Otegui</a> - <code>rgeospatialquality</code></li>
<li><a href="https://github.com/barryrowlingson">Barry Rowlingson</a> - <code>geonames</code></li>
</ul>

<!-- links -->

<!-- references -->
<div class="footnotes">

<hr />

<ol>
<li id="fn:1">Harsch, M. A., &amp; HilleRisLambers, J. (2016). Climate Warming and Seasonal Precipitation Change Interact to Limit Species Distribution Shifts across Western North America. PLoS ONE, 11(7), e0159184. <a href="https://doi.org/10.1371/journal.pone.0159184">https://doi.org/10.1371/journal.pone.0159184</a>
 <a class="footnote-return" href="#fnref:1">↩</a></li>
</ol>
</div>

            </div>
            <br>
            <div class="col-offset-2 col-8 top-4 labels">
                
                    <a href="/tags/r"><span class="label">R</span></a>
                
                    <a href="/tags/geospatial"><span class="label">geospatial</span></a>
                
            </div>

            
            
            <div class="col-offset-2 col-8 top-4">
              <div id="disqus_thread"></div>
                <div id="disqus_thread"></div>
                <script type="text/javascript">
                var disqus_shortname = 'ropenscience';
                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
                </script>
                <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            </div>
            
        </div>
        <br>
    </div>
</article>





    <div id="footer">
        <div class="container">
            <div class="row start">
                <div class="col-1 col-1-3 top-8">
                    <img src="/img/icon_short_white.svg" />
                </div>

                <div class="col-9 col-offset-2 top-10 bottom-8">
                    <div class="row between">
                        <div class="col-2 col-1-3">
                            <a href="http://github.com/ropensci" target="_blank"><div class="icon icon-github"></div></a>
                            <a href="http://twitter.com/ropensci" target="_blank"><div class="icon icon-twitter"></div></a>
                            <a href="http://vimeo.com/ropensci" target="_blank"><div class="icon icon-vimeo"></div></a>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Info</h5>
                                <li><a href="/about">Mission</a></li>
                                <li><a href="/about#team">Team</a></li>
                                <li><a href="/about#collaborators">Collaborators</a></li>
                                <li><a href="/careers">Careers</a></li>

                            </ul>
                        </div>

                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Work</h5>
                                <li><a href="/packages/">Packages</a></li>
                                <li><a href="/blog/">Blog</a></li>
                                <li><a href="/technotes/">Tech Notes</a></li>
                                <li><a href="/tutorials/">Tutorials</a></li>
                                <li><a href="/usecases/">Use Cases</a></li>
                                <li><a href="/resources/">More Resources</a></li>
                            </ul>
                        </div>
                        <div class="col-2 col-1-3 top-8 bottom-8">
                            <ul>
                                <h5 class="bottom-2">Participate</h5>
                                <li><a href="/contact.html">Contact us</a></li>
                                <li><a href="/community/">Community</a></li>
                                <li><a href="http://onboarding.ropensci.org/">Contribute software</a></li>
                                <li><a href="http://unconf17.ropensci.org/">Unconference</a></li>
                                <li><a href="/coc">Code of conduct</a></li>
                                <li><a href="/donate/">Donate</a></li>
                            </ul>
                        </div>
                        <div class="col-4 top-8 bottom-8">
                            <h5 class="bottom-2"></h5>

                            <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" target="_blank">NumFOCUS</a></p>
                            <a href="http://numfocus.org" target="_blank"><img src="img/numfocus.png"></a>
                            <br>

                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12 top-8 bottom-9 divider">
                    <p class="top-9">Except where otherwise noted, content on this site is licensed under the <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank">CC-BY license</a>.
                    </p>
                </div>
            </div>
        </div>
    </div>



</body>
</html>



